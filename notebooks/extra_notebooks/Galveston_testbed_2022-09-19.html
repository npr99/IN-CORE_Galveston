

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Galveston Testbed (previous version) &#8212; Galveston Notebook Gallery</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="../../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/extra_notebooks/Galveston_testbed_2022-09-19';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Building Damage" href="01_Damage_Buildings/BuildingDamage_Tori_05_18_22.html" />
    <link rel="prev" title="8. Housing Houshold Recovery Sequentials" href="../housing_household_recovery.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo_galveston.png" class="logo__image only-light" alt="Galveston Notebook Gallery - Home"/>
    <script>document.write(`<img src="../../_static/logo_galveston.png" class="logo__image only-dark" alt="Galveston Notebook Gallery - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../intro.html">
                    Galveston Notebook Gallery
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Example Simulation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prerequisites.html">1. Prerequisites</a></li>

<li class="toctree-l1"><a class="reference internal" href="../multi-hazard_building_damage.html">2. Combined building damage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../electric_power_pole_damage.html">3. Electric Power Pole Damage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../monte_carlo_sampling.html">4. Monte Carlo sampling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../building_functionality.html">5. Building functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../capital_shock.html">6. Capital Shocks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../population_dislocation.html">7. Population dislocation - Multihazard Comparison</a></li>
<li class="toctree-l1"><a class="reference internal" href="../housing_household_recovery.html">8. Housing Houshold Recovery Sequentials</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Extra Notebooks</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Galveston Testbed (previous version)</a></li>









<li class="toctree-l1"><a class="reference internal" href="01_Damage_Buildings/BuildingDamage_Tori_05_18_22.html">Building Damage</a></li>

<li class="toctree-l1"><a class="reference internal" href="01_Damage_Electric%20Power/WoodPolesDamage_05_23_22.html">Wood Pole Damage</a></li>

<li class="toctree-l1"><a class="reference internal" href="01_Damage_Electric%20Power_Prestressed%20poles/PrestressedPolesDamage_05_23_22.html">Prestressed Pole Damage</a></li>

<li class="toctree-l1"><a class="reference internal" href="01_Damage_Electric%20Power_Substations/SubstationDamage_05_23_22.html">Substation Damage</a></li>

<li class="toctree-l1"><a class="reference internal" href="01_Damage_Electric%20Power_Towers/TowerDamage_05_23_22.html">Tower Damage</a></li>

<li class="toctree-l1"><a class="reference internal" href="01_Damage_Electric%20Power_WoodPoles/WoodPolesDamage_05_23_22.html">Wood Pole Damage</a></li>

<li class="toctree-l1"><a class="reference internal" href="02_Damage_EPNAnalysis/EPN_NetworkAnalysis_05_23_22.html">EPN Network Analysis</a></li>

<li class="toctree-l1"><a class="reference internal" href="03_AdditionalNotebooks/Nearest%20neighbor%20analysis_Poles%20and%20Buildings/PolesBldgsNearestNeighbor_05_23_22.html">Pole-Building Assignment</a></li>
<li class="toctree-l1"><a class="reference internal" href="01_Damage_Transportation_Bridges/BridgesDamage_05_18_22.html">Bridge Damage</a></li>

<li class="toctree-l1"><a class="reference internal" href="01_Damage_Transportation_Roadways/RoadwaysDamage_05_18_22.html">Roadway Damage</a></li>

<li class="toctree-l1"><a class="reference internal" href="03_Social_PopulationDislocationAnalysis/PopulationDisAnalysis_05_31_22.html">Population Dislocation Analysis</a></li>





</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/npr99/IN-CORE_Galveston.git/HEAD/v2/gh/npr99/IN-CORE_Galveston/kooshan_main?urlpath=tree/jupyter_book/notebooks/extra_notebooks/Galveston_testbed_2022-09-19.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onBinder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li><a href="https://colab.research.google.com/github/npr99/IN-CORE_Galveston/blob/kooshan_main/jupyter_book/notebooks/extra_notebooks/Galveston_testbed_2022-09-19.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="initThebeSBT()"
  class="btn btn-sm btn-launch-thebe dropdown-item"
  title="Launch Thebe"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="btn__text-container">Live Code</span>
</button>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/npr99/IN-CORE_Galveston" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/npr99/IN-CORE_Galveston/issues/new?title=Issue%20on%20page%20%2Fnotebooks/extra_notebooks/Galveston_testbed_2022-09-19.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/notebooks/extra_notebooks/Galveston_testbed_2022-09-19.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Galveston Testbed (previous version)</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Galveston Testbed (previous version)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#in-core-flowchart-galveston">IN-CORE Flowchart - Galveston</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#background">Background</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#general-info">General info</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#start">Start</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#initial-community-description">1) Initial community description</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-built-environment">1a) Built Environment</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#buildings">Buildings</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#b-social-systems">1b) Social Systems</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-1b-interdependent-community-description">1a + 1b) Interdependent Community Description</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#set-up-and-run-housing-unit-allocation">Set Up and Run Housing Unit Allocation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#explore-results-from-housing-unit-allocation">Explore results from Housing Unit Allocation</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#validate-the-housing-unit-allocation-has-worked">Validate the Housing Unit Allocation has worked</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#hazards-and-damages">2) Hazards and Damages</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-hazard-model-hurricane">2a) Hazard Model (Hurricane)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#coupled-adcirc-swan">Coupled ADCIRC+SWAN</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#kriging-based-surrogate-model">Kriging-based surrogate model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#building-damage">Building damage</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#building-fragility">2.1 Building Fragility</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Building Damage:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">2.2 Building Damage</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wind-building-damage">2.2.1 Wind building damage</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#surge-wave-building-damage">2.2.2 Surge-Wave building damage</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#flood-building-damage">Flood building damage</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#combine-wind-wave-and-surge-building-damage">Combine wind, wave and surge building damage</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#electric-power-facility-damage">2.3 Electric Power Facility Damage</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#functionality">3) Functionality</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-functionality-models">3a) Functionality Models</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#b-functionality-of-physical-infrastructure">3b) Functionality of Physical Infrastructure</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#d-social-science-modules">3d) Social Science Modules</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#d-1-use-new-pyincore-data-utility-to-obtain-block-group-data-for-county">3d.1 Use new pyincore-data utility to obtain Block Group Data for County</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#d-2-population-dislocation">3d.2 Population Dislocation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#d-3-explore-population-dislocation-results">3.d.3 Explore Population Dislocation Results</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#d-4-explore-population-dislocation-and-building-damage-results">3.d.4 Explore Population Dislocation and Building Damage Results</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#recovery">4) Recovery</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#household-level-housing-recovery-analysis">4.1 Household-Level Housing Recovery Analysis</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#set-up-and-run-household-level-housing-sequential-recovery">4.2 Set Up and Run Household-level Housing Sequential Recovery</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-sufficient-quality-solutions-found">6 a) Sufficient Quality Solutions Found?</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#explore-household-level-housing-recovery-results">Explore Household-level Housing Recovery Results</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-recovery-curve-based-on-income-groups">Create recovery curve based on income groups</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#b-policy-lever-and-decision-combinations">8b) Policy Lever and Decision Combinations</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#goal-make-gif-from-recovery-curves">Goal - Make GIF from recovery curves</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#post-processing">POST PROCESSING</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#postprocessing-functionality-of-physical-infrastructure">Postprocessing: Functionality of Physical Infrastructure</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#postprocessing-recovery">Postprocessing: Recovery</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">6a) Sufficient Quality Solutions Found?</a></li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <p><img alt="IN-CORE_resilience-logo.png" src="notebooks/extra_notebooks/images/IN-CORE_resilience-logo.png" /></p>
<section class="tex2jax_ignore mathjax_ignore" id="galveston-testbed-previous-version">
<h1>Galveston Testbed (previous version)<a class="headerlink" href="#galveston-testbed-previous-version" title="Permalink to this heading">#</a></h1>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="in-core-flowchart-galveston">
<h1>IN-CORE Flowchart - Galveston<a class="headerlink" href="#in-core-flowchart-galveston" title="Permalink to this heading">#</a></h1>
<p>This notebook uses the Galveston testbed to demonstrate the following components of the IN-CORE flowchart.</p>
<p><img alt="incore-flowchart.png" src="notebooks/extra_notebooks/attachment:incore-flowchart.png" /></p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="background">
<h1>Background<a class="headerlink" href="#background" title="Permalink to this heading">#</a></h1>
<p>The <strong>Galveston Testbed</strong> is an ongoing effort of the Center to test model chaining an integration across coupled systems. The current Galveston Testbed and Jupyter notebooks released with IN-CORE focus on <strong>Galveston Island</strong> as a barrier island exposed to hurricane hazards. Our ongoing work extends this analysis to Galveston County, further exploring the interplay between economic activity and recovery efforts between the mainland and the island. As shown in the following figure, Galveston County is located in the southeastern part of Texas, along the Gulf Coast adjacent to Galveston Bay.</p>
<p>Galveston Island is located in southern Galveston County with a total length of 43.5 km and a width of 4.8 km. The Island is surrounded by West Bay from the west, the Gulf of Mexico from the south and east, and Galveston Bay in the North. The Galveston Island is connected to the rest of Galveston County by interstate highway I-45. Based on the 2015 county parcel data the total number of buildings within Galveston County was 172,534 buildings with 29,541 buildings located on Galveston Island. In 2010, the total population living on Galveston Island was 48,726 people with a racial/ethnic composition of 46% non-Hispanic White, 18% non-Hispanic Black, and 31% Hispanic. Galveston, Texas has a long history with hurricanes including the Great Galveston Hurricane in 1900 which is considered the deadliest natural disaster in U.S. history. More recently, the island was affected by Hurricane Ike (2008) and Hurricane Harvey (2017), each posing unique challenges in terms of coastal multi-hazards and recovery challenges, and with billions of dollars in economic impacts.</p>
<p><img alt="Figure.png" src="notebooks/extra_notebooks/attachment:Figure.png" /></p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="general-info">
<h1>General info<a class="headerlink" href="#general-info" title="Permalink to this heading">#</a></h1>
<p>Some of the main objectives of the Galveston Testbed include:</p>
<ol class="arabic simple">
<li><p>Investigate the multi-hazard surge, wave, inundation, and wind hazards in coastal settings.</p></li>
<li><p>Consider interdependent infrastructure systems including buildings, transportation, and power.</p></li>
<li><p>Leverage historical social-science data, informing population dislocation and recovery modeling.</p></li>
<li><p>Evaluate hybrid metrics of community resilience, such as those that require coupled modeling between social and physical systems.</p></li>
</ol>
<p>More information about the testbed and the field study can be found in this publication:</p>
<ol class="arabic simple">
<li><p>Fereshtehnejad, E., Gidaris, I., Rosenheim, N., Tomiczek, T., Padgett, J. E., Cox, D. T., … &amp; Gillis Peacock, W. (2021). Probabilistic risk assessment of coupled natural-physical-social systems: cascading impact of hurricane-induced damages to civil infrastructure in Galveston, Texas. Natural Hazards Review, 22(3), 04021013.</p></li>
</ol>
<p>The current notebook is a WORK-IN-PROGRESS that consists of the following modules:</p>
<ol class="arabic simple">
<li><p>Community Description with Housing Unit Allocation</p></li>
<li><p>Hazard Model: Flood Surge, Wave, and Inundation Modeling with Building Damage</p></li>
<li><p>Functionality Models: Phycial Infrastructure and Population Dislocation</p></li>
<li><p>Recovery Models with Household-Level Housing Recovery Analysis</p></li>
<li><p>Policy Lever Analysis</p></li>
</ol>
<p>The models used in this testbed come from:</p>
<ol class="arabic simple">
<li><p>Nofal, O. M., Van De Lindt, J. W., Do, T. Q., Yan, G., Hamideh, S., Cox, D. T., &amp; Dietrich, J. C. (2021). Methodology for Regional Multihazard Hurricane Damage and Risk Assessment. Journal of Structural Engineering, 147(11), 04021185.</p></li>
<li><p>Darestani, Y. M., Webb, B., Padgett, J. E., Pennison, G., &amp; Fereshtehnejad, E. (2021). Fragility Analysis of Coastal Roadways and Performance Assessment of Coastal Transportation Systems Subjected to Storm Hazards. Journal of Performance of Constructed Facilities, 35(6), 04021088.</p></li>
<li><p>Darestani, Y., Padgett, J., &amp; Shafieezadeh, A. (2022). Parametrized Wind–Surge–Wave Fragility Functions for Wood Utility Poles. Journal of Structural Engineering, 148(6), 04022057.</p></li>
<li><p>Rosenheim, N., Guidotti, R., Gardoni, P., &amp; Peacock, W. G. (2019). Integration of detailed household and housing unit characteristic data with critical infrastructure for post-hazard resilience modeling. Sustainable and Resilient Infrastructure, 6(6), 385-401.</p></li>
<li><p>Sutley, E. J., &amp; Hamideh, S. (2020). Postdisaster housing stages: a markov chain approach to model sequences and duration based on social vulnerability. Risk Analysis, 40(12), 2675-2695.</p></li>
</ol>
<p>Prerequisites:
The following packages are necessary to run this notebook. To ensure dependencies are correct, install all modules through <strong>conda</strong>.</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Module</p></th>
<th class="head"><p>Version</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>pyIncore</p></td>
<td><p>=&gt;1.7.0</p></td>
<td><p>see: <a class="reference external" href="https://incore.ncsa.illinois.edu/doc/incore/install_pyincore.html">https://incore.ncsa.illinois.edu/doc/incore/install_pyincore.html</a></p></td>
</tr>
<tr class="row-odd"><td><p>pyIncore_viz</p></td>
<td><p>=&gt;1.5.0</p></td>
<td><p>see: <a class="reference external" href="https://incore.ncsa.illinois.edu/doc/pyincore_viz/index.html">https://incore.ncsa.illinois.edu/doc/pyincore_viz/index.html</a></p></td>
</tr>
</tbody>
</table>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="start">
<h1>Start<a class="headerlink" href="#start" title="Permalink to this heading">#</a></h1>
<p><img alt="start.png" src="notebooks/extra_notebooks/attachment:start.png" /></p>
<p>The following codes are preparing the analysis by checking versions and connecting to IN-CORE web service. Also, all of the necessary pyIncore analyses are being imported. In this analysis, the following pyIncore analyses are utilized:</p>
<ul class="simple">
<li><p><strong>Building damage</strong>: Computes building damage based on a particular hazard (hurricane in this testbed).</p></li>
<li><p><strong>Building functionality</strong>: Calculates building functionality probabilities.</p></li>
<li><p><strong>Housing unit allocation</strong>: Sets up a detailed critical infrastructure inventory with housing unit level characteristics.</p></li>
<li><p><strong>Population dislocation</strong>: Computes population dislocation based on a particular hazard (hurricane in this testbed).</p></li>
<li><p><strong>Household-level housing sequential recovery</strong>: Computes the series of household recovery states given a population dislocation dataset.</p></li>
<li><p><strong>Policy Lever Demonstration</strong>: Modify Building Inventory to reduce building damage.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span> 
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">sys</span> 
<span class="kn">import</span> <span class="nn">os</span> 
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">contextily</span> <span class="k">as</span> <span class="nn">ctx</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">norm</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="kn">from</span> <span class="nn">pyincore</span> <span class="kn">import</span> <span class="n">IncoreClient</span><span class="p">,</span> <span class="n">Dataset</span><span class="p">,</span> <span class="n">DataService</span><span class="p">,</span> <span class="n">HazardService</span><span class="p">,</span> <span class="n">FragilityService</span><span class="p">,</span> <span class="n">MappingSet</span><span class="p">,</span> <span class="n">FragilityCurveSet</span>
<span class="kn">from</span> <span class="nn">pyincore_viz.geoutil</span> <span class="kn">import</span> <span class="n">GeoUtil</span> <span class="k">as</span> <span class="n">geoviz</span>
<span class="kn">from</span> <span class="nn">pyincore_viz.plotutil</span> <span class="kn">import</span> <span class="n">PlotUtil</span> <span class="k">as</span> <span class="n">plotviz</span>

<span class="c1"># importing pyIncone analyses:</span>
<span class="kn">from</span> <span class="nn">pyincore.analyses.buildingdamage</span> <span class="kn">import</span> <span class="n">BuildingDamage</span>
<span class="kn">from</span> <span class="nn">pyincore.analyses.bridgedamage</span> <span class="kn">import</span> <span class="n">BridgeDamage</span>
<span class="kn">from</span> <span class="nn">pyincore.analyses.buildingfunctionality</span> <span class="kn">import</span> <span class="n">BuildingFunctionality</span>
<span class="kn">from</span> <span class="nn">pyincore.analyses.combinedwindwavesurgebuildingdamage</span> <span class="kn">import</span> <span class="n">CombinedWindWaveSurgeBuildingDamage</span>
<span class="kn">from</span> <span class="nn">pyincore.analyses.epfdamage</span> <span class="kn">import</span> <span class="n">EpfDamage</span>
<span class="kn">from</span> <span class="nn">pyincore.analyses.housingunitallocation</span> <span class="kn">import</span> <span class="n">HousingUnitAllocation</span>
<span class="kn">from</span> <span class="nn">pyincore.analyses.populationdislocation</span> <span class="kn">import</span> <span class="n">PopulationDislocation</span><span class="p">,</span> <span class="n">PopulationDislocationUtil</span>
<span class="kn">from</span> <span class="nn">pyincore.analyses.housingrecoverysequential</span> <span class="kn">import</span> <span class="n">HousingRecoverySequential</span>
<span class="kn">from</span> <span class="nn">pyincore.analyses.socialvulnerability</span> <span class="kn">import</span> <span class="n">SocialVulnerability</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ModuleNotFoundError</span><span class="g g-Whitespace">                       </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">line</span> <span class="mi">3</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="kn">import</span> <span class="nn">warnings</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
<span class="ne">----&gt; </span><span class="mi">3</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span> 
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="ne">ModuleNotFoundError</span>: No module named &#39;pandas&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Functions for visualizing the population data results as tables</span>
<span class="kn">from</span> <span class="nn">pyincore_viz.analysis.popresultstable</span> <span class="kn">import</span> <span class="n">PopResultsTable</span> <span class="k">as</span> <span class="n">poptable</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check package versions - good practice for replication</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Python Version &quot;</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;pandas version: &quot;</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">__version__</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;numpy version: &quot;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">__version__</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Python Version  3.9.15 | packaged by conda-forge | (main, Nov 22 2022, 08:41:22) [MSC v.1929 64 bit (AMD64)]
pandas version:  1.5.2
numpy version:  1.24.1
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check working directory - good practice for relative path access</span>
<span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;C:\\Users\\ka50\\Box\\Rice\\Software_Projects\\Pycharm\\IN-CORE_Galveston\\jupyter_book\\notebooks&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="n">IncoreClient</span><span class="p">()</span>
<span class="c1"># IN-CORE caches files on the local machine, it might be necessary to clear the memory</span>
<span class="c1"># client.clear_cache() </span>
<span class="n">data_service</span> <span class="o">=</span> <span class="n">DataService</span><span class="p">(</span><span class="n">client</span><span class="p">)</span> <span class="c1"># create data_service object for loading files</span>
<span class="n">hazard_service</span> <span class="o">=</span> <span class="n">HazardService</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
<span class="n">fragility_services</span> <span class="o">=</span> <span class="n">FragilityService</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Connection successful to IN-CORE services. pyIncore version detected: 1.8.0
</pre></div>
</div>
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="initial-community-description">
<h1>1) Initial community description<a class="headerlink" href="#initial-community-description" title="Permalink to this heading">#</a></h1>
<p><img alt="initialcommunitydescription.png" src="notebooks/extra_notebooks/attachment:initialcommunitydescription.png" /></p>
<p>Step 1 in IN-CORE is to establish initial community description at time 0 and with policy levers and decision combinations (PD) set to K (baseline case). The community description includes three parts including <strong>1a) Built Environment</strong>, <strong>1b) Social Systems</strong>, and <strong>1c) Economic Systems</strong>.</p>
<section id="a-built-environment">
<h2>1a) Built Environment<a class="headerlink" href="#a-built-environment" title="Permalink to this heading">#</a></h2>
<p>The Galveston testbed consists of five infrastructure systems as buildings, transportation network, electric power transmission and distribution network, water/wastewater network, and critical facilities. Each infrastructure system may be composed of different infrastructure components. For example, the transportation network consists of bridges and roadways. The infrastructure systems and components are shown below along with their IN-CORE GUID.</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>No.</p></th>
<th class="head"><p>Infrastructure System</p></th>
<th class="head"><p>Infrastructure Component</p></th>
<th class="head"><p>GUID</p></th>
<th class="head"><p>More details</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>Buildings</p></td>
<td><p>-</p></td>
<td><p>63053ddaf5438e1f8c517fed</p></td>
<td><p>Ref.</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Transportation network</p></td>
<td><p>Bridges</p></td>
<td><p>60620320be94522d1cb9f7f0</p></td>
<td><p>Ref.</p></td>
</tr>
<tr class="row-even"><td><p>-</p></td>
<td><p>Transportation network</p></td>
<td><p>Roadways</p></td>
<td><p>5f15d04f33b2700c11fc9c4e</p></td>
<td><p>Ref.</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>Electric power network</p></td>
<td><p>Connectivity</p></td>
<td><p>Outside of IN-CORE</p></td>
<td><p>Ref.</p></td>
</tr>
<tr class="row-even"><td><p>-</p></td>
<td><p>Electric power network</p></td>
<td><p>Poles and Towers</p></td>
<td><p>Outside of IN-CORE</p></td>
<td><p>Ref.</p></td>
</tr>
<tr class="row-odd"><td><p>-</p></td>
<td><p>Electric power network</p></td>
<td><p>Substation</p></td>
<td><p>Outside of IN-CORE</p></td>
<td><p>Ref.</p></td>
</tr>
<tr class="row-even"><td><p>-</p></td>
<td><p>Electric power network</p></td>
<td><p>Transmission</p></td>
<td><p>Outside of IN-CORE</p></td>
<td><p>Ref.</p></td>
</tr>
<tr class="row-odd"><td><p>-</p></td>
<td><p>Electric power network</p></td>
<td><p>Underground</p></td>
<td><p>Outside of IN-CORE</p></td>
<td><p>Ref.</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>Water/wastewater network</p></td>
<td><p>Water mains</p></td>
<td><p>Outside of IN-CORE</p></td>
<td><p>Ref.</p></td>
</tr>
<tr class="row-odd"><td><p>-</p></td>
<td><p>Water/wastewater network</p></td>
<td><p>Water plants</p></td>
<td><p>Outside of IN-CORE</p></td>
<td><p>Ref.</p></td>
</tr>
<tr class="row-even"><td><p>-</p></td>
<td><p>Water/wastewater network</p></td>
<td><p>Wastewater mains</p></td>
<td><p>Outside of IN-CORE</p></td>
<td><p>Ref.</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>Critical facilities</p></td>
<td><p>Hospitals</p></td>
<td><p>Outside of IN-CORE</p></td>
<td><p>Ref.</p></td>
</tr>
<tr class="row-even"><td><p>-</p></td>
<td><p>Critical facilities</p></td>
<td><p>Urgent care</p></td>
<td><p>Outside of IN-CORE</p></td>
<td><p>Ref.</p></td>
</tr>
<tr class="row-odd"><td><p>-</p></td>
<td><p>Critical facilities</p></td>
<td><p>Emergency medical facilities</p></td>
<td><p>Outside of IN-CORE</p></td>
<td><p>Ref.</p></td>
</tr>
<tr class="row-even"><td><p>-</p></td>
<td><p>Critical facilities</p></td>
<td><p>Fire stations</p></td>
<td><p>Outside of IN-CORE</p></td>
<td><p>Ref.</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>Fiber Optic Network</p></td>
<td><p>-</p></td>
<td><p>Outside of IN-CORE</p></td>
<td><p>Ref.</p></td>
</tr>
</tbody>
</table>
<p><strong>Note</strong>: The built environment in the Galveston testbed are in the Galveston Island. However, as the goal is to capture flow of people during recovery stages, buildings and transportation networks in the Galveston mainland are considered as well.</p>
<section id="buildings">
<h3>Buildings<a class="headerlink" href="#buildings" title="Permalink to this heading">#</a></h3>
<p>The building inventory for Galveston consists of 172,534 individual buildings. This inventory is also mappable to housing unit info of 132,553 individual households explained later in this notebook. It should be noted that the reason that the building and household data are different in terms of numbers is that each individual building can be composed of a few households or no households in the case of commercial or industrial buildings. The building inventory consists of major parameters that are used to estimate the fragility of buildings explained shortly later in this notebook.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bldg_dataset_id</span> <span class="o">=</span> <span class="s2">&quot;63053ddaf5438e1f8c517fed&quot;</span> <span class="c1"># Prod              # defining building dataset (GIS point layer)       </span>

<span class="n">bldg_dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">from_data_service</span><span class="p">(</span><span class="n">bldg_dataset_id</span><span class="p">,</span> <span class="n">data_service</span><span class="p">)</span>
<span class="c1"># geoviz.plot_map(bldg_dataset, column=&#39;arch_flood&#39;,category=&#39;True&#39;)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Galveston testbed building inventory as a function of age group&#39;</span><span class="p">)</span>

<span class="n">bldg_df</span> <span class="o">=</span> <span class="n">bldg_dataset</span><span class="o">.</span><span class="n">get_dataframe_from_shapefile</span><span class="p">()</span>
<span class="c1">#bldg_df.set_index(&#39;guid&#39;, inplace=True)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Number of buildings: </span><span class="si">{}</span><span class="s1">&#39;</span> <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">bldg_df</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Dataset already exists locally. Reading from local cached zip.
Unzipped folder found in the local cache. Reading from it...
Galveston testbed building inventory as a function of age group
Number of buildings: 172534
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="b-social-systems">
<h2>1b) Social Systems<a class="headerlink" href="#b-social-systems" title="Permalink to this heading">#</a></h2>
<p>The Galveston County, TX has a permanent resident population of approximately 53,695 people (US Census, 2020). In 2010, the total population living on Galveston County was 291,309 with 48,726 people living on Galveston, Island <a class="reference external" href="https://data.census.gov/cedsci/table?g=0500000US48167_1600000US4828068,4837252&amp;tid=DECENNIALSF12010.P1">(US Census, 2010)</a>. This section performs a housing unit allocation. The housing unit inventory includes characteristics for individual households and housing units that can be linked to residential buildings. For more information see</p>
<blockquote>
<div><p>Rosenheim, Nathanael (2021) “Detailed Household and Housing Unit Characteristics: Data and Replication Code.” DesignSafe-CI. <a class="reference external" href="https://doi.org/10.17603/ds2-jwf6-s535">https://doi.org/10.17603/ds2-jwf6-s535</a> v2</p>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Housing Unit inventory</span>
<span class="n">housing_unit_inv_id</span> <span class="o">=</span> <span class="s2">&quot;626322a7e74a5c2dfb3a72b0&quot;</span>
<span class="c1"># load housing unit inventory as pandas dataframe</span>
<span class="n">housing_unit_inv</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">from_data_service</span><span class="p">(</span><span class="n">housing_unit_inv_id</span><span class="p">,</span> <span class="n">data_service</span><span class="p">)</span>
<span class="n">filename</span> <span class="o">=</span> <span class="n">housing_unit_inv</span><span class="o">.</span><span class="n">get_file_path</span><span class="p">(</span><span class="s1">&#39;csv&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The IN-CORE Dataservice has saved the Housing Unit Inventory on your local machine: &quot;</span><span class="o">+</span><span class="n">filename</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">HTTPError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">18</span><span class="p">],</span> <span class="n">line</span> <span class="mi">4</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">housing_unit_inv_id</span> <span class="o">=</span> <span class="s2">&quot;626322a7e74a5c2dfb3a72b0&quot;</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="c1"># load housing unit inventory as pandas dataframe</span>
<span class="ne">----&gt; </span><span class="mi">4</span> <span class="n">housing_unit_inv</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">from_data_service</span><span class="p">(</span><span class="n">housing_unit_inv_id</span><span class="p">,</span> <span class="n">data_service</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="n">filename</span> <span class="o">=</span> <span class="n">housing_unit_inv</span><span class="o">.</span><span class="n">get_file_path</span><span class="p">(</span><span class="s1">&#39;csv&#39;</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The IN-CORE Dataservice has saved the Housing Unit Inventory on your local machine: &quot;</span><span class="o">+</span><span class="n">filename</span><span class="p">)</span>

<span class="nn">File ~\Anaconda3\envs\IN-CORE_GAlveston\lib\site-packages\pyincore\dataset.py:57,</span> in <span class="ni">Dataset.from_data_service</span><span class="nt">(cls, id, data_service)</span>
<span class="g g-Whitespace">     </span><span class="mi">45</span> <span class="nd">@classmethod</span>
<span class="g g-Whitespace">     </span><span class="mi">46</span> <span class="k">def</span> <span class="nf">from_data_service</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">data_service</span><span class="p">:</span> <span class="n">DataService</span><span class="p">):</span>
<span class="g g-Whitespace">     </span><span class="mi">47</span><span class="w">     </span><span class="sd">&quot;&quot;&quot;Get Dataset from Data service, get metadata as well.</span>
<span class="g g-Whitespace">     </span><span class="mi">48</span><span class="sd"> </span>
<span class="g g-Whitespace">     </span><span class="mi">49</span><span class="sd">     Args:</span>
<span class="sd">   (...)</span>
<span class="g g-Whitespace">     </span><span class="mi">55</span><span class="sd"> </span>
<span class="g g-Whitespace">     </span><span class="mi">56</span><span class="sd">     &quot;&quot;&quot;</span>
<span class="ne">---&gt; </span><span class="mi">57</span>     <span class="n">metadata</span> <span class="o">=</span> <span class="n">data_service</span><span class="o">.</span><span class="n">get_dataset_metadata</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">58</span>     <span class="n">instance</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">metadata</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">59</span>     <span class="n">instance</span><span class="o">.</span><span class="n">cache_files</span><span class="p">(</span><span class="n">data_service</span><span class="p">)</span>

<span class="nn">File ~\Anaconda3\envs\IN-CORE_GAlveston\lib\site-packages\pyincore\dataservice.py:47,</span> in <span class="ni">DataService.get_dataset_metadata</span><span class="nt">(self, dataset_id)</span>
<span class="g g-Whitespace">     </span><span class="mi">45</span> <span class="c1"># construct url with service, dataset api, and id</span>
<span class="g g-Whitespace">     </span><span class="mi">46</span> <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_url</span><span class="p">,</span> <span class="n">dataset_id</span><span class="p">)</span>
<span class="ne">---&gt; </span><span class="mi">47</span> <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">48</span> <span class="k">return</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="nn">File ~\Anaconda3\envs\IN-CORE_GAlveston\lib\site-packages\pyincore\client.py:314,</span> in <span class="ni">IncoreClient.get</span><span class="nt">(self, url, params, timeout, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">311</span>     <span class="bp">self</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">312</span>     <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">314</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">return_http_response</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>

<span class="nn">File ~\Anaconda3\envs\IN-CORE_GAlveston\lib\site-packages\pyincore\client.py:166,</span> in <span class="ni">Client.return_http_response</span><span class="nt">(http_response)</span>
<span class="g g-Whitespace">    </span><span class="mi">163</span> <span class="nd">@staticmethod</span>
<span class="g g-Whitespace">    </span><span class="mi">164</span> <span class="k">def</span> <span class="nf">return_http_response</span><span class="p">(</span><span class="n">http_response</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">165</span>     <span class="k">try</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">166</span>         <span class="n">http_response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">167</span>         <span class="k">return</span> <span class="n">http_response</span>
<span class="g g-Whitespace">    </span><span class="mi">168</span>     <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">HTTPError</span><span class="p">:</span>

<span class="nn">File ~\Anaconda3\envs\IN-CORE_GAlveston\lib\site-packages\requests\models.py:1021,</span> in <span class="ni">Response.raise_for_status</span><span class="nt">(self)</span>
<span class="g g-Whitespace">   </span><span class="mi">1016</span>     <span class="n">http_error_msg</span> <span class="o">=</span> <span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">1017</span>         <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2"> Server Error: </span><span class="si">{</span><span class="n">reason</span><span class="si">}</span><span class="s2"> for url: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">1018</span>     <span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1020</span> <span class="k">if</span> <span class="n">http_error_msg</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">1021</span>     <span class="k">raise</span> <span class="n">HTTPError</span><span class="p">(</span><span class="n">http_error_msg</span><span class="p">,</span> <span class="n">response</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

<span class="ne">HTTPError</span>: 403 Client Error: Forbidden for url: https://incore.ncsa.illinois.edu/data/api/datasets/626322a7e74a5c2dfb3a72b0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">housing_unit_inv_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="s2">&quot;infer&quot;</span><span class="p">)</span>
<span class="n">housing_unit_inv_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">16</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">housing_unit_inv_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="s2">&quot;infer&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">housing_unit_inv_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>

<span class="ne">NameError</span>: name &#39;filename&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">housing_unit_inv_df</span><span class="p">[</span><span class="s1">&#39;huid&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count                   132553
unique                  132553
top       B481677201001000H001
freq                         1
Name: huid, dtype: object
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">poptable</span><span class="o">.</span><span class="n">pop_results_table</span><span class="p">(</span><span class="n">housing_unit_inv_df</span><span class="p">,</span> 
                  <span class="n">who</span> <span class="o">=</span> <span class="s2">&quot;Total Population by Householder&quot;</span><span class="p">,</span> 
                  <span class="n">what</span> <span class="o">=</span> <span class="s2">&quot;by Race, Ethnicity&quot;</span><span class="p">,</span>
                  <span class="n">where</span> <span class="o">=</span> <span class="s2">&quot;Galveston County TX&quot;</span><span class="p">,</span>
                  <span class="n">when</span> <span class="o">=</span> <span class="s2">&quot;2010&quot;</span><span class="p">,</span>
                  <span class="n">row_index</span> <span class="o">=</span> <span class="s2">&quot;Race Ethnicity&quot;</span><span class="p">,</span>
                  <span class="n">col_index</span> <span class="o">=</span> <span class="s1">&#39;Tenure Status&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
#T_70c4d caption {
  text-align: center;
  caption-side: top;
  font-size: 150%;
}
</style>
<table id="T_70c4d">
  <caption>Table. Total Population by Householder by Race, Ethnicity, Galveston County TX, 2010.</caption>
  <thead>
    <tr>
      <th class="index_name level0" >Tenure Status</th>
      <th id="T_70c4d_level0_col0" class="col_heading level0 col0" >1 Owner Occupied (%)</th>
      <th id="T_70c4d_level0_col1" class="col_heading level0 col1" >2 Renter Occupied (%)</th>
      <th id="T_70c4d_level0_col2" class="col_heading level0 col2" >Total Population by Householder (%)</th>
    </tr>
    <tr>
      <th class="index_name level0" >Race Ethnicity</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_70c4d_level0_row0" class="row_heading level0 row0" >1 White alone, Not Hispanic</th>
      <td id="T_70c4d_row0_col0" class="data row0 col0" >53,469	 (71.3%)</td>
      <td id="T_70c4d_row0_col1" class="data row0 col1" >17,903	 (52.6%)</td>
      <td id="T_70c4d_row0_col2" class="data row0 col2" >71,372	 (65.5%)</td>
    </tr>
    <tr>
      <th id="T_70c4d_level0_row1" class="row_heading level0 row1" >2 Black alone, Not Hispanic</th>
      <td id="T_70c4d_row1_col0" class="data row1 col0" >7,209	 (9.6%)</td>
      <td id="T_70c4d_row1_col1" class="data row1 col1" >7,275	 (21.4%)</td>
      <td id="T_70c4d_row1_col2" class="data row1 col2" >14,484	 (13.3%)</td>
    </tr>
    <tr>
      <th id="T_70c4d_level0_row2" class="row_heading level0 row2" >3 American Indian and Alaska Native alone, Not Hispanic</th>
      <td id="T_70c4d_row2_col0" class="data row2 col0" >288	 (0.4%)</td>
      <td id="T_70c4d_row2_col1" class="data row2 col1" >152	 (0.4%)</td>
      <td id="T_70c4d_row2_col2" class="data row2 col2" >440	 (0.4%)</td>
    </tr>
    <tr>
      <th id="T_70c4d_level0_row3" class="row_heading level0 row3" >4 Asian alone, Not Hispanic</th>
      <td id="T_70c4d_row3_col0" class="data row3 col0" >1,903	 (2.5%)</td>
      <td id="T_70c4d_row3_col1" class="data row3 col1" >776	 (2.3%)</td>
      <td id="T_70c4d_row3_col2" class="data row3 col2" >2,679	 (2.5%)</td>
    </tr>
    <tr>
      <th id="T_70c4d_level0_row4" class="row_heading level0 row4" >5 Other Race, Not Hispanic</th>
      <td id="T_70c4d_row4_col0" class="data row4 col0" >708	 (0.9%)</td>
      <td id="T_70c4d_row4_col1" class="data row4 col1" >381	 (1.1%)</td>
      <td id="T_70c4d_row4_col2" class="data row4 col2" >1,089	 (1.0%)</td>
    </tr>
    <tr>
      <th id="T_70c4d_level0_row5" class="row_heading level0 row5" >6 Any Race, Hispanic</th>
      <td id="T_70c4d_row5_col0" class="data row5 col0" >11,367	 (15.2%)</td>
      <td id="T_70c4d_row5_col1" class="data row5 col1" >7,538	 (22.2%)</td>
      <td id="T_70c4d_row5_col2" class="data row5 col2" >18,905	 (17.3%)</td>
    </tr>
    <tr>
      <th id="T_70c4d_level0_row6" class="row_heading level0 row6" >Total</th>
      <td id="T_70c4d_row6_col0" class="data row6 col0" >74,944	 (100.0%)</td>
      <td id="T_70c4d_row6_col1" class="data row6 col1" >34,025	 (100.0%)</td>
      <td id="T_70c4d_row6_col2" class="data row6 col2" >108,969	 (100.0%)</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="a-1b-interdependent-community-description">
<h2>1a + 1b) Interdependent Community Description<a class="headerlink" href="#a-1b-interdependent-community-description" title="Permalink to this heading">#</a></h2>
<p>Explore building inventory and social systems. Specifically look at how the building inventory connects with the housing unit inventory using the housing unit allocation.
The housing unit allocation method will provide detail demographic characteristics for the community allocated to each structure.</p>
<p>To run the HUA Algorithm, three input datasets are required:</p>
<ol class="arabic simple">
<li><p>Housing Unit Inventory - Based on 2010 US Census Block Level Data</p></li>
<li><p>Address Point Inventory - A list of all possible residential/business address points in a community. Address points are the link between buildings and housing units.</p></li>
<li><p>Building Inventory - A list of all buildings within a community.</p></li>
</ol>
<section id="set-up-and-run-housing-unit-allocation">
<h3>Set Up and Run Housing Unit Allocation<a class="headerlink" href="#set-up-and-run-housing-unit-allocation" title="Permalink to this heading">#</a></h3>
<p>The building and housing unit inventories have already by loaded. The address point inventory is needed to link the population with the structures.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create housing allocation </span>
<span class="n">hua</span> <span class="o">=</span> <span class="n">HousingUnitAllocation</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>

<span class="n">address_point_inv_id</span> <span class="o">=</span> <span class="s2">&quot;6320da3661fe1122867c2fa2&quot;</span>

<span class="c1"># Load input dataset</span>
<span class="n">hua</span><span class="o">.</span><span class="n">load_remote_input_dataset</span><span class="p">(</span><span class="s2">&quot;housing_unit_inventory&quot;</span><span class="p">,</span> <span class="n">housing_unit_inv_id</span><span class="p">)</span>
<span class="n">hua</span><span class="o">.</span><span class="n">load_remote_input_dataset</span><span class="p">(</span><span class="s2">&quot;address_point_inventory&quot;</span><span class="p">,</span> <span class="n">address_point_inv_id</span><span class="p">)</span>
<span class="n">hua</span><span class="o">.</span><span class="n">load_remote_input_dataset</span><span class="p">(</span><span class="s2">&quot;buildings&quot;</span><span class="p">,</span> <span class="n">bldg_dataset_id</span><span class="p">)</span>

<span class="c1"># Specify the result name</span>
<span class="n">result_name</span> <span class="o">=</span> <span class="s2">&quot;Galveston_HUA&quot;</span>

<span class="n">seed</span> <span class="o">=</span> <span class="mi">1238</span>
<span class="n">iterations</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1"># Set analysis parameters</span>
<span class="n">hua</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;result_name&quot;</span><span class="p">,</span> <span class="n">result_name</span><span class="p">)</span>
<span class="n">hua</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;seed&quot;</span><span class="p">,</span> <span class="n">seed</span><span class="p">)</span>
<span class="n">hua</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;iterations&quot;</span><span class="p">,</span> <span class="n">iterations</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">HTTPError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">19</span><span class="p">],</span> <span class="n">line</span> <span class="mi">7</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="n">address_point_inv_id</span> <span class="o">=</span> <span class="s2">&quot;6320da3661fe1122867c2fa2&quot;</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span> <span class="c1"># Load input dataset</span>
<span class="ne">----&gt; </span><span class="mi">7</span> <span class="n">hua</span><span class="o">.</span><span class="n">load_remote_input_dataset</span><span class="p">(</span><span class="s2">&quot;housing_unit_inventory&quot;</span><span class="p">,</span> <span class="n">housing_unit_inv_id</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span> <span class="n">hua</span><span class="o">.</span><span class="n">load_remote_input_dataset</span><span class="p">(</span><span class="s2">&quot;address_point_inventory&quot;</span><span class="p">,</span> <span class="n">address_point_inv_id</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">9</span> <span class="n">hua</span><span class="o">.</span><span class="n">load_remote_input_dataset</span><span class="p">(</span><span class="s2">&quot;buildings&quot;</span><span class="p">,</span> <span class="n">bldg_dataset_id</span><span class="p">)</span>

<span class="nn">File ~\Anaconda3\envs\IN-CORE_GAlveston\lib\site-packages\pyincore\baseanalysis.py:72,</span> in <span class="ni">BaseAnalysis.load_remote_input_dataset</span><span class="nt">(self, analysis_param_id, remote_id)</span>
<span class="g g-Whitespace">     </span><span class="mi">64</span> <span class="k">def</span> <span class="nf">load_remote_input_dataset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">analysis_param_id</span><span class="p">,</span> <span class="n">remote_id</span><span class="p">):</span>
<span class="g g-Whitespace">     </span><span class="mi">65</span><span class="w">     </span><span class="sd">&quot;&quot;&quot;Convenience function for loading a remote dataset by id.</span>
<span class="g g-Whitespace">     </span><span class="mi">66</span><span class="sd"> </span>
<span class="g g-Whitespace">     </span><span class="mi">67</span><span class="sd">     Args:</span>
<span class="sd">   (...)</span>
<span class="g g-Whitespace">     </span><span class="mi">70</span><span class="sd"> </span>
<span class="g g-Whitespace">     </span><span class="mi">71</span><span class="sd">     &quot;&quot;&quot;</span>
<span class="ne">---&gt; </span><span class="mi">72</span>     <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">from_data_service</span><span class="p">(</span><span class="n">remote_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_service</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">74</span>     <span class="c1"># TODO: Need to handle failing to set input dataset.</span>
<span class="g g-Whitespace">     </span><span class="mi">75</span>     <span class="bp">self</span><span class="o">.</span><span class="n">set_input_dataset</span><span class="p">(</span><span class="n">analysis_param_id</span><span class="p">,</span> <span class="n">dataset</span><span class="p">)</span>

<span class="nn">File ~\Anaconda3\envs\IN-CORE_GAlveston\lib\site-packages\pyincore\dataset.py:57,</span> in <span class="ni">Dataset.from_data_service</span><span class="nt">(cls, id, data_service)</span>
<span class="g g-Whitespace">     </span><span class="mi">45</span> <span class="nd">@classmethod</span>
<span class="g g-Whitespace">     </span><span class="mi">46</span> <span class="k">def</span> <span class="nf">from_data_service</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">data_service</span><span class="p">:</span> <span class="n">DataService</span><span class="p">):</span>
<span class="g g-Whitespace">     </span><span class="mi">47</span><span class="w">     </span><span class="sd">&quot;&quot;&quot;Get Dataset from Data service, get metadata as well.</span>
<span class="g g-Whitespace">     </span><span class="mi">48</span><span class="sd"> </span>
<span class="g g-Whitespace">     </span><span class="mi">49</span><span class="sd">     Args:</span>
<span class="sd">   (...)</span>
<span class="g g-Whitespace">     </span><span class="mi">55</span><span class="sd"> </span>
<span class="g g-Whitespace">     </span><span class="mi">56</span><span class="sd">     &quot;&quot;&quot;</span>
<span class="ne">---&gt; </span><span class="mi">57</span>     <span class="n">metadata</span> <span class="o">=</span> <span class="n">data_service</span><span class="o">.</span><span class="n">get_dataset_metadata</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">58</span>     <span class="n">instance</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">metadata</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">59</span>     <span class="n">instance</span><span class="o">.</span><span class="n">cache_files</span><span class="p">(</span><span class="n">data_service</span><span class="p">)</span>

<span class="nn">File ~\Anaconda3\envs\IN-CORE_GAlveston\lib\site-packages\pyincore\dataservice.py:47,</span> in <span class="ni">DataService.get_dataset_metadata</span><span class="nt">(self, dataset_id)</span>
<span class="g g-Whitespace">     </span><span class="mi">45</span> <span class="c1"># construct url with service, dataset api, and id</span>
<span class="g g-Whitespace">     </span><span class="mi">46</span> <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_url</span><span class="p">,</span> <span class="n">dataset_id</span><span class="p">)</span>
<span class="ne">---&gt; </span><span class="mi">47</span> <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">48</span> <span class="k">return</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="nn">File ~\Anaconda3\envs\IN-CORE_GAlveston\lib\site-packages\pyincore\client.py:314,</span> in <span class="ni">IncoreClient.get</span><span class="nt">(self, url, params, timeout, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">311</span>     <span class="bp">self</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">312</span>     <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">314</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">return_http_response</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>

<span class="nn">File ~\Anaconda3\envs\IN-CORE_GAlveston\lib\site-packages\pyincore\client.py:166,</span> in <span class="ni">Client.return_http_response</span><span class="nt">(http_response)</span>
<span class="g g-Whitespace">    </span><span class="mi">163</span> <span class="nd">@staticmethod</span>
<span class="g g-Whitespace">    </span><span class="mi">164</span> <span class="k">def</span> <span class="nf">return_http_response</span><span class="p">(</span><span class="n">http_response</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">165</span>     <span class="k">try</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">166</span>         <span class="n">http_response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">167</span>         <span class="k">return</span> <span class="n">http_response</span>
<span class="g g-Whitespace">    </span><span class="mi">168</span>     <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">HTTPError</span><span class="p">:</span>

<span class="nn">File ~\Anaconda3\envs\IN-CORE_GAlveston\lib\site-packages\requests\models.py:1021,</span> in <span class="ni">Response.raise_for_status</span><span class="nt">(self)</span>
<span class="g g-Whitespace">   </span><span class="mi">1016</span>     <span class="n">http_error_msg</span> <span class="o">=</span> <span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">1017</span>         <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2"> Server Error: </span><span class="si">{</span><span class="n">reason</span><span class="si">}</span><span class="s2"> for url: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">1018</span>     <span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1020</span> <span class="k">if</span> <span class="n">http_error_msg</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">1021</span>     <span class="k">raise</span> <span class="n">HTTPError</span><span class="p">(</span><span class="n">http_error_msg</span><span class="p">,</span> <span class="n">response</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

<span class="ne">HTTPError</span>: 403 Client Error: Forbidden for url: https://incore.ncsa.illinois.edu/data/api/datasets/626322a7e74a5c2dfb3a72b0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run Housing unit allocation analysis - temporarily disabled - read from dataset instead</span>
<span class="c1"># hua.run_analysis()</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="explore-results-from-housing-unit-allocation">
<h3>Explore results from Housing Unit Allocation<a class="headerlink" href="#explore-results-from-housing-unit-allocation" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Retrieve result dataset</span>
<span class="c1"># hua_result = hua.get_output_dataset(&quot;result&quot;)</span>
<span class="c1"># NOTE to USER - pyincore 1.7.0 has internal error and this notebook includes a workaround for the HUA analysis</span>
<span class="n">hua_result_id</span> <span class="o">=</span> <span class="s2">&quot;6328a9b873b4ed0eefbacad6&quot;</span>

<span class="n">hua_result</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">from_data_service</span><span class="p">(</span><span class="n">hua_result_id</span><span class="p">,</span> <span class="n">data_service</span><span class="p">)</span>

<span class="c1"># Convert dataset to Pandas DataFrame</span>
<span class="n">hua_df</span> <span class="o">=</span> <span class="n">hua_result</span><span class="o">.</span><span class="n">get_dataframe_from_csv</span><span class="p">(</span><span class="n">low_memory</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Display top 5 rows of output data</span>
<span class="n">hua_df</span><span class="p">[[</span><span class="s1">&#39;guid&#39;</span><span class="p">,</span><span class="s1">&#39;numprec&#39;</span><span class="p">,</span><span class="s1">&#39;incomegroup&#39;</span><span class="p">,</span><span class="s1">&#39;geometry&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>guid</th>
      <th>numprec</th>
      <th>incomegroup</th>
      <th>geometry</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>df7e5aef-c49f-45dd-b145-6fd7db8f50ff</td>
      <td>4</td>
      <td>12.0</td>
      <td>POINT (-95.20724412652406 29.5505086543953)</td>
    </tr>
    <tr>
      <th>1</th>
      <td>07b29b24-3184-4d0b-bbc6-1538aee5b1f1</td>
      <td>2</td>
      <td>16.0</td>
      <td>POINT (-95.20238468249019 29.556015347498217)</td>
    </tr>
    <tr>
      <th>2</th>
      <td>6d9c5304-59ff-4fb4-a8cf-d746b98f95fb</td>
      <td>4</td>
      <td>12.0</td>
      <td>POINT (-95.21193794087237 29.551349003696608)</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2f76cc1d-ee76-445c-b086-2cd331ed7b1b</td>
      <td>2</td>
      <td>15.0</td>
      <td>POINT (-95.2141746290468 29.548109912670395)</td>
    </tr>
    <tr>
      <th>4</th>
      <td>cdcedef2-2948-459f-b453-3fcc19076d91</td>
      <td>5</td>
      <td>14.0</td>
      <td>POINT (-95.21377321360455 29.550186039682806)</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">hua_df</span><span class="p">[[</span><span class="s1">&#39;guid&#39;</span><span class="p">,</span><span class="s1">&#39;huid&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>guid</th>
      <th>huid</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>131987</td>
      <td>132553</td>
    </tr>
    <tr>
      <th>unique</th>
      <td>104607</td>
      <td>132553</td>
    </tr>
    <tr>
      <th>top</th>
      <td>6396008f-530a-481c-9757-93f7d58391f9</td>
      <td>B481677201001000H222</td>
    </tr>
    <tr>
      <th>freq</th>
      <td>293</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Limit HUA Results to only observations with GUID and HUID</span>
<span class="n">hua_df_buildings</span> <span class="o">=</span> <span class="n">hua_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">hua_df</span><span class="p">[</span><span class="s1">&#39;guid&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">notnull</span><span class="p">())</span> <span class="o">&amp;</span> 
            <span class="p">(</span><span class="n">hua_df</span><span class="p">[</span><span class="s1">&#39;huid&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">notnull</span><span class="p">())]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">hua_df_buildings</span><span class="p">[[</span><span class="s1">&#39;guid&#39;</span><span class="p">,</span><span class="s1">&#39;huid&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>guid</th>
      <th>huid</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>131987</td>
      <td>131987</td>
    </tr>
    <tr>
      <th>unique</th>
      <td>104607</td>
      <td>131987</td>
    </tr>
    <tr>
      <th>top</th>
      <td>6396008f-530a-481c-9757-93f7d58391f9</td>
      <td>B481677201001000H222</td>
    </tr>
    <tr>
      <th>freq</th>
      <td>293</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Update HUA results with housing unit inventory linked to buildings</span>
<span class="n">hua_result</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">from_dataframe</span><span class="p">(</span><span class="n">dataframe</span> <span class="o">=</span> <span class="n">hua_df_buildings</span><span class="p">,</span>
                                    <span class="n">name</span> <span class="o">=</span> <span class="n">result_name</span><span class="o">+</span><span class="s2">&quot;_&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;buildings.csv&quot;</span><span class="p">,</span>
                                    <span class="n">data_type</span><span class="o">=</span><span class="s1">&#39;incore:housingUnitAllocation&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">poptable</span><span class="o">.</span><span class="n">pop_results_table</span><span class="p">(</span><span class="n">hua_df_buildings</span><span class="p">,</span> 
                  <span class="n">who</span> <span class="o">=</span> <span class="s2">&quot;Total Population by Householder&quot;</span><span class="p">,</span> 
                  <span class="n">what</span> <span class="o">=</span> <span class="s2">&quot;by Race, Ethnicity&quot;</span><span class="p">,</span>
                  <span class="n">where</span> <span class="o">=</span> <span class="s2">&quot;Galveston County, TX - Buildings in Inventory&quot;</span><span class="p">,</span>
                  <span class="n">when</span> <span class="o">=</span> <span class="s2">&quot;2010&quot;</span><span class="p">,</span>
                  <span class="n">row_index</span> <span class="o">=</span> <span class="s2">&quot;Race Ethnicity&quot;</span><span class="p">,</span>
                  <span class="n">col_index</span> <span class="o">=</span> <span class="s1">&#39;Tenure Status&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
#T_de507 caption {
  text-align: center;
  caption-side: top;
  font-size: 150%;
}
</style>
<table id="T_de507">
  <caption>Table. Total Population by Householder by Race, Ethnicity, Galveston County, TX - Buildings in Inventory, 2010.</caption>
  <thead>
    <tr>
      <th class="index_name level0" >Tenure Status</th>
      <th id="T_de507_level0_col0" class="col_heading level0 col0" >1 Owner Occupied (%)</th>
      <th id="T_de507_level0_col1" class="col_heading level0 col1" >2 Renter Occupied (%)</th>
      <th id="T_de507_level0_col2" class="col_heading level0 col2" >Total Population by Householder (%)</th>
    </tr>
    <tr>
      <th class="index_name level0" >Race Ethnicity</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_de507_level0_row0" class="row_heading level0 row0" >1 White alone, Not Hispanic</th>
      <td id="T_de507_row0_col0" class="data row0 col0" >53,360	 (71.3%)</td>
      <td id="T_de507_row0_col1" class="data row0 col1" >17,774	 (52.5%)</td>
      <td id="T_de507_row0_col2" class="data row0 col2" >71,134	 (65.5%)</td>
    </tr>
    <tr>
      <th id="T_de507_level0_row1" class="row_heading level0 row1" >2 Black alone, Not Hispanic</th>
      <td id="T_de507_row1_col0" class="data row1 col0" >7,190	 (9.6%)</td>
      <td id="T_de507_row1_col1" class="data row1 col1" >7,267	 (21.4%)</td>
      <td id="T_de507_row1_col2" class="data row1 col2" >14,457	 (13.3%)</td>
    </tr>
    <tr>
      <th id="T_de507_level0_row2" class="row_heading level0 row2" >3 American Indian and Alaska Native alone, Not Hispanic</th>
      <td id="T_de507_row2_col0" class="data row2 col0" >287	 (0.4%)</td>
      <td id="T_de507_row2_col1" class="data row2 col1" >152	 (0.4%)</td>
      <td id="T_de507_row2_col2" class="data row2 col2" >439	 (0.4%)</td>
    </tr>
    <tr>
      <th id="T_de507_level0_row3" class="row_heading level0 row3" >4 Asian alone, Not Hispanic</th>
      <td id="T_de507_row3_col0" class="data row3 col0" >1,895	 (2.5%)</td>
      <td id="T_de507_row3_col1" class="data row3 col1" >775	 (2.3%)</td>
      <td id="T_de507_row3_col2" class="data row3 col2" >2,670	 (2.5%)</td>
    </tr>
    <tr>
      <th id="T_de507_level0_row4" class="row_heading level0 row4" >5 Other Race, Not Hispanic</th>
      <td id="T_de507_row4_col0" class="data row4 col0" >707	 (0.9%)</td>
      <td id="T_de507_row4_col1" class="data row4 col1" >380	 (1.1%)</td>
      <td id="T_de507_row4_col2" class="data row4 col2" >1,087	 (1.0%)</td>
    </tr>
    <tr>
      <th id="T_de507_level0_row5" class="row_heading level0 row5" >6 Any Race, Hispanic</th>
      <td id="T_de507_row5_col0" class="data row5 col0" >11,349	 (15.2%)</td>
      <td id="T_de507_row5_col1" class="data row5 col1" >7,531	 (22.2%)</td>
      <td id="T_de507_row5_col2" class="data row5 col2" >18,880	 (17.4%)</td>
    </tr>
    <tr>
      <th id="T_de507_level0_row6" class="row_heading level0 row6" >Total</th>
      <td id="T_de507_row6_col0" class="data row6 col0" >74,788	 (100.0%)</td>
      <td id="T_de507_row6_col1" class="data row6 col1" >33,879	 (100.0%)</td>
      <td id="T_de507_row6_col2" class="data row6 col2" >108,667	 (100.0%)</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">poptable</span><span class="o">.</span><span class="n">pop_results_table</span><span class="p">(</span><span class="n">hua_df_buildings</span><span class="p">,</span> 
                  <span class="n">who</span> <span class="o">=</span> <span class="s2">&quot;Median Household Income&quot;</span><span class="p">,</span> 
                  <span class="n">what</span> <span class="o">=</span> <span class="s2">&quot;by Race, Ethnicity&quot;</span><span class="p">,</span>
                  <span class="n">where</span> <span class="o">=</span> <span class="s2">&quot;Galveston County, TX - Buildings in Inventory&quot;</span><span class="p">,</span>
                  <span class="n">when</span> <span class="o">=</span> <span class="s2">&quot;2010&quot;</span><span class="p">,</span>
                  <span class="n">row_index</span> <span class="o">=</span> <span class="s2">&quot;Race Ethnicity&quot;</span><span class="p">,</span>
                  <span class="n">col_index</span> <span class="o">=</span> <span class="s1">&#39;Tenure Status&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
#T_2117d caption {
  text-align: center;
  caption-side: top;
  font-size: 150%;
}
</style>
<table id="T_2117d">
  <caption>Table. Median Household Income by Race, Ethnicity, Galveston County, TX - Buildings in Inventory, 2010.</caption>
  <thead>
    <tr>
      <th class="index_name level0" >Tenure Status</th>
      <th id="T_2117d_level0_col0" class="col_heading level0 col0" >1 Owner Occupied</th>
      <th id="T_2117d_level0_col1" class="col_heading level0 col1" >2 Renter Occupied</th>
      <th id="T_2117d_level0_col2" class="col_heading level0 col2" >Median Household Income</th>
    </tr>
    <tr>
      <th class="index_name level0" >Race Ethnicity</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_2117d_level0_row0" class="row_heading level0 row0" >1 White alone, Not Hispanic</th>
      <td id="T_2117d_row0_col0" class="data row0 col0" >$78,700</td>
      <td id="T_2117d_row0_col1" class="data row0 col1" >$56,480</td>
      <td id="T_2117d_row0_col2" class="data row0 col2" >$72,582</td>
    </tr>
    <tr>
      <th id="T_2117d_level0_row1" class="row_heading level0 row1" >2 Black alone, Not Hispanic</th>
      <td id="T_2117d_row1_col0" class="data row1 col0" >$42,436</td>
      <td id="T_2117d_row1_col1" class="data row1 col1" >$31,080</td>
      <td id="T_2117d_row1_col2" class="data row1 col2" >$37,191</td>
    </tr>
    <tr>
      <th id="T_2117d_level0_row2" class="row_heading level0 row2" >3 American Indian and Alaska Native alone, Not Hispanic</th>
      <td id="T_2117d_row2_col0" class="data row2 col0" >$55,272</td>
      <td id="T_2117d_row2_col1" class="data row2 col1" >$48,630</td>
      <td id="T_2117d_row2_col2" class="data row2 col2" >$50,996</td>
    </tr>
    <tr>
      <th id="T_2117d_level0_row3" class="row_heading level0 row3" >4 Asian alone, Not Hispanic</th>
      <td id="T_2117d_row3_col0" class="data row3 col0" >$71,131</td>
      <td id="T_2117d_row3_col1" class="data row3 col1" >$43,820</td>
      <td id="T_2117d_row3_col2" class="data row3 col2" >$64,104</td>
    </tr>
    <tr>
      <th id="T_2117d_level0_row4" class="row_heading level0 row4" >5 Other Race, Not Hispanic</th>
      <td id="T_2117d_row4_col0" class="data row4 col0" >$58,956</td>
      <td id="T_2117d_row4_col1" class="data row4 col1" >$51,132</td>
      <td id="T_2117d_row4_col2" class="data row4 col2" >$56,363</td>
    </tr>
    <tr>
      <th id="T_2117d_level0_row5" class="row_heading level0 row5" >6 Any Race, Hispanic</th>
      <td id="T_2117d_row5_col0" class="data row5 col0" >$54,328</td>
      <td id="T_2117d_row5_col1" class="data row5 col1" >$41,150</td>
      <td id="T_2117d_row5_col2" class="data row5 col2" >$49,127</td>
    </tr>
    <tr>
      <th id="T_2117d_level0_row6" class="row_heading level0 row6" >Total</th>
      <td id="T_2117d_row6_col0" class="data row6 col0" >$69,790</td>
      <td id="T_2117d_row6_col1" class="data row6 col1" >$46,372</td>
      <td id="T_2117d_row6_col2" class="data row6 col2" >$61,849</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<section id="validate-the-housing-unit-allocation-has-worked">
<h4>Validate the Housing Unit Allocation has worked<a class="headerlink" href="#validate-the-housing-unit-allocation-has-worked" title="Permalink to this heading">#</a></h4>
<p>Notice that the population count totals for the community should match (pretty closely) data collected for the 2010 Decennial Census.
This can be confirmed by going to <a class="reference external" href="http://data.census.gov">data.census.gov</a></p>
<p><a class="reference external" href="https://data.census.gov/cedsci/table?q=DECENNIALPL2010.P5&amp;g=0500000US48167_1600000US4828068,4837252&amp;tid=DECENNIALSF12010.P5">Total Population by Race and Ethnicity</a></p>
<p>Median Income by Race and Ethnicity:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://data.census.gov/cedsci/table?g=0500000US48167_1600000US4828068,4837252&amp;tid=ACSDT5Y2012.B19013">All Households</a></p></li>
<li><p><a class="reference external" href="https://data.census.gov/cedsci/table?g=0500000US48167_1600000US4828068,4837252&amp;tid=ACSDT5Y2012.B19013B">Black Households</a></p></li>
<li><p><a class="reference external" href="https://data.census.gov/cedsci/table?g=0500000US48167_1600000US4828068,4837252&amp;tid=ACSDT5Y2012.B19013H">White, not Hispanic Households</a></p></li>
<li><p><a class="reference external" href="https://data.census.gov/cedsci/table?g=0500000US48167_1600000US4828068,4837252&amp;tid=ACSDT5Y2012.B19013I">Hispanic Households</a></p></li>
</ul>
<p>Differences in the housing unit allocation and the Census count may be due to differences between political boundaries and the building inventory.</p>
<blockquote>
<div><p>Rosenheim, Nathanael (2021) “Detailed Household and Housing Unit Characteristics: Data and Replication Code.” DesignSafe-CI. <a class="reference external" href="https://doi.org/10.17603/ds2-jwf6-s535">https://doi.org/10.17603/ds2-jwf6-s535</a> v2</p>
</div></blockquote>
<p>The housing unit allocation, plus the building results will become the input for the social science models such as the population dislocation model.</p>
</section>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="hazards-and-damages">
<h1>2) Hazards and Damages<a class="headerlink" href="#hazards-and-damages" title="Permalink to this heading">#</a></h1>
<p><img alt="HazardsandDamages.png" src="notebooks/extra_notebooks/attachment:HazardsandDamages.png" /></p>
<section id="a-hazard-model-hurricane">
<h2>2a) Hazard Model (Hurricane)<a class="headerlink" href="#a-hazard-model-hurricane" title="Permalink to this heading">#</a></h2>
<p>There are currently five hurricane hazard data for Galveston testbed. Four of them were created using the dynamically coupled versions of the Advanced Circulation (ADCIRC) and Simulating Waves Nearshore (SWAN) models. One of them is a surrogate model developed using USACE datasets.</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>No.</p></th>
<th class="head"><p>Simulation type</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>GUID</p></th>
<th class="head"><p>More details</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>Coupled ADCIRC+SWAN</p></td>
<td><p>Hurricane Ike Hindcast</p></td>
<td><p><font color='red'>5fa5a228b6429615aeea4410 </font></p></td>
<td><p>Darestani et al. (2021)</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Coupled ADCIRC+SWAN</p></td>
<td><p>2% AEP Hurricane Simulation</p></td>
<td><p><font color='red'>5fa5a83c7e5cdf51ebf1adae </font></p></td>
<td><p>Darestani et al. (2021)</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>Coupled ADCIRC+SWAN</p></td>
<td><p>1% AEP Hurricane Simulation</p></td>
<td><p><font color='red'>5fa5a9497e5cdf51ebf1add2 </font></p></td>
<td><p>Darestani et al. (2021)</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>Coupled ADCIRC+SWAN</p></td>
<td><p>0.2% AEP Hurricane Simulation</p></td>
<td><p><font color='red'>5fa5aa19b6429615aeea4476 </font></p></td>
<td><p>Darestani et al. (2021)</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>Kriging-based surrogate model</p></td>
<td><p>Galveston Deterministic Hurricane - Kriging</p></td>
<td><p><font color='red'>5f15cd627db08c2ccc4e3bab </font></p></td>
<td><p>Fereshtehnejad et al. (2021)</p></td>
</tr>
</tbody>
</table>
<section id="coupled-adcirc-swan">
<h3>Coupled ADCIRC+SWAN<a class="headerlink" href="#coupled-adcirc-swan" title="Permalink to this heading">#</a></h3>
<p>Galveston Island was struck by Hurricane Ike in September, 2008, with maximum windspeeds of 49 m/s (95 kts) and storm surge elevations reaching at least +3.5 m (NAVD88) on Galveston Island. A full hindcast of Hurricane Ike’s water levels, and wave conditions along with 2% (50-yr return period), 1% (100-yr return period), and 0.2% (500-yr return period) Annual Exceedance Probabilities (AEP) hurricane simulations were created using ADCIRC+SWAN models. These hurricane hazard events contain <strong>eight hazardDatasets</strong>, which is five more than the current pyincore hurricane schema. Please be sure to adjust your codes accordingly if you need to incorporate the five new intensity measures (IMs). The existing schema includes the peak significant wave height, peak surge level, and inundation duration. These new events include those as well as maximum inundation depth, peak wave period, wave direction, maximum current speed, and maximum wind speed.</p>
</section>
<section id="kriging-based-surrogate-model">
<h3>Kriging-based surrogate model<a class="headerlink" href="#kriging-based-surrogate-model" title="Permalink to this heading">#</a></h3>
<p><strong>Three hazardDatasets</strong> of kriging-based surrogate models are developed for peak significant wave height, peak surge level, and inundation duration. Training datasets for developing the Kriging surorgate models were collected through USACE. For the peak significant wave height, peak surge level, and inundation duration the training datasets included 61, 251, and 254 synthetic storms, respectively.</p>
</section>
<section id="building-damage">
<h3>Building damage<a class="headerlink" href="#building-damage" title="Permalink to this heading">#</a></h3>
</section>
<section id="building-fragility">
<h3>2.1 Building Fragility<a class="headerlink" href="#building-fragility" title="Permalink to this heading">#</a></h3>
<p>The impact of the surge-wave action on buildings was assumed to be independent of the wind impacts. The surge-wave action was modeled using the surge-wave fragility surfaces developed by Do. et al. (2020), while the wind action was modeled using the wind fragility functions developed by Memari et al. (2018) assuming that the maximum hurricane wind speed does not occur with the maximum surge and wave height. None of the surge-wave and wind fragility used herein accounts for content damage. Therefore, the flood fragility functions developed by Nofal and van de Lindt (2020b) were used to account for content damage, i.e. due to surge. The vulnerability of structural components (e.g., roof, walls, foundation, slabs, etc.) was derived from the surge-wave fragility surface developed and the wind fragility curves developed after extracting the intensities of surge, wave, and wind speed from the hazard maps. The vulnerability of the interior contents and other non-structural components were calculated from flood fragility functions (e.g., depth fragility function, depth-duration fragility function) based on the extracted surge height.</p>
</section>
<section id="id1">
<h3>Building Damage:<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h3>
<p>The developed multi-hazard hurricane damage approach uses five input variables - significant wave height, the surge depth, building elevation from the ground, maximum wind speed, and flood duration, respectively. All these variables were used as inputs for three stages of fragility analysis to account for structure and content damage and losses for each building within the community. First, the significant wave height, the surge water depth, and elevation from the ground were used to account for the structural system exceedance probability of each DS using the multi-variate 3-D surge-wave fragility function developed by Do et al. (2020). Second, the maximum wind speed for each building was used to account for another list of exceedance probabilities for each DS using the fragility portfolio developed by Memari et al. (2018). Then, flood depth, and the building elevation from the ground for each building were used in a static flood fragility functions developed by Nofal and van de Lindt (2020) to account for content damage. For damage analysis, a single DS was assigned to each building based on the maximum DS calculated from surge-wave, wind, and flood Eq. (1).</p>
<img src="data:image/jpeg;base64,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YSB+Dv5yNv611dAEFje2+o2EF7ZSrNb3EayxSL0ZSMg/lU9cp4CH2G31jQwTs0nU5YoQf4YpMTIPoBJj8K6ugAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK5H4eHdZa8x6tr17k+v7zH9K66uO+G6BNP10L31++PX/prQB2NZ2v3l5p+g3l5psdtJPbxNKEupDHGQoycsAccDritGue8aMZ9Gh0pCd+q3Udnx/cJ3Sf+Q1egCp8NPGp+IHge2157RbOSWSSN4Ek3hCrEdcDtg9O9QfEX4hQeBrGxigtl1DWNTuFt7Gx8zZ5jEgFicHCjPXHUiuW+FOqW3hfQ/GlpeZEWleIblI4kGWfeV2Io7licAepqhcaXca98fPDttqoV72xtn1m/CnKwfwQQKfROue5LHvQB7FYG9Nkh1RYEuf41t2LIPoSAT+VWawvFniiHwvpcUvkNd3t5OtrY2aHDXEzfdXPYdyewBNcp471rxX4T8N2N5a6pb3GsalexWMdobdfs6vKcZT+MlcZyzEHHQUAekUVyXxBfxNYeC7vUfC2pRw3un27TtHJarKLnYMsv+zkA9BVbw9qniXxbcaJ4isLu0svDlxb75bGSAtPPuThw/8AD83Qegyc5wACx8T/APkST/1/2X/pVFXXVxXxa/5EE/8AYRsf/SqKu1oAK4GDxn4jvPibqXhK003TCthapdPeNcSYCuflQrt4bv1xxXfEgAknAHU1498LrzVNRvfFvi+w0kX39tao6W0jXKxjyYfkQHIyB15GfpQB23hnxqdY8T6x4a1OzFlrGkbHkWOTzIponGVkQkA9xkEce9a/iXXbfwz4Y1HWr3/U2Nu0zD+9gcD8TgfjWB4L8EXOia9rXiXXrqO61zWnHm+QCIreJfuRJnk4GMk4zjpXN/tI3klt8GruOJiv2q6ghbHcbt2P/HaAOn+GFpcDwRa6vqh36rrY/tC8lPUtJyq/7qptUDsBW34n1O40Xwzf6naLbu9nA85W4cqhVVJIyASO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sDP9z3oA7KsK/wDGOj6Zr1vpF7LcRz3MixRy/ZZDD5jfdQy7dgY9gTmqVhNqjahAJpPEZjLjcLi3sxHj/aKrux9OaoeMbw32oWK6DrFvcX+m6jB5+jEJIJcsMlhjepVW3hs4G0HFAHc0UUUAFFUNa1vT/Duky6nrE/2e0hKh5AjPgswUDaoJOSQOBWFbfE3wtd3UVvBd3plmcRoG0q6UEk4HJjwPqeKAOsooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKwdc8a6H4cvUtNWnuY5nQSKIrGeYbckdY0Ydumc0Ab1FYWgeM9C8T3Nxb6LdySzWyK8sctrLCyqxIU4kVcg7T09K3aACiiigAooooAKKKKAOV8O/wDI/eMP+u1p/wCk611Vcr4d/wCR+8Yf9drT/wBJ1rqqACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKoa5o9vr+h3el3u4RXMZQspwyHqGHoQQCPcVfooAw/DmqXUsJ0zXAI9XtF2y8YW5UcCZPVW7j+E5B7Z2mjRyC6KxHTIzikeGKR0eSNWaM5RiMlT7elPoAjWCFG3JEit6hQKkoooAKakaR58tFXPXaMZp1FABXP61rmvafqHkaV4SutWg2BvtEV7bxDPddruDx9K6CigDjv8AhKvFv/RO7/8A8Gdn/wDHK623kkltopJoTBIyBniZgShI5XI4OOnFSUUAR+RD/wA8k65+6KkoooA8r8cWttN4x17ztPurlZPDEkYK2ssiNPvJQKQCu/GCMc1Z8FyFfHluyW13Elz4btvtLyWsqLJcq53b2ZQDIFPfnFel0UAeR3ENw/jqx1CLTb22kh8SSJOxtpZJWhMTqHabGPJY7dqDKjjJz0lis9M0jxZFqMWjzy+Hr7UWZLUWEha0vVXb9p2bMiNsY9AcMOvHq9FABRRRQAUUUhAZSCMgjBFAHLa4p8W3y6DbZbTIZVfVLgfdfaQwt1PckgbsdF46tXVdOlMiijgiWOFFjRRhVUYA/Cn0AFFFFABRRRQAVx3w3dZNP10qc41++H/kWuxrj/hyoXT9d2gD/if33T/rrQB2FVNU1Wy0XTpb/U5xb2sIzJKVJCD1OAePerdYnjC7ktfCl4Lf/j4uVFrB/wBdJWEa/kWz+FAF3Rtb03xDpcepaJeRXtnKSEmiOVbBwf1FGr6xpnh7S5dR1m8hsbOMjzJpW2qCTgfiTXnXwCUaf4F1TRncn+x9ZurQlj2DA5/WsDx1PceP/iZ4M0hXcaPLevdx2/QTww8mdvVWIKp7An+LgA9psNQttTsku7JzJBJyrFGXP4EA1PsUOXCruIwWxzUd5eW2n2U15fTx29tAheWWRgqoo6kk1y2rfEfTdD0Uazqmn6lBpUhAhujCP3zH7oEed43dtyj8KAOvornfFnjO28H6GNW1HTdRntFUNM9rCr+QpIGX+YYAz2zTf+E501/FFholpb31296hcXcFuWt4vk3hXk6BipBxz1GcZFAFX4nf8iSf+whY/wDpVFXXVxnxWkMXgQsuM/2hYjn/AK+oq7OgArnH8feGU1iXSTqinUYgS9osMjSKB32hc49+ldHXkfg3WtLvfi1458T6lqNnbRWrx6TbGaZU+SIZkPJ6FsUAen6XrOna3btPpN7Ddxo5RzG2SjDqrDqp9jzVqaaO3t5J53EcUal3djwoAySa8x+HNpe6n8TvF/i+G2ktNE1LyoLMSIU+1mMYM4U84OOD3zVv49a1Lonwb1h7clZboJaKwOMB2Ab/AMd3UAavgm7m8XJ/wl92ZFtrhnXSrUkhYrcEr5jDu74zk9FIA756bU9Us9G0+S+1KbyLaIZkk2lgo9TgHA96p+ErJNN8F6NZRLtSCxhQAeyCsL4va4fD/wAKdcuYjieaD7LAB1LynYMf99E/hQBo23j/AMMXdkt7b6tG1m3S6MbrD1x/rCNvXjrXQQTxXMCT20qTRSKGSSNgysD0II6isbwdoMfh7wLpOiFFK2tmkUikZDNt+b8yTXA/CS8fT/H/AI68I22f7K0y9WezjzkQCTJaNfRcjgduaAPS9X1vT9Dt45dTuBEJpBFCgUs8rnoqKMlj7AVVXxXpH2m3tbi4a0u7pwkFrdRNFLKT/dRhkj1I6d64X4xQ6zo+qeG/HOkWzahbeHZpWvbJfvGKRQrOPcDPPbOema67SbrQfH1pofijS5luYbV3lt22/MjshRlb+6RnkewoA6WiiigAooooAw9W8aeH9C1OHTtW1Fba7uDiGFo3LSn0XA+Y8jgZqK48deHLR4EvNQNsbiVYYvPt5Yw7k4CgsoyT6VwnivVrG+/aH8PWOoXUcFp4fsJb+RpGwvnSfIg+uMGu60fVdK8eabJd2yC5063vgLaU5AleFgd4HoHBA9dtAHRVxXgnX9S1fxf40stQufNt9M1FILRNir5aGMMRkDJ59c12tec/Df8A5H74i/8AYXj/APRIoA76+vrfTrKS7vHKQRDLsELYHrgAms3w/wCMNB8VLI3h3Uo9QSLh3hViqn03Yxnkcdar+P8AXl8M/D3W9XJw1taOY893I2oP++iKz/hL4f8A+Ea+Fmh2Dpsna2FxP6mST5zn3GcfhQBsweL9BuPEj+H4tSiOrICxs2BWTA6nBHI962a8S164lH7RfhnXg5+yyXVxoqDt8kOSf+/kjD/gNeg+PPEj6No1zBYS+VeG1kuJJ+otIEBLSn3/AIVHdiOwNAGtZ+KdF1HWrnSbDUI7m+tWKXEUQLeU2M4YgYB9ia1q83+A2hvpHwosbi4DG61WR7+Z3OWbzD8pJ7naF/Oty5+IWnQJq08NjfXdlpE5tru6t41ZVlGMoF3BjjcASBgevFAHSahYw6lYS2lzvEcowTG5RlPUEMOQQeQa5rwZ4hubq/1bw1rcvmavokqq8uAv2qBxmKbHqRw2ONwPrXWKcqCQRkdD2ryPxHenQf2oPDUsXCa3pclnOB/EVLMp/AhaAPXaKKKACgnAooJx1oA5qL4heF7i+nsrfVBLd23+vgjgkZ4v95QuR+NbWmarYazYreaTeQ3luxIEkLhhkdRx0I9K8q+GHiDRn1Dxp4y1XUrO2/tPVGjiMsyhvIgGxMDOTnnp1rT+EOm6j/aPizxFc2kun6frupG4sbSZNjFBn96VPKlsg8+n0oA9C1TU7XRtJutS1CURWtpC00rn+FVGTWB4IF3rGnx+KdYDpdanGJLe1LHbZ27cogHTcRhmbqScdAK5H9orU5LX4bwaZCzK2r6hDaMQcfJncR+O0CvU7aBLW0it4hhIkVFHoAMCgCHVNVs9G0+S+1ObyLaIZkkKlgo9TgHA96yLbx/4Yu7Jb2DVo2s3+7dGN1hPOP8AWEbevHWsv4wa42g/CnW7iEn7RcQ/ZIAOpeU7Bj/von8K2/COgxeH/A+laGUVltbNIZFIyGO35s/U5/OgDYhniuYEmt5ElikUMkkbBlYHoQR1FU9X1zT9Dgjl1O4EXnSCKGMKXeZz0VFAJY+wFeafCK9ew8deOvCNsT/ZelX4lskzkQCTcWjX0UEcDtzU3xhi1nRdY8N+O9Jtm1C18PSSm9sk+8YpFCtIvuBnntkHpmgDu18V6R9qt7Se4a1u7pwkFrcxNFLKf9lGGSOOSOB3rZrmtKudC8eW2h+KdLmS5htWeW3fb8yMyFGU/wB0jPI9RXS0AFFFFABWFqvjTw/oeqQ6dquorbXk5xDC0blpT6LgfMeR0zW7XkfijVrG+/aJ0Gz1C6jgtPD2ny3rtK2F86X5VH1xg0Ad5P468O2kkCXmoG2a4lWGHz7eWMSOTgKCyjJPpXQVzuj6rpXjzTWvLdBc6db33+izHIErwsPnA9A4IHrtroqACiiigDitV1/Urb4zaBoUNzt028025nnh2Kd7oRtO7GRjPY12pOBk15zrn/JxHhX/ALA95/Na9GJwMngUAc9ZePfDOo642jWWqxy6kpw9qI38xP8AeGPlHI5PrVjWvF+g+HLq2ttc1KKxluiFgEwIEhJxgHGM+1cJ8HUGt654y8aOo/4muqNb2r+sEI2rj6/0rO/aIE9/4VNvasV/smNdWlx3xKsaD/x6Q/8AAaAPZaydR8U6LpOrW2mX+oRx390peG2ALyOo4yFUE496bd+IIbLwzBqhRp3uI4/s8Ef355HA2ovuSfwGT0FeZ/Caxu9W+KXjTxRqtwLueCVdMjlHKIy8ypH6KpCgevXvQB7JTZEWWNo5FDIwKsD3BrCvPF1rb+ILjRrWzur+7tLZbq6W3C/uI2J253MNxODgLk8VpaNqsGuaLaapaJKkF5Es0ayrtbaRkZHY47UAczo2ry6D45k8G6lO80Nxbm80eeVssYwcSQMx+8UOCD12nnpk9nXkXxzvG0HVPA3iOAAS2OsiJj3Mci4dfxC167QByNh/yWLWv+wPZ/8Ao2euuri9OlY/G3XIsDaNFsz/AORZq7SgAooooAKKKKACiiigDk/Dcit8QPGSg8rNaZ/8BxXWVynhxQPH/jEgAEzWmT6/6OtdXQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFcf8OGV9P13aQca/fDj/AK612FcT8MP+Qb4g/wCxhvv/AEZQB21cprOo2WoePND0IXcDS2/majND5g3fINkfH+9Jn/gFdXVBdC0hbz7Wul2Qud2/zhbpv3eu7Gc+9AHk/hTTL+48e+PvD5je30abVxd3t0TtDo8YYwKfVsjcey57kVe8EXNl4o+OXijW7SaCS10a1i0ixWJwRjlpCoHbIIyK9Tls7aaGWKa3ikjmOZUdAQ/1HfoOvpVCx0/QLXU5Y9Ms9NhvrdQZFt4o1kjVs4zgZAOD9cUAcR8UdSth4x8GaLrlzHZ6Dd3clxeSzttileFQ0UTMeMFiDg8HArM+IXiC28TeNPB3h23IfSZb839xc/w3AgGQiDq4LEDI6nGM4NesXdla38IivraG5jDBgk0YcAjvg96oXmqaFbazbW15JbrfqAIt0eTFv4UbsYTcRgAkbsYGaAM7xJqema1Y6r4Vtbi3u9TuIGtpbIPlohIn33A5CgHOfoOpFYPwU1m2u/hxpumDAv8ATlktryNeTG8blcsexbGeevPpXoCWtvHcyXEcEazygCSUIAzgdAT1OKIbaC23/Z4Y4vMcu/loF3MerHHU+9AHHfFr/kQT/wBhGx/9Koq7auQ+J4B8ENkZ/wCJhY9f+vqKuvoAxvFviK18K+FNR1i9mjiW1t3kQO2N7AfKo9STgfjXKfBTRYLX4UaVPcCG5ur7ffTyYV8vKxbr6gYH4V3V7plhqQQajY212EzsE8Svtz6ZHFPs7C00+ExWFrBaxk7ikMYQE+uBQBPXk37SdtJP8G7mSMEi3vIJWx6btv8ANhXrNY3i/wAPReK/B+qaHOQq31u0SsR9xsZVvwIB/CgC5oson0DT5VIIkto2BHuoNeafFC+tdf8AiH4J8HLdRENfnUb1PMHypCpKg/U7uPaup+F2ozXvw+0+11BTHqWlr/Z97E33o5YvlOfqAGHswrdl8OaHNM8s2jafJI5LM72qEsT3JxzQBS17xlpeh27Ksov9QYYt9OtD5k879lCjJA/2jwOpNYfwt8GX3hqw1PVPEJjbXdeu2vL0RnKw5ztjB77cnn1NdlZ6bY6crDT7K3tQ33hBEqZ/IVZoA5bwr4vs/EMOppcyrHJbXs8PlTr5e6FXKq4z95CB97p1rkfg9oi6X4q8bXGiqY/DNxqCjT1H+rd1B81o/wDZDHaCODj2r0650ywvYkivLK3uI4+USWJWC/QEcVYRFjQIihVUYCgYAFAC0UjtsjZgpYgE7V6n2rkP+E8vv+hD8Vf9+bb/AOP0AdhTJZo4ImlnkWONRlndgAB7k1z+keLLrVNSS1m8J69pqsCTcXscAjXAzyVlY8/St26tLa+t2gvbeK4hbGY5UDqfwNAHl/wdnh8R+I/GnjFZo5f7R1L7NbbXBIghGFOOwOQfwr02xsINOtjBapsQyPIR6s7FmP5k0yy0jTdNdn07T7W0dxhmggVCw9DgVYuJUgtpZpc7I0LNtHOAMnpQBHa3sN49wsIkzbymJ/MiZPmAB43AbhyORke9cD8N/wDkfviL/wBheP8A9Eitz4cQyr4Ktru4luJJb93vGFxK8jRiRsqmWJOFXaPwNYfw3/5H74i/9heP/wBEigDN+NOo2mq3PhjwT9qhV9Y1WJrpTIBtgjO5s+mTjH0r0fWtYsfDug3WpX00cFtaQtISzBQQozgfyFE/h7Rbmd5rnSLCWVzl5JLZGZj6kkc1Pd6Xp9/FHHfWNtcxx/cSaFXC/QEcUAePeObO603wX8P9VsoW1C8tdbguHjtjuM0k25nCn3YkZp3xUf8As7wQNGvL63HiPxhqEFtckSD93GWGVXPSNFwue5Ynqxr2GCws7WCOC2tYIYom3RxxxhVQ+oA6Hk/nVe50DR7y4ae80qxnmb70ktsjMfqSM0AVtS1Cy8H+C5r3bmy0u0BVVPVEXAA/IVwDWaaJ8XtOv/C1xHfaT4vDtqmnKwdFZU3C6A7DoD6k+/Hqi28KW6wJDGsKABYwoCqB0AHSo7ews7SaWW1tIIJJjmR44wpc+5HWgCxXjPxEiN3+0h8O4Ily8Uc0z47KMn/2U17NXm+h6d/wkfxv1jxSQWsdFtl0mzftJN96Yj/d3bfrn0oA7nWdHttd082V690kRYMTa3Ulu+R/txsGx7Zrnv8AhWOg/wDP3r3/AIP73/47XYUUAZmheH7Pw9ayW9hJeSJI+9jeXstywOMcNIzEDjoOKxPij4oh8JfDjWdQedIrj7M0dsrNgtK42rgd+Tn8K66qd7pGm6k6vqGn2t2yDCtPCrlR6DIoA5z4Z+HrTRPhroFmscEskVojtKoDZdvnY5+rGuvqG1tLaxtxBZW8VvCvIjiQIo/AVNQB41+0hC6+HPDd8P8AV2mtxM57DIPX8q9lByMjpXKfEzwmfGnw91PRosC6ePzbVj2lQ7l/MjH41d8E63/wkPgvTNQYFJ3gCXMbfeimX5ZEI7EMCKAOF+J19a6/8SPBPg9bmEqL46lep5g+VIVJQH6ndx7V3Gv+MtL0S3ZY5Rf6iwIt9Osz5k879gFHIHqxwB1Jq9J4b0OaV5ZtG0+SRyWZ2tUJYnuTirNnptjpysNPsre1DfeEESpn8hQBxvwt8GX3hjTdS1LxA0ba7rt217fCM5WIkkrGD325PPqa0vCvi+z8RW2pLcyrHJb3k8PlXC7N0IchHAP3kIH3uh5rqaq3WmWF7Ekd5ZW9xHH9xJYlYL9ARxQB5n8HdEGl+JPGs+jK0fhm41FRpyjPlsyg+Y0f+zuO0EcHb7V6tSKqogVFCqowABgAUjtsjZgrOVBO1ep9hQA6iuP/AOE8vv8AoQ/FX/fm2/8Aj9XtI8V3Wq6klrN4U17TVYEm4vY4BGuBnBKysefpQBvzTRW8LSzyJFGoyzuwAA9ya8s+Dc8PiLXvGXjFZY5Tqepm3t9rgkQQjCHHbOc/hXqF1aW19bmC9t4riFiCY5kDqfwNQ2Wkabprs+nafa2jOMM0EKoWHocCgB9hYQaba/Z7RNkfmPIRj+J2LE/mTS2t7DeNOsIkzbymF/MiZPmAB43Abhz1GR71JczJb2ss0u7ZGhdtuc4AycYrkvAttqJ8A2txb3hS8v3a8Zr5ZLnyxIxYR8urfKu0dexoA6+OWOZN8TrIuSNynIyDg/rWbpHiCz1q81K1tEuEl02cQTiaIp8xQOMZ6jDDms3wVb6rDpC/brq1kh864xHHZtG4PnPzuMjcdeMdxzVDwZfW1x438apBMrsb+FgAeoFvGpI9QGBH1FAGdrn/ACcR4V/7A95/Na2Pij4pg8JfDnWNQedI7j7M0VspYBmkcbVwO+Cc/gax9c/5OI8K/wDYHvP5rXdXukabqMivqGn2t06jCtPArkD0BIoA5/4Z6RB4c+F+hWKSRkRWiPLIrAqXb5mOf95jXNa39m8XeBfiFf2VxFcpPDLaQmJw2Et4z6eshkP0xXo6aXYR2DWMdjbLaN963WFRGf8AgOMU210fTbFZFstOtbZZRtkEMCoHHocDnrQB5hoGsSaZ8L7Lxn4sAszpmjKmm2k7AHcIwDIQf45CAFHZT/tGtz4K6cul/CbTJpJUknvg9/cyKwbLynfyR6AgfhXaXmk6dqAjF/YWt0IxhBNCr7fpkcU+00+ysIWhsbSC2iY5ZIYgik+pAFAHkHie/hvm8P8AxO8E3KjU5pYrG505X3fb4Xk2mIr/AH1yTnHAGe1eyxokUaxxIqIowqqMAD0AqBNNsY7wXcdnbrchdgmWJQ+303YzirNAHjX7SKfaPDHhyyQbprnW4UjA652sOPzr2UDAArzfxRp3/CX/ABi8Oaco32XhtG1O9YdBK/ECH3+Utj0+tekUAcRpv/JdNd/7Adn/AOjZq7euQsAP+Fya0cDP9jWfP/bWeuvoAKKKKACiiigAooooA5Tw26t8QPGIBBKzWmR6f6OtdXXG+FTn4keOMdp7P/0mFdlQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFcp4UxY+KfFOkt8p+2pfxD1SaMZI/4Gj11dc34i066ttXs/EukQtPdWaNBdWyfeurZiCQPV1I3KO/zDvQB0lFQWV7b6jZx3VnKJYZBlWH8iOoI7g8ip6ACuL8O397ew+JdVGpSzQNfPBZf6MJjFHF8hISMAuC+/A64A5rtKit7WC0iMdrBHAhYsVjQKMk5JwO5NAHO6Vqd/PqcUc9/cSxsTlH0Ge3B4/56Nwv41w3iRJ10j4k2k2TqN3e25sUJ+dw0cSwlfUB1bp3Br2CoJLK1mu4rqW2he4hBEczRgugPXB6igCWIMIkEhy4Ubj6mnUUUAc34+0nUNa8ITWmjwxz3i3FvNHFLL5av5cyORuwccKe1V7bXPG0l1Elz4Ls4YWcCSUa2rlFzydvlDOBziusooAKKKKACiiigDNXQ7eLxA2r2rPbzzJsuUjI2XIA+UuP7y9mHOODkdNKiigAooooAKKKKACiiigAooooAKKKKACsvS/Dum6NqWp32nwtHcarMJ7tjIW3uF2ggE8celalFABRRRQAUUUUAFFFFAFe/tXvbGW2iupbRpBt86EgOo77SQcHHftTdN0200jTYbDToVgtoF2oi9vfPck8knkk1aooAKKKKACiiigAooooAKzbXQ7ew1q61CyZ4Ptg3XNuuPLkk4xJjs2BgkdeM9K0qKACiiigAooooAKKKKACiiigAooooAKKKKACiiigDLuPDum3Xiaz1+aFjqNnA8EMnmEBUf7w25welalFFABRRRQAUUUUAFNkVmjZUfYxBAbGdp9adRQBn6NotrolrJFbF5JZpDNcXEp3STyHqzH16D0AAAwBVHXNT8S2V6keheHLfVLcoC00upi3Ktk/LtMbZ4xznvW9RQBxvhmy8Qz+NtU13xBpNvpaXFjBaxRRXouCxR5GJJCrj74rsqKKACiiigAooooAKKKwPEeo3UqnRNCY/2pdptMwGVsozwZWPqB91epOOwJABQ8BD7ZJ4h1ocpqWrS+S396OELCp+mY2P4111VNK0y20XSLXTbBNlvaxLFGCcnAHc9z71boAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigBiQxxM7RxqjSHLlRjcfU0+iigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigApkcMcRcxRqhdtzFRjcfU+tPooAKKKKACiiigD/9k=" /><p>where Bldg_DS(IMs = x1: x5) is the building DS corresponding to the five intensity measures. P[DS_SWi|(IM = x1:x3)] = the exceedance probability of DS_SWi at (IMs = x1:x3) calculated from the surge-wave fragility, and  P[DS_SW i+1|(IM = x1:x3)] = the exceedance probability of DS_SWi+1 at (IMs = x1: x3) calculated from the surge-wave fragility. P[DS_Wi|(IM = x4)] = the exceedance probability of DS_Wi at (IMs = x4) calculated from the wind fragility, and  P[DS_W i+1|(IM = x4)] = the exceedance probability of DS_Wi+1 at (IMs = x1, x2,x3) calculated from the wind fragility. P[DS_Fi|(IM = x1, x3, x5)] = the exceedance probability of DS_Fi at (IMs = x1, x3, x5) calculated from the flood fragility, and  P[DS_F i+1|(IM = x1, x3, x5)] = the exceedance probability of DS_Fi+1 at (IMs = x1, x2,x3) calculated from the flood fragility.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># use utility method of pyicore-viz package to visualize the fragility</span>
<span class="n">fragility_set</span> <span class="o">=</span> <span class="n">FragilityCurveSet</span><span class="p">(</span><span class="n">FragilityService</span><span class="p">(</span><span class="n">client</span><span class="p">)</span><span class="o">.</span><span class="n">get_dfr3_set</span><span class="p">(</span><span class="s2">&quot;5f6ccf67de7b566bb71b202d&quot;</span><span class="p">))</span>
<span class="n">plt</span> <span class="o">=</span> <span class="n">plotviz</span><span class="o">.</span><span class="n">get_fragility_plot_3d</span><span class="p">(</span><span class="n">fragility_set</span><span class="p">,</span> 
                                            <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Galveston empirical fragility model developed &quot;</span>
                                            <span class="s2">&quot;based on Hurricane Ike surveys&quot;</span><span class="p">,</span>
                                            <span class="n">limit_state</span><span class="o">=</span><span class="s2">&quot;LS_0&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/5d7124240f7c0cefc912a9d6dfb1c63263feb8418f7f2d17be3e24f3ce3822d9.png" src="../../_images/5d7124240f7c0cefc912a9d6dfb1c63263feb8418f7f2d17be3e24f3ce3822d9.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">hazard_type</span> <span class="o">=</span> <span class="s2">&quot;hurricane&quot;</span>
<span class="c1"># Galveston deterministic Hurricane, 3 datasets - Kriging</span>
<span class="n">hazard_id</span> <span class="o">=</span> <span class="s2">&quot;5fa5a228b6429615aeea4410&quot;</span>

<span class="c1"># visualization</span>
<span class="n">wave_height_id</span> <span class="o">=</span> <span class="s2">&quot;5f15cd62c98cf43417c10a3f&quot;</span>
<span class="n">surge_level_id</span> <span class="o">=</span> <span class="s2">&quot;5f15cd5ec98cf43417c10a3b&quot;</span>

<span class="c1"># Hurricane building mapping (with equation)</span>
<span class="n">mapping_id</span> <span class="o">=</span> <span class="s2">&quot;602c381a1d85547cdc9f0675&quot;</span>
<span class="n">fragility_service</span> <span class="o">=</span> <span class="n">FragilityService</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
<span class="n">mapping_set</span> <span class="o">=</span> <span class="n">MappingSet</span><span class="p">(</span><span class="n">fragility_service</span><span class="o">.</span><span class="n">get_mapping</span><span class="p">(</span><span class="n">mapping_id</span><span class="p">))</span>

<span class="c1"># Building Wind Fragility mapping</span>
<span class="n">wind_mapping_id</span> <span class="o">=</span> <span class="s2">&quot;62fef3a6cef2881193f2261d&quot;</span>
<span class="n">wind_mapping_set</span> <span class="o">=</span> <span class="n">MappingSet</span><span class="p">(</span><span class="n">fragility_service</span><span class="o">.</span><span class="n">get_mapping</span><span class="p">(</span><span class="n">wind_mapping_id</span><span class="p">))</span>

<span class="c1"># Surge-wave mapping</span>
<span class="n">sw_mapping_id</span> <span class="o">=</span> <span class="s2">&quot;6303e51bd76c6d0e1f6be080&quot;</span>
<span class="n">sw_mapping_set</span> <span class="o">=</span> <span class="n">MappingSet</span><span class="p">(</span><span class="n">fragility_service</span><span class="o">.</span><span class="n">get_mapping</span><span class="p">(</span><span class="n">sw_mapping_id</span><span class="p">))</span>

<span class="c1"># flood mapping</span>
<span class="n">flood_mapping_id</span> <span class="o">=</span> <span class="s2">&quot;62fefd688a30d30dac57bbd7&quot;</span>
<span class="n">flood_mapping_set</span> <span class="o">=</span> <span class="n">MappingSet</span><span class="p">(</span><span class="n">fragility_service</span><span class="o">.</span><span class="n">get_mapping</span><span class="p">(</span><span class="n">flood_mapping_id</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># visualize wave height</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">from_data_service</span><span class="p">(</span><span class="n">wave_height_id</span><span class="p">,</span> <span class="n">DataService</span><span class="p">(</span><span class="n">client</span><span class="p">))</span>
<span class="nb">map</span> <span class="o">=</span> <span class="n">geoviz</span><span class="o">.</span><span class="n">map_raster_overlay_from_file</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_file_path</span><span class="p">(</span><span class="s1">&#39;tif&#39;</span><span class="p">))</span>
<span class="nb">map</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Dataset already exists locally. Reading from local cached zip.
Unzipped folder found in the local cache. Reading from it...
</pre></div>
</div>
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "74f955dd2d344d5bb3d59a6e044616f3", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># add opacity control - NOTE: It takes time before the opacity takes effect.</span>
<span class="nb">map</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">interact</span><span class="p">(</span><span class="n">opacity</span><span class="o">=</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">0.01</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "8c466352a86d49e0a8240a4515418230", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># visualize surge level</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">from_data_service</span><span class="p">(</span><span class="n">surge_level_id</span><span class="p">,</span> <span class="n">DataService</span><span class="p">(</span><span class="n">client</span><span class="p">))</span>
<span class="nb">map</span> <span class="o">=</span> <span class="n">geoviz</span><span class="o">.</span><span class="n">map_raster_overlay_from_file</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_file_path</span><span class="p">(</span><span class="s1">&#39;tif&#39;</span><span class="p">))</span>
<span class="nb">map</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Dataset already exists locally. Reading from local cached zip.
Unzipped folder found in the local cache. Reading from it...
</pre></div>
</div>
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "b4c1110db0674f49943831e8cd78b01c", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># add opacity control - NOTE: It takes time before the opacity takes effect.</span>
<span class="nb">map</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">interact</span><span class="p">(</span><span class="n">opacity</span><span class="o">=</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">0.01</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "a8011575f3f14b92aed0679b2dca17d8", "version_major": 2, "version_minor": 0}</script></div>
</div>
</section>
<section id="id2">
<h3>2.2 Building Damage<a class="headerlink" href="#id2" title="Permalink to this heading">#</a></h3>
</section>
<section id="wind-building-damage">
<h3>2.2.1 Wind building damage<a class="headerlink" href="#wind-building-damage" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># wind building damage</span>
<span class="n">w_bldg_dmg</span> <span class="o">=</span> <span class="n">BuildingDamage</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
<span class="n">w_bldg_dmg</span><span class="o">.</span><span class="n">load_remote_input_dataset</span><span class="p">(</span><span class="s2">&quot;buildings&quot;</span><span class="p">,</span> <span class="n">bldg_dataset_id</span><span class="p">)</span>
<span class="n">w_bldg_dmg</span><span class="o">.</span><span class="n">set_input_dataset</span><span class="p">(</span><span class="s1">&#39;dfr3_mapping_set&#39;</span><span class="p">,</span> <span class="n">wind_mapping_set</span><span class="p">)</span>
<span class="n">w_bldg_dmg</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;result_name&quot;</span><span class="p">,</span> <span class="s2">&quot;Galveston-wind-dmg&quot;</span><span class="p">)</span>
<span class="n">w_bldg_dmg</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;hazard_type&quot;</span><span class="p">,</span> <span class="n">hazard_type</span><span class="p">)</span>
<span class="n">w_bldg_dmg</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;hazard_id&quot;</span><span class="p">,</span> <span class="n">hazard_id</span><span class="p">)</span>
<span class="n">w_bldg_dmg</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;num_cpu&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">w_bldg_dmg</span><span class="o">.</span><span class="n">run_analysis</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Dataset already exists locally. Reading from local cached zip.
Unzipped folder found in the local cache. Reading from it...
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
</section>
<section id="surge-wave-building-damage">
<h3>2.2.2 Surge-Wave building damage<a class="headerlink" href="#surge-wave-building-damage" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># surge-wave building damage</span>
<span class="n">bldg_dmg</span> <span class="o">=</span> <span class="n">BuildingDamage</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
<span class="n">bldg_dmg</span><span class="o">.</span><span class="n">load_remote_input_dataset</span><span class="p">(</span><span class="s2">&quot;buildings&quot;</span><span class="p">,</span> <span class="n">bldg_dataset_id</span><span class="p">)</span>
<span class="n">bldg_dmg</span><span class="o">.</span><span class="n">set_input_dataset</span><span class="p">(</span><span class="s1">&#39;dfr3_mapping_set&#39;</span><span class="p">,</span> <span class="n">sw_mapping_set</span><span class="p">)</span>
<span class="n">bldg_dmg</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;result_name&quot;</span><span class="p">,</span> <span class="s2">&quot;Galveston-sw-dmg&quot;</span><span class="p">)</span>
<span class="n">bldg_dmg</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;hazard_type&quot;</span><span class="p">,</span> <span class="n">hazard_type</span><span class="p">)</span>
<span class="n">bldg_dmg</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;hazard_id&quot;</span><span class="p">,</span> <span class="n">hazard_id</span><span class="p">)</span>
<span class="n">bldg_dmg</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;num_cpu&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">bldg_dmg</span><span class="o">.</span><span class="n">run_analysis</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Dataset already exists locally. Reading from local cached zip.
Unzipped folder found in the local cache. Reading from it...
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
</section>
<section id="flood-building-damage">
<h3>Flood building damage<a class="headerlink" href="#flood-building-damage" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># flood building damage</span>
<span class="n">f_bldg_dmg</span> <span class="o">=</span> <span class="n">BuildingDamage</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
<span class="n">f_bldg_dmg</span><span class="o">.</span><span class="n">load_remote_input_dataset</span><span class="p">(</span><span class="s2">&quot;buildings&quot;</span><span class="p">,</span> <span class="n">bldg_dataset_id</span><span class="p">)</span>
<span class="n">f_bldg_dmg</span><span class="o">.</span><span class="n">set_input_dataset</span><span class="p">(</span><span class="s1">&#39;dfr3_mapping_set&#39;</span><span class="p">,</span> <span class="n">flood_mapping_set</span><span class="p">)</span>
<span class="n">f_bldg_dmg</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;result_name&quot;</span><span class="p">,</span> <span class="s2">&quot;Galveston-flood-dmg&quot;</span><span class="p">)</span>
<span class="n">f_bldg_dmg</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;hazard_type&quot;</span><span class="p">,</span> <span class="n">hazard_type</span><span class="p">)</span>
<span class="n">f_bldg_dmg</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;hazard_id&quot;</span><span class="p">,</span> <span class="n">hazard_id</span><span class="p">)</span>
<span class="n">f_bldg_dmg</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;num_cpu&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">f_bldg_dmg</span><span class="o">.</span><span class="n">run_analysis</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Dataset already exists locally. Reading from local cached zip.
Unzipped folder found in the local cache. Reading from it...
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
</section>
<section id="combine-wind-wave-and-surge-building-damage">
<h3>Combine wind, wave and surge building damage<a class="headerlink" href="#combine-wind-wave-and-surge-building-damage" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">surge_wave_damage</span> <span class="o">=</span> <span class="n">bldg_dmg</span><span class="o">.</span><span class="n">get_output_dataset</span><span class="p">(</span><span class="s2">&quot;ds_result&quot;</span><span class="p">)</span>
<span class="n">wind_damage</span> <span class="o">=</span> <span class="n">w_bldg_dmg</span><span class="o">.</span><span class="n">get_output_dataset</span><span class="p">(</span><span class="s2">&quot;ds_result&quot;</span><span class="p">)</span>
<span class="n">flood_damage</span> <span class="o">=</span> <span class="n">f_bldg_dmg</span><span class="o">.</span><span class="n">get_output_dataset</span><span class="p">(</span><span class="s2">&quot;ds_result&quot;</span><span class="p">)</span>

<span class="n">result_name</span> <span class="o">=</span> <span class="s2">&quot;Galveston-combined-dmg&quot;</span>
<span class="n">combined_bldg_dmg</span> <span class="o">=</span> <span class="n">CombinedWindWaveSurgeBuildingDamage</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
<span class="n">combined_bldg_dmg</span><span class="o">.</span><span class="n">set_input_dataset</span><span class="p">(</span><span class="s2">&quot;surge_wave_damage&quot;</span><span class="p">,</span> <span class="n">surge_wave_damage</span><span class="p">)</span>
<span class="n">combined_bldg_dmg</span><span class="o">.</span><span class="n">set_input_dataset</span><span class="p">(</span><span class="s2">&quot;wind_damage&quot;</span><span class="p">,</span> <span class="n">wind_damage</span><span class="p">)</span>
<span class="n">combined_bldg_dmg</span><span class="o">.</span><span class="n">set_input_dataset</span><span class="p">(</span><span class="s2">&quot;flood_damage&quot;</span><span class="p">,</span> <span class="n">flood_damage</span><span class="p">)</span>
<span class="n">combined_bldg_dmg</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;result_name&quot;</span><span class="p">,</span> <span class="n">result_name</span><span class="p">)</span>
<span class="c1"># combined_bldg_dmg.run_analysis()</span>

<span class="c1"># combined_dmg = combined_bldg_dmg.get_output_dataset(&quot;result&quot;)</span>
<span class="c1"># combined_dmg_df = combined_dmg.get_dataframe_from_csv(low_memory=False)</span>

<span class="c1"># Display top 5 rows of output data</span>
<span class="c1"># combined_dmg_df.head()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
</section>
<section id="electric-power-facility-damage">
<h3>2.3 Electric Power Facility Damage<a class="headerlink" href="#electric-power-facility-damage" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># EPF fragility mapping</span>
<span class="n">epf_mapping_id</span> <span class="o">=</span> <span class="s2">&quot;62fac92ecef2881193f22613&quot;</span>
<span class="n">epf_mapping_set</span> <span class="o">=</span> <span class="n">MappingSet</span><span class="p">(</span><span class="n">fragility_service</span><span class="o">.</span><span class="n">get_mapping</span><span class="p">(</span><span class="n">epf_mapping_id</span><span class="p">))</span>

<span class="n">epf_dmg_hurricane_galveston</span> <span class="o">=</span> <span class="n">EpfDamage</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
<span class="n">epf_dmg_hurricane_galveston</span><span class="o">.</span><span class="n">load_remote_input_dataset</span><span class="p">(</span><span class="s2">&quot;epfs&quot;</span><span class="p">,</span> <span class="s2">&quot;62fc000f88470b319561b58d&quot;</span><span class="p">)</span>
<span class="n">epf_dmg_hurricane_galveston</span><span class="o">.</span><span class="n">set_input_dataset</span><span class="p">(</span><span class="s1">&#39;dfr3_mapping_set&#39;</span><span class="p">,</span> <span class="n">epf_mapping_set</span><span class="p">)</span>
<span class="n">epf_dmg_hurricane_galveston</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;result_name&quot;</span><span class="p">,</span> <span class="s2">&quot;Galveston-hurricane-epf-damage&quot;</span><span class="p">)</span>
<span class="n">epf_dmg_hurricane_galveston</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;fragility_key&quot;</span><span class="p">,</span> <span class="s2">&quot;Non-Retrofit Fragility ID Code&quot;</span><span class="p">)</span>
<span class="n">epf_dmg_hurricane_galveston</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;hazard_type&quot;</span><span class="p">,</span> <span class="n">hazard_type</span><span class="p">)</span>
<span class="n">epf_dmg_hurricane_galveston</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;hazard_id&quot;</span><span class="p">,</span> <span class="n">hazard_id</span><span class="p">)</span>
<span class="n">epf_dmg_hurricane_galveston</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;num_cpu&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>

<span class="c1"># Run Analysis</span>
<span class="n">epf_dmg_hurricane_galveston</span><span class="o">.</span><span class="n">run_analysis</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">22</span><span class="p">],</span> <span class="n">line</span> <span class="mi">3</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># EPF fragility mapping</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">epf_mapping_id</span> <span class="o">=</span> <span class="s2">&quot;62fac92ecef2881193f22613&quot;</span>
<span class="ne">----&gt; </span><span class="mi">3</span> <span class="n">epf_mapping_set</span> <span class="o">=</span> <span class="n">MappingSet</span><span class="p">(</span><span class="n">fragility_service</span><span class="o">.</span><span class="n">get_mapping</span><span class="p">(</span><span class="n">epf_mapping_id</span><span class="p">))</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="n">epf_dmg_hurricane_galveston</span> <span class="o">=</span> <span class="n">EpfDamage</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span> <span class="n">epf_dmg_hurricane_galveston</span><span class="o">.</span><span class="n">load_remote_input_dataset</span><span class="p">(</span><span class="s2">&quot;epfs&quot;</span><span class="p">,</span> <span class="s2">&quot;62fc000f88470b319561b58d&quot;</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;fragility_service&#39; is not defined
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="functionality">
<h1>3) Functionality<a class="headerlink" href="#functionality" title="Permalink to this heading">#</a></h1>
<section id="a-functionality-models">
<h2>3a) Functionality Models<a class="headerlink" href="#a-functionality-models" title="Permalink to this heading">#</a></h2>
<p><img alt="functionality.png" src="notebooks/extra_notebooks/attachment:functionality.png" /></p>
</section>
<section id="b-functionality-of-physical-infrastructure">
<h2>3b) Functionality of Physical Infrastructure<a class="headerlink" href="#b-functionality-of-physical-infrastructure" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Retrieve result dataset from surge_wave_damage</span>
<span class="n">building_dmg_result</span> <span class="o">=</span> <span class="n">bldg_dmg</span><span class="o">.</span><span class="n">get_output_dataset</span><span class="p">(</span><span class="s1">&#39;ds_result&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Convert dataset to Pandas DataFrame</span>
<span class="n">bdmg_df</span> <span class="o">=</span> <span class="n">building_dmg_result</span><span class="o">.</span><span class="n">get_dataframe_from_csv</span><span class="p">(</span><span class="n">low_memory</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Display top 5 rows of output data</span>
<span class="n">bdmg_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>guid</th>
      <th>LS_0</th>
      <th>LS_1</th>
      <th>LS_2</th>
      <th>DS_0</th>
      <th>DS_1</th>
      <th>DS_2</th>
      <th>DS_3</th>
      <th>haz_expose</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1815653a-7b70-44ce-8544-e975596bdf82</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>no</td>
    </tr>
    <tr>
      <th>1</th>
      <td>df63f574-8e9b-426b-aa3b-b3757cb699b5</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>no</td>
    </tr>
    <tr>
      <th>2</th>
      <td>a743ae24-4209-44e2-b11e-7a872f071ae9</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>no</td>
    </tr>
    <tr>
      <th>3</th>
      <td>59ed0339-c8e3-4fcd-9b5a-c1487b035d3b</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>no</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5cc8a749-21ca-4073-8626-4ae7332cc0dd</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>no</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bdmg_df</span><span class="o">.</span><span class="n">DS_0</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    1.616450e+05
mean     9.034213e-01
std      2.621947e-01
min      3.279000e-07
25%      1.000000e+00
50%      1.000000e+00
75%      1.000000e+00
max      1.000000e+00
Name: DS_0, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bdmg_df</span><span class="o">.</span><span class="n">DS_3</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    161645.000000
mean          0.015951
std           0.110204
min           0.000000
25%           0.000000
50%           0.000000
75%           0.000000
max           0.999997
Name: DS_3, dtype: float64
</pre></div>
</div>
</div>
</div>
</section>
<section id="d-social-science-modules">
<h2>3d) Social Science Modules<a class="headerlink" href="#d-social-science-modules" title="Permalink to this heading">#</a></h2>
<p>Population Dislocation
Population dislocation refers to households that will be forced to leave their pre-event residence due to hazard related damages. Population dislocation is a function of structure value loss due to damage, neighborhood characteristics and structure type.</p>
<section id="d-1-use-new-pyincore-data-utility-to-obtain-block-group-data-for-county">
<h3>3d.1 Use new pyincore-data utility to obtain Block Group Data for County<a class="headerlink" href="#d-1-use-new-pyincore-data-utility-to-obtain-block-group-data-for-county" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyincore_data.censusutil</span> <span class="kn">import</span> <span class="n">CensusUtil</span>
<span class="n">state_counties</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;48167&#39;</span><span class="p">]</span>
<span class="n">blockgroup_df</span><span class="p">,</span> <span class="n">bgmap</span> <span class="o">=</span> <span class="n">CensusUtil</span><span class="o">.</span><span class="n">get_blockgroupdata_for_dislocation</span><span class="p">(</span><span class="n">state_counties</span><span class="p">,</span> 
                                                <span class="n">out_csv</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> 
                                                <span class="n">out_shapefile</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> 
                                                <span class="n">out_html</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                                <span class="n">program_name</span> <span class="o">=</span> <span class="s2">&quot;BlockGroupData&quot;</span><span class="p">,</span>
                                                <span class="n">geo_name</span> <span class="o">=</span> <span class="s2">&quot;Galveston&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO - censusutil.py:get_blockgroupdata_for_dislocation() - Census API data from: https://api.census.gov/data/2010/dec/sf1?get=GEO_ID,NAME,P005001,P005003,P005004,P005010&amp;for=block%20group&amp;in=state:48&amp;in=county:167
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1940
P005001 converted from object to integer
P005003 converted from object to integer
P005004 converted from object to integer
P005010 converted from object to integer
Downloading Shapefiles for State_County: 48167 from: https://www2.census.gov/geo/tiger/TIGER2010/BG/2010/tl_2010_48167_bg10.zip
CSV data file saved to: BlockGroupData/BlockGroupData_Galveston.csv
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">blockgroup_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>bgid</th>
      <th>bgidstr</th>
      <th>Survey</th>
      <th>pblackbg</th>
      <th>phispbg</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>481677201001</td>
      <td>BG481677201001</td>
      <td>2010 dec/sf1</td>
      <td>1.726539</td>
      <td>8.911167</td>
    </tr>
    <tr>
      <th>1</th>
      <td>481677201002</td>
      <td>BG481677201002</td>
      <td>2010 dec/sf1</td>
      <td>0.808407</td>
      <td>18.108327</td>
    </tr>
    <tr>
      <th>2</th>
      <td>481677201003</td>
      <td>BG481677201003</td>
      <td>2010 dec/sf1</td>
      <td>0.956023</td>
      <td>17.304015</td>
    </tr>
    <tr>
      <th>3</th>
      <td>481677202001</td>
      <td>BG481677202001</td>
      <td>2010 dec/sf1</td>
      <td>1.625282</td>
      <td>6.952596</td>
    </tr>
    <tr>
      <th>4</th>
      <td>481677202002</td>
      <td>BG481677202002</td>
      <td>2010 dec/sf1</td>
      <td>1.735488</td>
      <td>9.634949</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bg_data</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span>
    <span class="s1">&#39;BlockGroupData/BlockGroupData_Galveston.csv&#39;</span><span class="p">,</span>
    <span class="s1">&#39;incore:blockGroupData&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="d-2-population-dislocation">
<h3>3d.2 Population Dislocation<a class="headerlink" href="#d-2-population-dislocation" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pop_dis</span> <span class="o">=</span> <span class="n">PopulationDislocation</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Value loss parameters DS 0-3</span>
<span class="n">value_loss</span> <span class="o">=</span> <span class="s2">&quot;60354810e379f22e16560dbd&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pop_dis</span><span class="o">.</span><span class="n">set_input_dataset</span><span class="p">(</span><span class="s2">&quot;block_group_data&quot;</span><span class="p">,</span> <span class="n">bg_data</span><span class="p">)</span>
<span class="n">pop_dis</span><span class="o">.</span><span class="n">load_remote_input_dataset</span><span class="p">(</span><span class="s2">&quot;value_loss_param&quot;</span><span class="p">,</span> <span class="n">value_loss</span><span class="p">)</span>

<span class="n">pop_dis</span><span class="o">.</span><span class="n">set_input_dataset</span><span class="p">(</span><span class="s2">&quot;building_dmg&quot;</span><span class="p">,</span> <span class="n">building_dmg_result</span><span class="p">)</span>
<span class="n">pop_dis</span><span class="o">.</span><span class="n">set_input_dataset</span><span class="p">(</span><span class="s2">&quot;housing_unit_allocation&quot;</span><span class="p">,</span> <span class="n">hua_result</span><span class="p">)</span>

<span class="n">result_name</span> <span class="o">=</span> <span class="s2">&quot;galveston-pop-disl-results&quot;</span>
<span class="n">seed</span> <span class="o">=</span> <span class="mi">1111</span>

<span class="n">pop_dis</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;result_name&quot;</span><span class="p">,</span> <span class="n">result_name</span><span class="p">)</span>
<span class="n">pop_dis</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;seed&quot;</span><span class="p">,</span> <span class="n">seed</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Dataset already exists locally. Reading from local cached zip.
Unzipped folder found in the local cache. Reading from it...
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pop_dis</span><span class="o">.</span><span class="n">run_analysis</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
</section>
<section id="d-3-explore-population-dislocation-results">
<h3>3.d.3 Explore Population Dislocation Results<a class="headerlink" href="#d-3-explore-population-dislocation-results" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Retrieve result dataset</span>
<span class="n">population_dislocation_result</span> <span class="o">=</span> <span class="n">pop_dis</span><span class="o">.</span><span class="n">get_output_dataset</span><span class="p">(</span><span class="s2">&quot;result&quot;</span><span class="p">)</span>

<span class="c1"># Convert dataset to Pandas DataFrame</span>
<span class="n">pd_df</span> <span class="o">=</span> <span class="n">population_dislocation_result</span><span class="o">.</span><span class="n">get_dataframe_from_csv</span><span class="p">(</span><span class="n">low_memory</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">poptable</span><span class="o">.</span><span class="n">pop_results_table</span><span class="p">(</span><span class="n">pd_df</span><span class="p">,</span> 
                  <span class="n">who</span> <span class="o">=</span> <span class="s2">&quot;Total Population by Households&quot;</span><span class="p">,</span> 
                  <span class="n">what</span> <span class="o">=</span> <span class="s2">&quot;by Tenure Status and Dislocation&quot;</span><span class="p">,</span>
                  <span class="n">where</span> <span class="o">=</span> <span class="s2">&quot;Galveston County TX&quot;</span><span class="p">,</span>
                  <span class="n">when</span> <span class="o">=</span> <span class="s2">&quot;2010&quot;</span><span class="p">,</span>
                  <span class="n">row_index</span> <span class="o">=</span> <span class="s2">&quot;Tenure Status&quot;</span><span class="p">,</span>
                  <span class="n">col_index</span> <span class="o">=</span> <span class="s1">&#39;Population Dislocation&#39;</span><span class="p">,</span>
                  <span class="n">row_percent</span> <span class="o">=</span> <span class="s1">&#39;1 Dislocates&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
#T_2e308 caption {
  text-align: center;
  caption-side: top;
  font-size: 150%;
}
</style>
<table id="T_2e308">
  <caption>Table. Total Population by Households by Tenure Status and Dislocation, Galveston County TX, 2010.</caption>
  <thead>
    <tr>
      <th class="index_name level0" >Population Dislocation</th>
      <th id="T_2e308_level0_col0" class="col_heading level0 col0" >0 Does not dislocate (%)</th>
      <th id="T_2e308_level0_col1" class="col_heading level0 col1" >1 Dislocates (%)</th>
      <th id="T_2e308_level0_col2" class="col_heading level0 col2" >Total Population by Households (%)</th>
      <th id="T_2e308_level0_col3" class="col_heading level0 col3" >Percent Row 
1 Dislocates</th>
    </tr>
    <tr>
      <th class="index_name level0" >Tenure Status</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
      <th class="blank col3" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_2e308_level0_row0" class="row_heading level0 row0" >1 Owner Occupied</th>
      <td id="T_2e308_row0_col0" class="data row0 col0" >196,354	 (71.8%)</td>
      <td id="T_2e308_row0_col1" class="data row0 col1" >7,079	 (61.8%)</td>
      <td id="T_2e308_row0_col2" class="data row0 col2" >203,433	 (71.4%)</td>
      <td id="T_2e308_row0_col3" class="data row0 col3" >3.5%</td>
    </tr>
    <tr>
      <th id="T_2e308_level0_row1" class="row_heading level0 row1" >2 Renter Occupied</th>
      <td id="T_2e308_row1_col0" class="data row1 col0" >77,154	 (28.2%)</td>
      <td id="T_2e308_row1_col1" class="data row1 col1" >4,378	 (38.2%)</td>
      <td id="T_2e308_row1_col2" class="data row1 col2" >81,532	 (28.6%)</td>
      <td id="T_2e308_row1_col3" class="data row1 col3" >5.4%</td>
    </tr>
    <tr>
      <th id="T_2e308_level0_row2" class="row_heading level0 row2" >Total</th>
      <td id="T_2e308_row2_col0" class="data row2 col0" >273,508	 (100.0%)</td>
      <td id="T_2e308_row2_col1" class="data row2 col1" >11,457	 (100.0%)</td>
      <td id="T_2e308_row2_col2" class="data row2 col2" >284,965	 (100.0%)</td>
      <td id="T_2e308_row2_col3" class="data row2 col3" >4.0%</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">poptable</span><span class="o">.</span><span class="n">pop_results_table</span><span class="p">(</span><span class="n">pd_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pd_df</span><span class="p">[</span><span class="s1">&#39;placeNAME10&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;Galveston&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
                  <span class="n">who</span> <span class="o">=</span> <span class="s2">&quot;Total Population by Households&quot;</span><span class="p">,</span> 
                  <span class="n">what</span> <span class="o">=</span> <span class="s2">&quot;by Tenure Status and Dislocation&quot;</span><span class="p">,</span>
                  <span class="n">where</span> <span class="o">=</span> <span class="s2">&quot;Galveston County TX&quot;</span><span class="p">,</span>
                  <span class="n">when</span> <span class="o">=</span> <span class="s2">&quot;2010&quot;</span><span class="p">,</span>
                  <span class="n">row_index</span> <span class="o">=</span> <span class="s2">&quot;Tenure Status&quot;</span><span class="p">,</span>
                  <span class="n">col_index</span> <span class="o">=</span> <span class="s1">&#39;Population Dislocation&#39;</span><span class="p">,</span>
                  <span class="n">row_percent</span> <span class="o">=</span> <span class="s1">&#39;1 Dislocates&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
#T_f59cb caption {
  text-align: center;
  caption-side: top;
  font-size: 150%;
}
</style>
<table id="T_f59cb">
  <caption>Table. Total Population by Households by Tenure Status and Dislocation, Galveston County TX, 2010.</caption>
  <thead>
    <tr>
      <th class="index_name level0" >Population Dislocation</th>
      <th id="T_f59cb_level0_col0" class="col_heading level0 col0" >0 Does not dislocate (%)</th>
      <th id="T_f59cb_level0_col1" class="col_heading level0 col1" >1 Dislocates (%)</th>
      <th id="T_f59cb_level0_col2" class="col_heading level0 col2" >Total Population by Households (%)</th>
      <th id="T_f59cb_level0_col3" class="col_heading level0 col3" >Percent Row 
1 Dislocates</th>
    </tr>
    <tr>
      <th class="index_name level0" >Tenure Status</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
      <th class="blank col3" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_f59cb_level0_row0" class="row_heading level0 row0" >1 Owner Occupied</th>
      <td id="T_f59cb_row0_col0" class="data row0 col0" >18,236	 (49.0%)</td>
      <td id="T_f59cb_row0_col1" class="data row0 col1" >3,971	 (52.1%)</td>
      <td id="T_f59cb_row0_col2" class="data row0 col2" >22,207	 (49.5%)</td>
      <td id="T_f59cb_row0_col3" class="data row0 col3" >17.9%</td>
    </tr>
    <tr>
      <th id="T_f59cb_level0_row1" class="row_heading level0 row1" >2 Renter Occupied</th>
      <td id="T_f59cb_row1_col0" class="data row1 col0" >19,010	 (51.0%)</td>
      <td id="T_f59cb_row1_col1" class="data row1 col1" >3,653	 (47.9%)</td>
      <td id="T_f59cb_row1_col2" class="data row1 col2" >22,663	 (50.5%)</td>
      <td id="T_f59cb_row1_col3" class="data row1 col3" >16.1%</td>
    </tr>
    <tr>
      <th id="T_f59cb_level0_row2" class="row_heading level0 row2" >Total</th>
      <td id="T_f59cb_row2_col0" class="data row2 col0" >37,246	 (100.0%)</td>
      <td id="T_f59cb_row2_col1" class="data row2 col1" >7,624	 (100.0%)</td>
      <td id="T_f59cb_row2_col2" class="data row2 col2" >44,870	 (100.0%)</td>
      <td id="T_f59cb_row2_col3" class="data row2 col3" >17.0%</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">poptable</span><span class="o">.</span><span class="n">pop_results_table</span><span class="p">(</span><span class="n">pd_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pd_df</span><span class="p">[</span><span class="s1">&#39;placeNAME10&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;Galveston&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> 
                  <span class="n">who</span> <span class="o">=</span> <span class="s2">&quot;Total Population by Households&quot;</span><span class="p">,</span> 
                  <span class="n">what</span> <span class="o">=</span> <span class="s2">&quot;by Race, Ethnicity and Dislocation&quot;</span><span class="p">,</span>
                  <span class="n">where</span> <span class="o">=</span> <span class="s2">&quot;Galveston County TX&quot;</span><span class="p">,</span>
                  <span class="n">when</span> <span class="o">=</span> <span class="s2">&quot;2010&quot;</span><span class="p">,</span>
                  <span class="n">row_index</span> <span class="o">=</span> <span class="s2">&quot;Race Ethnicity&quot;</span><span class="p">,</span>
                  <span class="n">col_index</span> <span class="o">=</span> <span class="s1">&#39;Population Dislocation&#39;</span><span class="p">,</span>
                  <span class="n">row_percent</span> <span class="o">=</span> <span class="s1">&#39;1 Dislocates&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
#T_71e43 caption {
  text-align: center;
  caption-side: top;
  font-size: 150%;
}
</style>
<table id="T_71e43">
  <caption>Table. Total Population by Households by Race, Ethnicity and Dislocation, Galveston County TX, 2010.</caption>
  <thead>
    <tr>
      <th class="index_name level0" >Population Dislocation</th>
      <th id="T_71e43_level0_col0" class="col_heading level0 col0" >0 Does not dislocate (%)</th>
      <th id="T_71e43_level0_col1" class="col_heading level0 col1" >1 Dislocates (%)</th>
      <th id="T_71e43_level0_col2" class="col_heading level0 col2" >Total Population by Households (%)</th>
      <th id="T_71e43_level0_col3" class="col_heading level0 col3" >Percent Row 
1 Dislocates</th>
    </tr>
    <tr>
      <th class="index_name level0" >Race Ethnicity</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
      <th class="blank col3" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_71e43_level0_row0" class="row_heading level0 row0" >1 White alone, Not Hispanic</th>
      <td id="T_71e43_row0_col0" class="data row0 col0" >16,630	 (41.9%)</td>
      <td id="T_71e43_row0_col1" class="data row0 col1" >3,904	 (51.2%)</td>
      <td id="T_71e43_row0_col2" class="data row0 col2" >20,534	 (43.4%)</td>
      <td id="T_71e43_row0_col3" class="data row0 col3" >19.0%</td>
    </tr>
    <tr>
      <th id="T_71e43_level0_row1" class="row_heading level0 row1" >2 Black alone, Not Hispanic</th>
      <td id="T_71e43_row1_col0" class="data row1 col0" >6,848	 (17.2%)</td>
      <td id="T_71e43_row1_col1" class="data row1 col1" >1,247	 (16.4%)</td>
      <td id="T_71e43_row1_col2" class="data row1 col2" >8,095	 (17.1%)</td>
      <td id="T_71e43_row1_col3" class="data row1 col3" >15.4%</td>
    </tr>
    <tr>
      <th id="T_71e43_level0_row2" class="row_heading level0 row2" >3 American Indian and Alaska Native alone, Not Hispanic</th>
      <td id="T_71e43_row2_col0" class="data row2 col0" >152	 (0.4%)</td>
      <td id="T_71e43_row2_col1" class="data row2 col1" >39	 (0.5%)</td>
      <td id="T_71e43_row2_col2" class="data row2 col2" >191	 (0.4%)</td>
      <td id="T_71e43_row2_col3" class="data row2 col3" >20.4%</td>
    </tr>
    <tr>
      <th id="T_71e43_level0_row3" class="row_heading level0 row3" >4 Asian alone, Not Hispanic</th>
      <td id="T_71e43_row3_col0" class="data row3 col0" >1,168	 (2.9%)</td>
      <td id="T_71e43_row3_col1" class="data row3 col1" >221	 (2.9%)</td>
      <td id="T_71e43_row3_col2" class="data row3 col2" >1,389	 (2.9%)</td>
      <td id="T_71e43_row3_col3" class="data row3 col3" >15.9%</td>
    </tr>
    <tr>
      <th id="T_71e43_level0_row4" class="row_heading level0 row4" >5 Other Race, Not Hispanic</th>
      <td id="T_71e43_row4_col0" class="data row4 col0" >453	 (1.1%)</td>
      <td id="T_71e43_row4_col1" class="data row4 col1" >67	 (0.9%)</td>
      <td id="T_71e43_row4_col2" class="data row4 col2" >520	 (1.1%)</td>
      <td id="T_71e43_row4_col3" class="data row4 col3" >12.9%</td>
    </tr>
    <tr>
      <th id="T_71e43_level0_row5" class="row_heading level0 row5" >6 Any Race, Hispanic</th>
      <td id="T_71e43_row5_col0" class="data row5 col0" >11,995	 (30.2%)</td>
      <td id="T_71e43_row5_col1" class="data row5 col1" >2,146	 (28.1%)</td>
      <td id="T_71e43_row5_col2" class="data row5 col2" >14,141	 (29.9%)</td>
      <td id="T_71e43_row5_col3" class="data row5 col3" >15.2%</td>
    </tr>
    <tr>
      <th id="T_71e43_level0_row6" class="row_heading level0 row6" >7 Group Quarters no Race Ethnicity Data</th>
      <td id="T_71e43_row6_col0" class="data row6 col0" >2,464	 (6.2%)</td>
      <td id="T_71e43_row6_col1" class="data row6 col1" >nan	 (nan%)</td>
      <td id="T_71e43_row6_col2" class="data row6 col2" >2,464	 (5.2%)</td>
      <td id="T_71e43_row6_col3" class="data row6 col3" >nan%</td>
    </tr>
    <tr>
      <th id="T_71e43_level0_row7" class="row_heading level0 row7" >Total</th>
      <td id="T_71e43_row7_col0" class="data row7 col0" >39,710	 (100.0%)</td>
      <td id="T_71e43_row7_col1" class="data row7 col1" >7,624	 (100.0%)</td>
      <td id="T_71e43_row7_col2" class="data row7 col2" >47,334	 (100.0%)</td>
      <td id="T_71e43_row7_col3" class="data row7 col3" >16.1%</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add household income group categories for table</span>
<span class="c1"># Code will be added to next release of pop_results_table on pyincore-viz</span>
<span class="k">def</span> <span class="nf">add_label_cat_conditions_df</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">conditions</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Label Categorical Variable Values and add to dataframe.</span>
<span class="sd">    Use this function with values are based on conditions.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        df (obj): Pandas DataFrame object.</span>
<span class="sd">        conditions (dict): Dictionary of conditions for value labels.</span>
<span class="sd">    Returns:</span>
<span class="sd">        object: Pandas DataFrame object.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">cat_var</span> <span class="o">=</span> <span class="n">conditions</span><span class="p">[</span><span class="s1">&#39;cat_var&#39;</span><span class="p">][</span><span class="s1">&#39;variable_label&#39;</span><span class="p">]</span>

    <span class="n">df</span><span class="p">[</span><span class="n">cat_var</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;No Data&quot;</span>

    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">conditions</span><span class="p">[</span><span class="s1">&#39;condition_list&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">condition</span> <span class="o">=</span>  <span class="n">conditions</span><span class="p">[</span><span class="s1">&#39;condition_list&#39;</span><span class="p">][</span><span class="n">item</span><span class="p">][</span><span class="s1">&#39;condition&#39;</span><span class="p">]</span>
        <span class="n">value_label</span> <span class="o">=</span> <span class="n">conditions</span><span class="p">[</span><span class="s1">&#39;condition_list&#39;</span><span class="p">][</span><span class="n">item</span><span class="p">][</span><span class="s1">&#39;value_label&#39;</span><span class="p">]</span>
        <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="nb">eval</span><span class="p">(</span><span class="n">condition</span><span class="p">),</span> <span class="n">cat_var</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_label</span>

    <span class="c1"># Set variable to missing if no data- makes tables look nicer</span>
    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="n">cat_var</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;No Data&quot;</span><span class="p">),</span> 
        <span class="n">cat_var</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

    <span class="k">return</span> <span class="n">df</span>

<span class="k">def</span> <span class="nf">add_label_cat_values_df</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">valuelabels</span><span class="p">,</span> <span class="n">variable</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Label Categorical Variable Values and add to dataframe.</span>
<span class="sd">    Use this function with categorical values </span>
<span class="sd">    are integer values.</span>
<span class="sd">    Args:</span>
<span class="sd">        df (obj): Pandas DataFrame object.</span>
<span class="sd">        valuelabels (dict): Dictionary of value labels.</span>
<span class="sd">        variable (str): Variable to label.</span>
<span class="sd">    Returns:</span>
<span class="sd">        object: Pandas DataFrame object with new column that has value labels.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">variable</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">variable</span>  <span class="o">=</span> <span class="n">valuelabels</span><span class="p">[</span><span class="s1">&#39;categorical_variable&#39;</span><span class="p">][</span><span class="s1">&#39;variable&#39;</span><span class="p">]</span>
    <span class="n">variable_label</span> <span class="o">=</span> <span class="n">valuelabels</span><span class="p">[</span><span class="s1">&#39;categorical_variable&#39;</span><span class="p">][</span><span class="s1">&#39;variable_label&#39;</span><span class="p">]</span>

    <span class="n">df</span><span class="p">[</span><span class="n">variable_label</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;No Data&quot;</span>

    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">valuelabels</span><span class="p">[</span><span class="s1">&#39;value_list&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">value</span> <span class="o">=</span>  <span class="n">valuelabels</span><span class="p">[</span><span class="s1">&#39;value_list&#39;</span><span class="p">][</span><span class="n">item</span><span class="p">][</span><span class="s1">&#39;value&#39;</span><span class="p">]</span>
        <span class="n">value_label</span> <span class="o">=</span> <span class="n">valuelabels</span><span class="p">[</span><span class="s1">&#39;value_list&#39;</span><span class="p">][</span><span class="n">item</span><span class="p">][</span><span class="s1">&#39;value_label&#39;</span><span class="p">]</span>
        <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="n">variable</span><span class="p">]</span> <span class="o">==</span> <span class="n">value</span><span class="p">,</span> <span class="n">variable_label</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_label</span>

    <span class="c1"># Set variable to missing if no data- makes tables look nicer</span>
    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="n">variable_label</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;No Data&quot;</span><span class="p">),</span> 
        <span class="n">variable_label</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

    <span class="k">return</span> <span class="n">df</span>

<span class="n">hhinc_valuelabels</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;categorical_variable&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;variable&#39;</span> <span class="p">:</span> <span class="s1">&#39;hhinc&#39;</span><span class="p">,</span>
                                <span class="s1">&#39;variable_label&#39;</span> <span class="p">:</span> <span class="s1">&#39;Household Income Group&#39;</span><span class="p">,</span>
                                <span class="s1">&#39;notes&#39;</span> <span class="p">:</span> <span class="s1">&#39;5 Household Income Groups based on random income.&#39;</span><span class="p">},</span>
                    <span class="s1">&#39;value_list&#39;</span> <span class="p">:</span> <span class="p">{</span>
                        <span class="mi">1</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;value_label&#39;</span><span class="p">:</span> <span class="s2">&quot;1 Less than $15,000&quot;</span><span class="p">},</span>
                        <span class="mi">2</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;value_label&#39;</span><span class="p">:</span> <span class="s2">&quot;2 $15,000 to $24,999&quot;</span><span class="p">},</span>
                        <span class="mi">3</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;value_label&#39;</span><span class="p">:</span> <span class="s2">&quot;3 $25,000 to $74,999&quot;</span><span class="p">},</span>
                        <span class="mi">4</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;value_label&#39;</span><span class="p">:</span> <span class="s2">&quot;4 $75,000 to $99,999&quot;</span><span class="p">},</span>
                        <span class="mi">5</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;value_label&#39;</span><span class="p">:</span> <span class="s2">&quot;5 $100,000 or more&quot;</span><span class="p">}}</span>
                    <span class="p">}</span>

<span class="n">pd_df</span> <span class="o">=</span> <span class="n">add_label_cat_values_df</span><span class="p">(</span><span class="n">pd_df</span><span class="p">,</span> <span class="n">valuelabels</span> <span class="o">=</span> <span class="n">hhinc_valuelabels</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">poptable</span><span class="o">.</span><span class="n">pop_results_table</span><span class="p">(</span><span class="n">pd_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pd_df</span><span class="p">[</span><span class="s1">&#39;placeNAME10&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;Galveston&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
                  <span class="n">who</span> <span class="o">=</span> <span class="s2">&quot;Total Households&quot;</span><span class="p">,</span> 
                  <span class="n">what</span> <span class="o">=</span> <span class="s2">&quot;by Household Income Group and Dislocation&quot;</span><span class="p">,</span>
                  <span class="n">where</span> <span class="o">=</span> <span class="s2">&quot;Galveston Island TX&quot;</span><span class="p">,</span>
                  <span class="n">when</span> <span class="o">=</span> <span class="s2">&quot;2010&quot;</span><span class="p">,</span>
                  <span class="n">row_index</span> <span class="o">=</span> <span class="s2">&quot;Household Income Group&quot;</span><span class="p">,</span>
                  <span class="n">col_index</span> <span class="o">=</span> <span class="s1">&#39;Population Dislocation&#39;</span><span class="p">,</span>
                  <span class="n">row_percent</span> <span class="o">=</span> <span class="s1">&#39;1 Dislocates&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
#T_92678 caption {
  text-align: center;
  caption-side: top;
  font-size: 150%;
}
</style>
<table id="T_92678">
  <caption>Table. Total Households by Household Income Group and Dislocation, Galveston Island TX, 2010.</caption>
  <thead>
    <tr>
      <th class="index_name level0" >Population Dislocation</th>
      <th id="T_92678_level0_col0" class="col_heading level0 col0" >0 Does not dislocate (%)</th>
      <th id="T_92678_level0_col1" class="col_heading level0 col1" >1 Dislocates (%)</th>
      <th id="T_92678_level0_col2" class="col_heading level0 col2" >Total Households (%)</th>
      <th id="T_92678_level0_col3" class="col_heading level0 col3" >Percent Row 
1 Dislocates</th>
    </tr>
    <tr>
      <th class="index_name level0" >Household Income Group</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
      <th class="blank col3" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_92678_level0_row0" class="row_heading level0 row0" >1 Less than $15,000</th>
      <td id="T_92678_row0_col0" class="data row0 col0" >3,546	 (21.6%)</td>
      <td id="T_92678_row0_col1" class="data row0 col1" >682	 (19.7%)</td>
      <td id="T_92678_row0_col2" class="data row0 col2" >4,228	 (21.3%)</td>
      <td id="T_92678_row0_col3" class="data row0 col3" >16.1%</td>
    </tr>
    <tr>
      <th id="T_92678_level0_row1" class="row_heading level0 row1" >2 $15,000 to $24,999</th>
      <td id="T_92678_row1_col0" class="data row1 col0" >2,099	 (12.8%)</td>
      <td id="T_92678_row1_col1" class="data row1 col1" >411	 (11.9%)</td>
      <td id="T_92678_row1_col2" class="data row1 col2" >2,510	 (12.6%)</td>
      <td id="T_92678_row1_col3" class="data row1 col3" >16.4%</td>
    </tr>
    <tr>
      <th id="T_92678_level0_row2" class="row_heading level0 row2" >3 $25,000 to $74,999</th>
      <td id="T_92678_row2_col0" class="data row2 col0" >6,836	 (41.7%)</td>
      <td id="T_92678_row2_col1" class="data row2 col1" >1,474	 (42.6%)</td>
      <td id="T_92678_row2_col2" class="data row2 col2" >8,310	 (41.8%)</td>
      <td id="T_92678_row2_col3" class="data row2 col3" >17.7%</td>
    </tr>
    <tr>
      <th id="T_92678_level0_row3" class="row_heading level0 row3" >4 $75,000 to $99,999</th>
      <td id="T_92678_row3_col0" class="data row3 col0" >1,589	 (9.7%)</td>
      <td id="T_92678_row3_col1" class="data row3 col1" >344	 (9.9%)</td>
      <td id="T_92678_row3_col2" class="data row3 col2" >1,933	 (9.7%)</td>
      <td id="T_92678_row3_col3" class="data row3 col3" >17.8%</td>
    </tr>
    <tr>
      <th id="T_92678_level0_row4" class="row_heading level0 row4" >5 $100,000 or more</th>
      <td id="T_92678_row4_col0" class="data row4 col0" >2,329	 (14.2%)</td>
      <td id="T_92678_row4_col1" class="data row4 col1" >552	 (15.9%)</td>
      <td id="T_92678_row4_col2" class="data row4 col2" >2,881	 (14.5%)</td>
      <td id="T_92678_row4_col3" class="data row4 col3" >19.2%</td>
    </tr>
    <tr>
      <th id="T_92678_level0_row5" class="row_heading level0 row5" >Total</th>
      <td id="T_92678_row5_col0" class="data row5 col0" >16,399	 (100.0%)</td>
      <td id="T_92678_row5_col1" class="data row5 col1" >3,463	 (100.0%)</td>
      <td id="T_92678_row5_col2" class="data row5 col2" >19,862	 (100.0%)</td>
      <td id="T_92678_row5_col3" class="data row5 col3" >17.4%</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="d-4-explore-population-dislocation-and-building-damage-results">
<h3>3.d.4 Explore Population Dislocation and Building Damage Results<a class="headerlink" href="#d-4-explore-population-dislocation-and-building-damage-results" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds3_conditions</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;cat_var&#39;</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;variable_label&#39;</span> <span class="p">:</span> <span class="s1">&#39;Probability Complete Failure&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;notes&#39;</span> <span class="p">:</span> <span class="s1">&#39;Probability of complete failure based on damage state 3&#39;</span><span class="p">},</span>
              <span class="s1">&#39;condition_list&#39;</span> <span class="p">:</span> <span class="p">{</span>
                <span class="mi">1</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;condition&#39;</span><span class="p">:</span> <span class="s2">&quot;(df[&#39;DS_3&#39;] == 0)&quot;</span><span class="p">,</span> <span class="s1">&#39;value_label&#39;</span><span class="p">:</span> <span class="s2">&quot;0 0%&quot;</span><span class="p">},</span>
                <span class="mi">2</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;condition&#39;</span><span class="p">:</span> <span class="s2">&quot;(df[&#39;DS_3&#39;] &gt; 0)&quot;</span><span class="p">,</span> <span class="s1">&#39;value_label&#39;</span><span class="p">:</span> <span class="s2">&quot;1 Less than 20%&quot;</span><span class="p">},</span>
                <span class="mi">3</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;condition&#39;</span><span class="p">:</span> <span class="s2">&quot;(df[&#39;DS_3&#39;] &gt; .2)&quot;</span><span class="p">,</span> <span class="s1">&#39;value_label&#39;</span><span class="p">:</span> <span class="s2">&quot;2 20-40%&quot;</span><span class="p">},</span>
                <span class="mi">4</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;condition&#39;</span><span class="p">:</span> <span class="s2">&quot;(df[&#39;DS_3&#39;] &gt; .4)&quot;</span><span class="p">,</span> <span class="s1">&#39;value_label&#39;</span><span class="p">:</span> <span class="s2">&quot;3 40-60%&quot;</span><span class="p">},</span>
                <span class="mi">5</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;condition&#39;</span><span class="p">:</span> <span class="s2">&quot;(df[&#39;DS_3&#39;] &gt; .6)&quot;</span><span class="p">,</span> <span class="s1">&#39;value_label&#39;</span><span class="p">:</span> <span class="s2">&quot;4 60-80%&quot;</span><span class="p">},</span>
                <span class="mi">6</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;condition&#39;</span><span class="p">:</span> <span class="s2">&quot;(df[&#39;DS_3&#39;] &gt; .8)&quot;</span><span class="p">,</span> <span class="s1">&#39;value_label&#39;</span><span class="p">:</span> <span class="s2">&quot;5 80-100%&quot;</span><span class="p">},</span>
                <span class="mi">7</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;condition&#39;</span><span class="p">:</span> <span class="s2">&quot;(df[&#39;DS_3&#39;] == 1)&quot;</span><span class="p">,</span> <span class="s1">&#39;value_label&#39;</span><span class="p">:</span> <span class="s2">&quot;6 100%&quot;</span><span class="p">}}</span>
            <span class="p">}</span>

      
<span class="n">dsf_valuelabels</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;categorical_variable&#39;</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;variable&#39;</span> <span class="p">:</span> <span class="s1">&#39;d_sf&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;variable_label&#39;</span> <span class="p">:</span> <span class="s1">&#39;Single Family Dwelling&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;notes&#39;</span> <span class="p">:</span> <span class="s1">&#39;Categories for single family dwellings&#39;</span><span class="p">},</span>
              <span class="s1">&#39;value_list&#39;</span> <span class="p">:</span> <span class="p">{</span>
                <span class="mi">1</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;value_label&#39;</span><span class="p">:</span> <span class="s2">&quot;0 Not Single Family&quot;</span><span class="p">},</span>
                <span class="mi">2</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;value_label&#39;</span><span class="p">:</span> <span class="s2">&quot;1 Single Family&quot;</span><span class="p">}}</span>
            <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd_df</span> <span class="o">=</span> <span class="n">add_label_cat_conditions_df</span><span class="p">(</span><span class="n">pd_df</span><span class="p">,</span> <span class="n">conditions</span> <span class="o">=</span> <span class="n">ds3_conditions</span><span class="p">)</span>
<span class="n">pd_df</span> <span class="o">=</span> <span class="n">add_label_cat_values_df</span><span class="p">(</span><span class="n">pd_df</span><span class="p">,</span> <span class="n">valuelabels</span> <span class="o">=</span> <span class="n">dsf_valuelabels</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">poptable</span><span class="o">.</span><span class="n">pop_results_table</span><span class="p">(</span><span class="n">pd_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pd_df</span><span class="p">[</span><span class="s1">&#39;placeNAME10&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;Galveston&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> 
                  <span class="n">who</span> <span class="o">=</span> <span class="s2">&quot;Total Households&quot;</span><span class="p">,</span> 
                  <span class="n">what</span> <span class="o">=</span> <span class="s2">&quot;by Probability of Complete Failure and Dislocation&quot;</span><span class="p">,</span>
                  <span class="n">where</span> <span class="o">=</span> <span class="s2">&quot;Galveston Island TX&quot;</span><span class="p">,</span>
                  <span class="n">when</span> <span class="o">=</span> <span class="s2">&quot;2010&quot;</span><span class="p">,</span>
                  <span class="n">row_index</span> <span class="o">=</span> <span class="s1">&#39;Probability Complete Failure&#39;</span><span class="p">,</span>
                  <span class="n">col_index</span> <span class="o">=</span> <span class="s1">&#39;Population Dislocation&#39;</span><span class="p">,</span>
                  <span class="n">row_percent</span> <span class="o">=</span> <span class="s1">&#39;1 Dislocates&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
#T_1da01 caption {
  text-align: center;
  caption-side: top;
  font-size: 150%;
}
</style>
<table id="T_1da01">
  <caption>Table. Total Households by Probability of Complete Failure and Dislocation, Galveston Island TX, 2010.</caption>
  <thead>
    <tr>
      <th class="index_name level0" >Population Dislocation</th>
      <th id="T_1da01_level0_col0" class="col_heading level0 col0" >0 Does not dislocate (%)</th>
      <th id="T_1da01_level0_col1" class="col_heading level0 col1" >1 Dislocates (%)</th>
      <th id="T_1da01_level0_col2" class="col_heading level0 col2" >Total Households (%)</th>
      <th id="T_1da01_level0_col3" class="col_heading level0 col3" >Percent Row 
1 Dislocates</th>
    </tr>
    <tr>
      <th class="index_name level0" >Probability Complete Failure</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
      <th class="blank col3" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_1da01_level0_row0" class="row_heading level0 row0" >0 0%</th>
      <td id="T_1da01_row0_col0" class="data row0 col0" >7,541	 (30.1%)</td>
      <td id="T_1da01_row0_col1" class="data row0 col1" >171	 (2.6%)</td>
      <td id="T_1da01_row0_col2" class="data row0 col2" >7,712	 (24.4%)</td>
      <td id="T_1da01_row0_col3" class="data row0 col3" >2.2%</td>
    </tr>
    <tr>
      <th id="T_1da01_level0_row1" class="row_heading level0 row1" >1 Less than 20%</th>
      <td id="T_1da01_row1_col0" class="data row1 col0" >17,288	 (69.0%)</td>
      <td id="T_1da01_row1_col1" class="data row1 col1" >5,816	 (88.8%)</td>
      <td id="T_1da01_row1_col2" class="data row1 col2" >23,104	 (73.1%)</td>
      <td id="T_1da01_row1_col3" class="data row1 col3" >25.2%</td>
    </tr>
    <tr>
      <th id="T_1da01_level0_row2" class="row_heading level0 row2" >2 20-40%</th>
      <td id="T_1da01_row2_col0" class="data row2 col0" >64	 (0.3%)</td>
      <td id="T_1da01_row2_col1" class="data row2 col1" >88	 (1.3%)</td>
      <td id="T_1da01_row2_col2" class="data row2 col2" >152	 (0.5%)</td>
      <td id="T_1da01_row2_col3" class="data row2 col3" >57.9%</td>
    </tr>
    <tr>
      <th id="T_1da01_level0_row3" class="row_heading level0 row3" >3 40-60%</th>
      <td id="T_1da01_row3_col0" class="data row3 col0" >88	 (0.4%)</td>
      <td id="T_1da01_row3_col1" class="data row3 col1" >168	 (2.6%)</td>
      <td id="T_1da01_row3_col2" class="data row3 col2" >256	 (0.8%)</td>
      <td id="T_1da01_row3_col3" class="data row3 col3" >65.6%</td>
    </tr>
    <tr>
      <th id="T_1da01_level0_row4" class="row_heading level0 row4" >4 60-80%</th>
      <td id="T_1da01_row4_col0" class="data row4 col0" >31	 (0.1%)</td>
      <td id="T_1da01_row4_col1" class="data row4 col1" >97	 (1.5%)</td>
      <td id="T_1da01_row4_col2" class="data row4 col2" >128	 (0.4%)</td>
      <td id="T_1da01_row4_col3" class="data row4 col3" >75.8%</td>
    </tr>
    <tr>
      <th id="T_1da01_level0_row5" class="row_heading level0 row5" >5 80-100%</th>
      <td id="T_1da01_row5_col0" class="data row5 col0" >52	 (0.2%)</td>
      <td id="T_1da01_row5_col1" class="data row5 col1" >210	 (3.2%)</td>
      <td id="T_1da01_row5_col2" class="data row5 col2" >262	 (0.8%)</td>
      <td id="T_1da01_row5_col3" class="data row5 col3" >80.2%</td>
    </tr>
    <tr>
      <th id="T_1da01_level0_row6" class="row_heading level0 row6" >Total</th>
      <td id="T_1da01_row6_col0" class="data row6 col0" >25,064	 (100.0%)</td>
      <td id="T_1da01_row6_col1" class="data row6 col1" >6,550	 (100.0%)</td>
      <td id="T_1da01_row6_col2" class="data row6 col2" >31,614	 (100.0%)</td>
      <td id="T_1da01_row6_col3" class="data row6 col3" >20.7%</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">poptable</span><span class="o">.</span><span class="n">pop_results_table</span><span class="p">(</span><span class="n">pd_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">pd_df</span><span class="p">[</span><span class="s1">&#39;DS_3&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">.8</span><span class="p">)</span> <span class="o">&amp;</span>
                                     <span class="p">(</span><span class="n">pd_df</span><span class="p">[</span><span class="s1">&#39;placeNAME10&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;Galveston&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
                  <span class="n">who</span> <span class="o">=</span> <span class="s2">&quot;Total Population by Households&quot;</span><span class="p">,</span> 
                  <span class="n">what</span> <span class="o">=</span> <span class="s2">&quot;for High Damaged Structures by Single Family Dwelling&quot;</span><span class="p">,</span>
                  <span class="n">where</span> <span class="o">=</span> <span class="s2">&quot;Galveston Island TX&quot;</span><span class="p">,</span>
                  <span class="n">when</span> <span class="o">=</span> <span class="s2">&quot;2010&quot;</span><span class="p">,</span>
                  <span class="n">row_index</span> <span class="o">=</span> <span class="s1">&#39;Single Family Dwelling&#39;</span><span class="p">,</span>
                  <span class="n">col_index</span> <span class="o">=</span> <span class="s1">&#39;Population Dislocation&#39;</span><span class="p">,</span>
                  <span class="n">row_percent</span> <span class="o">=</span> <span class="s1">&#39;0 Does not dislocate&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
#T_fa39d caption {
  text-align: center;
  caption-side: top;
  font-size: 150%;
}
</style>
<table id="T_fa39d">
  <caption>Table. Total Population by Households for High Damaged Structures by Single Family Dwelling, Galveston Island TX, 2010.</caption>
  <thead>
    <tr>
      <th class="index_name level0" >Population Dislocation</th>
      <th id="T_fa39d_level0_col0" class="col_heading level0 col0" >0 Does not dislocate (%)</th>
      <th id="T_fa39d_level0_col1" class="col_heading level0 col1" >1 Dislocates (%)</th>
      <th id="T_fa39d_level0_col2" class="col_heading level0 col2" >Total Population by Households (%)</th>
      <th id="T_fa39d_level0_col3" class="col_heading level0 col3" >Percent Row 
0 Does not dislocate</th>
    </tr>
    <tr>
      <th class="index_name level0" >Single Family Dwelling</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
      <th class="blank col3" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_fa39d_level0_row0" class="row_heading level0 row0" >0 Not Single Family</th>
      <td id="T_fa39d_row0_col0" class="data row0 col0" >21	 (91.3%)</td>
      <td id="T_fa39d_row0_col1" class="data row0 col1" >51	 (85.0%)</td>
      <td id="T_fa39d_row0_col2" class="data row0 col2" >72	 (86.7%)</td>
      <td id="T_fa39d_row0_col3" class="data row0 col3" >29.2%</td>
    </tr>
    <tr>
      <th id="T_fa39d_level0_row1" class="row_heading level0 row1" >1 Single Family</th>
      <td id="T_fa39d_row1_col0" class="data row1 col0" >2	 (8.7%)</td>
      <td id="T_fa39d_row1_col1" class="data row1 col1" >9	 (15.0%)</td>
      <td id="T_fa39d_row1_col2" class="data row1 col2" >11	 (13.3%)</td>
      <td id="T_fa39d_row1_col3" class="data row1 col3" >18.2%</td>
    </tr>
    <tr>
      <th id="T_fa39d_level0_row2" class="row_heading level0 row2" >Total</th>
      <td id="T_fa39d_row2_col0" class="data row2 col0" >23	 (100.0%)</td>
      <td id="T_fa39d_row2_col1" class="data row2 col1" >60	 (100.0%)</td>
      <td id="T_fa39d_row2_col2" class="data row2 col2" >83	 (100.0%)</td>
      <td id="T_fa39d_row2_col3" class="data row2 col3" >27.7%</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">poptable</span><span class="o">.</span><span class="n">pop_results_table</span><span class="p">(</span><span class="n">pd_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">pd_df</span><span class="p">[</span><span class="s1">&#39;DS_3&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">.8</span><span class="p">)</span> <span class="o">&amp;</span>
                                     <span class="p">(</span><span class="n">pd_df</span><span class="p">[</span><span class="s1">&#39;placeNAME10&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;Galveston&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
                  <span class="n">who</span> <span class="o">=</span> <span class="s2">&quot;Total Population by Households&quot;</span><span class="p">,</span> 
                  <span class="n">what</span> <span class="o">=</span> <span class="s2">&quot;for High Damaged Structures by Race Ethnicity&quot;</span><span class="p">,</span>
                  <span class="n">where</span> <span class="o">=</span> <span class="s2">&quot;Galveston Island TX&quot;</span><span class="p">,</span>
                  <span class="n">when</span> <span class="o">=</span> <span class="s2">&quot;2010&quot;</span><span class="p">,</span>
                  <span class="n">row_index</span> <span class="o">=</span> <span class="s1">&#39;Race Ethnicity&#39;</span><span class="p">,</span>
                  <span class="n">col_index</span> <span class="o">=</span> <span class="s1">&#39;Population Dislocation&#39;</span><span class="p">,</span>
                  <span class="n">row_percent</span> <span class="o">=</span> <span class="s1">&#39;0 Does not dislocate&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
#T_ba27b caption {
  text-align: center;
  caption-side: top;
  font-size: 150%;
}
</style>
<table id="T_ba27b">
  <caption>Table. Total Population by Households for High Damaged Structures by Race Ethnicity, Galveston Island TX, 2010.</caption>
  <thead>
    <tr>
      <th class="index_name level0" >Population Dislocation</th>
      <th id="T_ba27b_level0_col0" class="col_heading level0 col0" >0 Does not dislocate (%)</th>
      <th id="T_ba27b_level0_col1" class="col_heading level0 col1" >1 Dislocates (%)</th>
      <th id="T_ba27b_level0_col2" class="col_heading level0 col2" >Total Population by Households (%)</th>
      <th id="T_ba27b_level0_col3" class="col_heading level0 col3" >Percent Row 
0 Does not dislocate</th>
    </tr>
    <tr>
      <th class="index_name level0" >Race Ethnicity</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
      <th class="blank col3" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_ba27b_level0_row0" class="row_heading level0 row0" >1 White alone, Not Hispanic</th>
      <td id="T_ba27b_row0_col0" class="data row0 col0" >15	 (65.2%)</td>
      <td id="T_ba27b_row0_col1" class="data row0 col1" >56	 (93.3%)</td>
      <td id="T_ba27b_row0_col2" class="data row0 col2" >71	 (85.5%)</td>
      <td id="T_ba27b_row0_col3" class="data row0 col3" >21.1%</td>
    </tr>
    <tr>
      <th id="T_ba27b_level0_row1" class="row_heading level0 row1" >3 American Indian and Alaska Native alone, Not Hispanic</th>
      <td id="T_ba27b_row1_col0" class="data row1 col0" >nan	 (nan%)</td>
      <td id="T_ba27b_row1_col1" class="data row1 col1" >3	 (5.0%)</td>
      <td id="T_ba27b_row1_col2" class="data row1 col2" >3	 (3.6%)</td>
      <td id="T_ba27b_row1_col3" class="data row1 col3" >nan%</td>
    </tr>
    <tr>
      <th id="T_ba27b_level0_row2" class="row_heading level0 row2" >4 Asian alone, Not Hispanic</th>
      <td id="T_ba27b_row2_col0" class="data row2 col0" >3	 (13.0%)</td>
      <td id="T_ba27b_row2_col1" class="data row2 col1" >nan	 (nan%)</td>
      <td id="T_ba27b_row2_col2" class="data row2 col2" >3	 (3.6%)</td>
      <td id="T_ba27b_row2_col3" class="data row2 col3" >100.0%</td>
    </tr>
    <tr>
      <th id="T_ba27b_level0_row3" class="row_heading level0 row3" >6 Any Race, Hispanic</th>
      <td id="T_ba27b_row3_col0" class="data row3 col0" >nan	 (nan%)</td>
      <td id="T_ba27b_row3_col1" class="data row3 col1" >1	 (1.7%)</td>
      <td id="T_ba27b_row3_col2" class="data row3 col2" >1	 (1.2%)</td>
      <td id="T_ba27b_row3_col3" class="data row3 col3" >nan%</td>
    </tr>
    <tr>
      <th id="T_ba27b_level0_row4" class="row_heading level0 row4" >7 Group Quarters no Race Ethnicity Data</th>
      <td id="T_ba27b_row4_col0" class="data row4 col0" >5	 (21.7%)</td>
      <td id="T_ba27b_row4_col1" class="data row4 col1" >nan	 (nan%)</td>
      <td id="T_ba27b_row4_col2" class="data row4 col2" >5	 (6.0%)</td>
      <td id="T_ba27b_row4_col3" class="data row4 col3" >100.0%</td>
    </tr>
    <tr>
      <th id="T_ba27b_level0_row5" class="row_heading level0 row5" >Total</th>
      <td id="T_ba27b_row5_col0" class="data row5 col0" >23	 (100.0%)</td>
      <td id="T_ba27b_row5_col1" class="data row5 col1" >60	 (100.0%)</td>
      <td id="T_ba27b_row5_col2" class="data row5 col2" >83	 (100.0%)</td>
      <td id="T_ba27b_row5_col3" class="data row5 col3" >27.7%</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="recovery">
<h1>4) Recovery<a class="headerlink" href="#recovery" title="Permalink to this heading">#</a></h1>
<p><img alt="Recovery.png" src="notebooks/extra_notebooks/attachment:Recovery.png" /></p>
<ul class="simple">
<li><p><strong>j</strong> is the index for time</p></li>
<li><p><strong>m</strong> is the community lifetime</p></li>
<li><p><strong>K</strong> is the index for policy levers and decision combinations (PD)</p></li>
</ul>
<section id="household-level-housing-recovery-analysis">
<h2>4.1 Household-Level Housing Recovery Analysis<a class="headerlink" href="#household-level-housing-recovery-analysis" title="Permalink to this heading">#</a></h2>
<p>The Household-Level Housing Recovery (HHHR) model developed by Sutley and Hamideh (2020) is used to simulate the housing recovery process of dislocated households.</p>
<p>The computation operates by segregating household units into five zones as a way of assigning social vulnerability. Then, using this vulnerability in conjunction with the Transition Probability Matrix (TPM) and the initial state vector, a Markov chain computation simulates the most probable states to generate a stage history of housing recovery changes for each household. The detailed process of the HHHR model can be found in Sutley and Hamideh (2020).</p>
<blockquote>
<div><p>Sutley, E.J. and Hamideh, S., 2020. Postdisaster housing stages: a Markov chain approach to model sequences and duration based on social vulnerability. Risk Analysis, 40(12), pp.2675-2695.</p>
</div></blockquote>
<p>The Markov chain model consists of five discrete states at any time throughout the housing recovery process. The five discrete states represent stages in the household housing recovery process, including emergency shelter (1), temporary shelter (2); temporary housing (3); permanent housing (4), and failure to recover (5). The model assumes that a household can be in any of the first four stages immediately after a disaster. If the household reported not being dislocated, household will begin in stage 4.</p>
</section>
<section id="set-up-and-run-household-level-housing-sequential-recovery">
<h2>4.2 Set Up and Run Household-level Housing Sequential Recovery<a class="headerlink" href="#set-up-and-run-household-level-housing-sequential-recovery" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Parameters</span>
<span class="n">state</span> <span class="o">=</span> <span class="s2">&quot;texas&quot;</span>
<span class="n">county</span> <span class="o">=</span> <span class="s2">&quot;galveston&quot;</span>
<span class="n">year</span> <span class="o">=</span> <span class="mi">2020</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># get fips code to use fetch census data</span>
<span class="n">fips</span> <span class="o">=</span> <span class="n">CensusUtil</span><span class="o">.</span><span class="n">get_fips_by_state_county</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="n">state</span><span class="p">,</span> <span class="n">county</span><span class="o">=</span><span class="n">county</span><span class="p">)</span>
<span class="n">state_code</span> <span class="o">=</span> <span class="n">fips</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
<span class="n">county_code</span> <span class="o">=</span> <span class="n">fips</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">demographic_factors</span><span class="p">(</span><span class="n">state_number</span><span class="p">,</span> <span class="n">county_number</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">geo_type</span><span class="o">=</span><span class="s2">&quot;tract:*&quot;</span><span class="p">):</span>

    <span class="n">_</span><span class="p">,</span> <span class="n">df_1</span> <span class="o">=</span> <span class="n">CensusUtil</span><span class="o">.</span><span class="n">get_census_data</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="n">state_code</span><span class="p">,</span> <span class="n">county</span><span class="o">=</span><span class="n">county_code</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">,</span>
                                                              <span class="n">data_source</span><span class="o">=</span><span class="s2">&quot;acs/acs5&quot;</span><span class="p">,</span>
                                                              <span class="n">columns</span><span class="o">=</span><span class="s2">&quot;GEO_ID,B03002_001E,B03002_003E&quot;</span><span class="p">,</span>
                                                              <span class="n">geo_type</span><span class="o">=</span><span class="n">geo_type</span><span class="p">)</span>
    <span class="n">df_1</span><span class="p">[</span><span class="s2">&quot;factor_white_nonHispanic&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_1</span><span class="p">[[</span><span class="s2">&quot;B03002_001E&quot;</span><span class="p">,</span><span class="s2">&quot;B03002_003E&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;B03002_003E&quot;</span><span class="p">]</span><span class="o">/</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;B03002_001E&quot;</span><span class="p">],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>

    <span class="n">_</span><span class="p">,</span> <span class="n">df_2</span> <span class="o">=</span> <span class="n">CensusUtil</span><span class="o">.</span><span class="n">get_census_data</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="n">state_code</span><span class="p">,</span> <span class="n">county</span><span class="o">=</span><span class="n">county_code</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">,</span>
                                                  <span class="n">data_source</span><span class="o">=</span><span class="s2">&quot;acs/acs5&quot;</span><span class="p">,</span>
                                                  <span class="n">columns</span><span class="o">=</span><span class="s2">&quot;B25003_001E,B25003_002E&quot;</span><span class="p">,</span>
                                                  <span class="n">geo_type</span><span class="o">=</span><span class="n">geo_type</span><span class="p">)</span>
    <span class="n">df_2</span><span class="p">[</span><span class="s2">&quot;factor_owner_occupied&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_2</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;B25003_002E&quot;</span><span class="p">]</span><span class="o">/</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;B25003_001E&quot;</span><span class="p">],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
    
    <span class="n">_</span><span class="p">,</span> <span class="n">df_3</span> <span class="o">=</span> <span class="n">CensusUtil</span><span class="o">.</span><span class="n">get_census_data</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="n">state_code</span><span class="p">,</span> 
                                         <span class="n">county</span><span class="o">=</span><span class="n">county_code</span><span class="p">,</span> 
                                         <span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">,</span>
                                         <span class="n">data_source</span><span class="o">=</span><span class="s2">&quot;acs/acs5&quot;</span><span class="p">,</span>
                                         <span class="n">columns</span><span class="o">=</span><span class="s2">&quot;B17021_001E,B17021_002E&quot;</span><span class="p">,</span>
                                         <span class="n">geo_type</span><span class="o">=</span><span class="n">geo_type</span><span class="p">)</span>
    <span class="n">df_3</span><span class="p">[</span><span class="s2">&quot;factor_earning_higher_than_national_poverty_rate&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_3</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="mi">1</span><span class="o">-</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;B17021_002E&quot;</span><span class="p">]</span><span class="o">/</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;B17021_001E&quot;</span><span class="p">],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
    
    <span class="n">_</span><span class="p">,</span> <span class="n">df_4</span> <span class="o">=</span> <span class="n">CensusUtil</span><span class="o">.</span><span class="n">get_census_data</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="n">state_code</span><span class="p">,</span> 
                                         <span class="n">county</span><span class="o">=</span><span class="n">county_code</span><span class="p">,</span> 
                                         <span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">,</span>
                                         <span class="n">data_source</span><span class="o">=</span><span class="s2">&quot;acs/acs5&quot;</span><span class="p">,</span> 
                                         <span class="n">columns</span><span class="o">=</span><span class="s2">&quot;B15003_001E,B15003_017E,B15003_018E,B15003_019E,B15003_020E,B15003_021E,B15003_022E,B15003_023E,B15003_024E,B15003_025E&quot;</span><span class="p">,</span>
                                         <span class="n">geo_type</span><span class="o">=</span><span class="n">geo_type</span><span class="p">)</span>
    <span class="n">df_4</span><span class="p">[</span><span class="s2">&quot;factor_over_25_with_high_school_diploma_or_higher&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_4</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;B15003_017E&quot;</span><span class="p">]</span> 
                                                                                                    <span class="o">+</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;B15003_018E&quot;</span><span class="p">]</span> 
                                                                                                    <span class="o">+</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;B15003_019E&quot;</span><span class="p">]</span> 
                                                                                                    <span class="o">+</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;B15003_020E&quot;</span><span class="p">]</span> 
                                                                                                    <span class="o">+</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;B15003_021E&quot;</span><span class="p">]</span> 
                                                                                                    <span class="o">+</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;B15003_022E&quot;</span><span class="p">]</span> 
                                                                                                    <span class="o">+</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;B15003_023E&quot;</span><span class="p">]</span> 
                                                                                                    <span class="o">+</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;B15003_024E&quot;</span><span class="p">]</span> 
                                                                                                    <span class="o">+</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;B15003_025E&quot;</span><span class="p">])</span><span class="o">/</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;B15003_001E&quot;</span><span class="p">],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">geo_type</span> <span class="o">==</span> <span class="s1">&#39;tract:*&#39;</span><span class="p">:</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">df_5</span> <span class="o">=</span> <span class="n">CensusUtil</span><span class="o">.</span><span class="n">get_census_data</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="n">state_code</span><span class="p">,</span> 
                                             <span class="n">county</span><span class="o">=</span><span class="n">county_code</span><span class="p">,</span> 
                                             <span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">,</span>
                                             <span class="n">data_source</span><span class="o">=</span><span class="s2">&quot;acs/acs5&quot;</span><span class="p">,</span>
                                             <span class="n">columns</span><span class="o">=</span><span class="s2">&quot;B18101_001E,B18101_011E,B18101_014E,B18101_030E,B18101_033E&quot;</span><span class="p">,</span>
                                             <span class="n">geo_type</span><span class="o">=</span><span class="n">geo_type</span><span class="p">)</span>
        <span class="n">df_5</span><span class="p">[</span><span class="s2">&quot;factor_without_disability_age_18_to_65&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_5</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;B18101_011E&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;B18101_014E&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;B18101_030E&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;B18101_033E&quot;</span><span class="p">])</span><span class="o">/</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;B18101_001E&quot;</span><span class="p">],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
    
    <span class="k">elif</span> <span class="n">geo_type</span> <span class="o">==</span> <span class="s1">&#39;block</span><span class="si">%20g</span><span class="s1">roup:*&#39;</span><span class="p">:</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">df_5</span> <span class="o">=</span> <span class="n">CensusUtil</span><span class="o">.</span><span class="n">get_census_data</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="n">state_code</span><span class="p">,</span> 
                                             <span class="n">county</span><span class="o">=</span><span class="n">county_code</span><span class="p">,</span> 
                                             <span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">,</span>
                                             <span class="n">data_source</span><span class="o">=</span><span class="s2">&quot;acs/acs5&quot;</span><span class="p">,</span>
                                             <span class="n">columns</span><span class="o">=</span><span class="s2">&quot;B01003_001E,C21007_006E,C21007_009E,C21007_013E,C21007_016E&quot;</span><span class="p">,</span>
                                             <span class="n">geo_type</span><span class="o">=</span><span class="n">geo_type</span><span class="p">)</span>

        <span class="n">df_5</span><span class="p">[</span><span class="s1">&#39;factor_without_disability_age_18_to_65&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_5</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;C21007_006E&#39;</span><span class="p">]</span><span class="o">+</span>
                                                                                 <span class="n">row</span><span class="p">[</span><span class="s1">&#39;C21007_006E&#39;</span><span class="p">]</span><span class="o">+</span>
                                                                                 <span class="n">row</span><span class="p">[</span><span class="s1">&#39;C21007_009E&#39;</span><span class="p">]</span><span class="o">+</span>
                                                                                 <span class="n">row</span><span class="p">[</span><span class="s1">&#39;C21007_013E&#39;</span><span class="p">])</span>
                                                                                <span class="o">/</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;C21007_016E&#39;</span><span class="p">],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>

    <span class="n">df_t</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df_1</span><span class="p">[[</span><span class="s2">&quot;GEO_ID&quot;</span><span class="p">,</span><span class="s2">&quot;factor_white_nonHispanic&quot;</span><span class="p">]],</span>
                      <span class="n">df_2</span><span class="p">[</span><span class="s2">&quot;factor_owner_occupied&quot;</span><span class="p">],</span>
                      <span class="n">df_3</span><span class="p">[</span><span class="s2">&quot;factor_earning_higher_than_national_poverty_rate&quot;</span><span class="p">],</span> 
                      <span class="n">df_4</span><span class="p">[</span><span class="s2">&quot;factor_over_25_with_high_school_diploma_or_higher&quot;</span><span class="p">],</span>
                      <span class="n">df_5</span><span class="p">[</span><span class="s2">&quot;factor_without_disability_age_18_to_65&quot;</span><span class="p">]],</span> 
                     <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">join</span><span class="o">=</span><span class="s1">&#39;inner&#39;</span><span class="p">)</span>
    
    <span class="c1"># extract FIPS from geo id</span>
    <span class="n">df_t</span><span class="p">[</span><span class="s2">&quot;FIPS&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_t</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;GEO_ID&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;US&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
        
    <span class="k">return</span> <span class="n">df_t</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">national_ave_values</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">data_source</span><span class="o">=</span><span class="s2">&quot;acs/acs5&quot;</span><span class="p">):</span>
    <span class="n">_</span><span class="p">,</span> <span class="n">nav1</span> <span class="o">=</span> <span class="n">CensusUtil</span><span class="o">.</span><span class="n">get_census_data</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="n">county</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">,</span> <span class="n">data_source</span><span class="o">=</span><span class="n">data_source</span><span class="p">,</span>
                             <span class="n">columns</span><span class="o">=</span><span class="s2">&quot;B03002_001E,B03002_003E&quot;</span><span class="p">,</span><span class="n">geo_type</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">nav1</span> <span class="o">=</span> <span class="n">nav1</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">nav1_avg</span> <span class="o">=</span><span class="p">{</span><span class="s2">&quot;feature&quot;</span><span class="p">:</span> <span class="s2">&quot;NAV-1: White, nonHispanic&quot;</span><span class="p">,</span> 
                <span class="s2">&quot;average&quot;</span><span class="p">:</span> <span class="n">nav1</span><span class="p">[</span><span class="s1">&#39;B03002_003E&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">/</span> <span class="n">nav1</span><span class="p">[</span><span class="s1">&#39;B03002_001E&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()}</span>

    <span class="n">_</span><span class="p">,</span> <span class="n">nav2</span> <span class="o">=</span> <span class="n">CensusUtil</span><span class="o">.</span><span class="n">get_census_data</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="n">county</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">,</span> <span class="n">data_source</span><span class="o">=</span><span class="n">data_source</span><span class="p">,</span>
                             <span class="n">columns</span><span class="o">=</span><span class="s2">&quot;B25003_001E,B25003_002E&quot;</span><span class="p">,</span><span class="n">geo_type</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">nav2</span> <span class="o">=</span> <span class="n">nav2</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">nav2_avg</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;feature&quot;</span><span class="p">:</span> <span class="s2">&quot;NAV-2: Home Owners&quot;</span><span class="p">,</span> 
                <span class="s2">&quot;average&quot;</span><span class="p">:</span> <span class="n">nav2</span><span class="p">[</span><span class="s1">&#39;B25003_002E&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">/</span><span class="n">nav2</span><span class="p">[</span><span class="s1">&#39;B25003_001E&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()}</span>

    <span class="n">_</span><span class="p">,</span> <span class="n">nav3</span> <span class="o">=</span> <span class="n">CensusUtil</span><span class="o">.</span><span class="n">get_census_data</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="n">county</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">,</span> <span class="n">data_source</span><span class="o">=</span><span class="n">data_source</span><span class="p">,</span>
                             <span class="n">columns</span><span class="o">=</span><span class="s2">&quot;B17021_001E,B17021_002E&quot;</span><span class="p">,</span><span class="n">geo_type</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">nav3</span> <span class="o">=</span> <span class="n">nav3</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">nav3_avg</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;feature&quot;</span><span class="p">:</span> <span class="s2">&quot;NAV-3: earning higher than national poverty rate&quot;</span><span class="p">,</span> 
                <span class="s2">&quot;average&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="o">-</span><span class="n">nav3</span><span class="p">[</span><span class="s1">&#39;B17021_002E&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">/</span><span class="n">nav3</span><span class="p">[</span><span class="s1">&#39;B17021_001E&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()}</span>

    <span class="n">_</span><span class="p">,</span> <span class="n">nav4</span> <span class="o">=</span> <span class="n">CensusUtil</span><span class="o">.</span><span class="n">get_census_data</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> 
                                         <span class="n">county</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
                                         <span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">,</span>
                                         <span class="n">data_source</span><span class="o">=</span><span class="s2">&quot;acs/acs5&quot;</span><span class="p">,</span>
                                         <span class="n">columns</span><span class="o">=</span><span class="s2">&quot;B15003_001E,B15003_017E,B15003_018E,B15003_019E,B15003_020E,B15003_021E,B15003_022E,B15003_023E,B15003_024E,B15003_025E&quot;</span><span class="p">,</span>
                                         <span class="n">geo_type</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">nav4</span> <span class="o">=</span> <span class="n">nav4</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">nav4</span><span class="p">[</span><span class="s1">&#39;temp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nav4</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;B15003_017E&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;B15003_018E&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;B15003_019E&#39;</span><span class="p">]</span><span class="o">+</span>
                              <span class="n">row</span><span class="p">[</span><span class="s1">&#39;B15003_020E&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;B15003_021E&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;B15003_022E&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;B15003_023E&#39;</span><span class="p">]</span><span class="o">+</span>
                              <span class="n">row</span><span class="p">[</span><span class="s1">&#39;B15003_024E&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;B15003_025E&#39;</span><span class="p">],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">nav4_avg</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;feature&quot;</span><span class="p">:</span> <span class="s1">&#39;NAV-4: over 25 with high school diploma or higher&#39;</span><span class="p">,</span> 
                <span class="s2">&quot;average&quot;</span><span class="p">:</span> <span class="n">nav4</span><span class="p">[</span><span class="s1">&#39;temp&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">/</span><span class="n">nav4</span><span class="p">[</span><span class="s1">&#39;B15003_001E&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()}</span>

    <span class="n">_</span><span class="p">,</span> <span class="n">nav5</span> <span class="o">=</span> <span class="n">CensusUtil</span><span class="o">.</span><span class="n">get_census_data</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="n">county</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">,</span> <span class="n">data_source</span><span class="o">=</span><span class="n">data_source</span><span class="p">,</span>
                             <span class="n">columns</span><span class="o">=</span><span class="s2">&quot;B18101_001E,B18101_011E,B18101_014E,B18101_030E,B18101_033E&quot;</span><span class="p">,</span>
                                         <span class="n">geo_type</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">nav5</span> <span class="o">=</span> <span class="n">nav5</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">nav5</span><span class="p">[</span><span class="s1">&#39;temp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nav5</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;B18101_011E&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;B18101_014E&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;B18101_030E&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;B18101_033E&#39;</span><span class="p">],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">nav5_avg</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;feature&quot;</span><span class="p">:</span> <span class="s1">&#39;NAV-5: without disability age 18 to 65&#39;</span><span class="p">,</span> 
                <span class="s2">&quot;average&quot;</span><span class="p">:</span> <span class="n">nav5</span><span class="p">[</span><span class="s2">&quot;temp&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">/</span><span class="n">nav5</span><span class="p">[</span><span class="s2">&quot;B18101_001E&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()}</span>
    
    <span class="n">navs</span> <span class="o">=</span> <span class="p">[</span><span class="n">nav1_avg</span><span class="p">,</span> <span class="n">nav2_avg</span><span class="p">,</span> <span class="n">nav3_avg</span><span class="p">,</span> <span class="n">nav4_avg</span><span class="p">,</span> <span class="n">nav5_avg</span><span class="p">]</span>
    
    <span class="k">return</span> <span class="n">navs</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">navs</span> <span class="o">=</span> <span class="n">national_ave_values</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">)</span>
<span class="n">national_vulnerability_feature_averages</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">from_csv_data</span><span class="p">(</span><span class="n">navs</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;national_vulnerability_feature_averages.csv&quot;</span><span class="p">,</span>
                                                                 <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;incore:socialVulnerabilityFeatureAverages&quot;</span><span class="p">)</span>

<span class="n">geo_type</span> <span class="o">=</span> <span class="s2">&quot;block</span><span class="si">%20g</span><span class="s2">roup:*&quot;</span>
<span class="c1"># geo_type = &quot;tract:*&quot;</span>
<span class="n">social_vunlnerability_dem_factors_df</span> <span class="o">=</span> <span class="n">demographic_factors</span><span class="p">(</span><span class="n">state_code</span><span class="p">,</span> <span class="n">county_code</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">,</span> <span class="n">geo_type</span><span class="o">=</span><span class="n">geo_type</span><span class="p">)</span>

<span class="c1"># Temp fix: remove bad data point</span>
<span class="n">social_vunlnerability_dem_factors_df</span> <span class="o">=</span> <span class="n">social_vunlnerability_dem_factors_df</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

<span class="n">social_vunlnerability_dem_factors</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">from_dataframe</span><span class="p">(</span><span class="n">social_vunlnerability_dem_factors_df</span><span class="p">,</span> 
                                                           <span class="n">name</span><span class="o">=</span><span class="s2">&quot;social_vunlnerability_dem_factors&quot;</span><span class="p">,</span>
                                                           <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;incore:socialVulnerabilityDemFactors&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">social_vulnerability</span> <span class="o">=</span> <span class="n">SocialVulnerability</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>

<span class="n">social_vulnerability</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;result_name&quot;</span><span class="p">,</span> <span class="s2">&quot;social_vulnerabilty&quot;</span><span class="p">)</span>
<span class="n">social_vulnerability</span><span class="o">.</span><span class="n">set_input_dataset</span><span class="p">(</span><span class="s2">&quot;national_vulnerability_feature_averages&quot;</span><span class="p">,</span> <span class="n">national_vulnerability_feature_averages</span><span class="p">)</span>
<span class="n">social_vulnerability</span><span class="o">.</span><span class="n">set_input_dataset</span><span class="p">(</span><span class="s2">&quot;social_vulnerability_demographic_factors&quot;</span><span class="p">,</span> <span class="n">social_vunlnerability_dem_factors</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run social vulnerability damage analysis</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">social_vulnerability</span><span class="o">.</span><span class="n">run_analysis</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Retrieve result dataset</span>
<span class="n">sv_result</span> <span class="o">=</span> <span class="n">social_vulnerability</span><span class="o">.</span><span class="n">get_output_dataset</span><span class="p">(</span><span class="s2">&quot;sv_result&quot;</span><span class="p">)</span>

<span class="c1"># Convert dataset to Pandas DataFrame</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">sv_result</span><span class="o">.</span><span class="n">get_dataframe_from_csv</span><span class="p">()</span>

<span class="c1"># Display top 5 rows of output data</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>GEO_ID</th>
      <th>factor_white_nonHispanic</th>
      <th>factor_owner_occupied</th>
      <th>factor_earning_higher_than_national_poverty_rate</th>
      <th>factor_over_25_with_high_school_diploma_or_higher</th>
      <th>factor_without_disability_age_18_to_65</th>
      <th>FIPS</th>
      <th>R1</th>
      <th>R2</th>
      <th>R3</th>
      <th>R4</th>
      <th>R5</th>
      <th>SVS</th>
      <th>zone</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1500000US481677201001</td>
      <td>0.826873</td>
      <td>0.857143</td>
      <td>0.836348</td>
      <td>0.985014</td>
      <td>0.075404</td>
      <td>481677201001</td>
      <td>1.389439</td>
      <td>1.330196</td>
      <td>0.962965</td>
      <td>1.114087</td>
      <td>0.137041</td>
      <td>0.986746</td>
      <td>Medium Vulnerable (zone3)</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1500000US481677201002</td>
      <td>0.676741</td>
      <td>0.889262</td>
      <td>0.894875</td>
      <td>0.929273</td>
      <td>0.176230</td>
      <td>481677201002</td>
      <td>1.137164</td>
      <td>1.380041</td>
      <td>1.030353</td>
      <td>1.051042</td>
      <td>0.320285</td>
      <td>0.983777</td>
      <td>Medium Vulnerable (zone3)</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1500000US481677201003</td>
      <td>0.517323</td>
      <td>0.809955</td>
      <td>0.984252</td>
      <td>0.980989</td>
      <td>0.056364</td>
      <td>481677201003</td>
      <td>0.869285</td>
      <td>1.256965</td>
      <td>1.133261</td>
      <td>1.109534</td>
      <td>0.102437</td>
      <td>0.894296</td>
      <td>Medium to High Vulnerable (zone4)</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1500000US481677201004</td>
      <td>0.561679</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>0.919908</td>
      <td>0.061051</td>
      <td>481677201004</td>
      <td>0.943819</td>
      <td>1.551895</td>
      <td>1.151393</td>
      <td>1.040451</td>
      <td>0.110956</td>
      <td>0.959703</td>
      <td>Medium Vulnerable (zone3)</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1500000US481677202001</td>
      <td>0.701548</td>
      <td>0.973113</td>
      <td>0.987214</td>
      <td>0.973601</td>
      <td>0.062718</td>
      <td>481677202001</td>
      <td>1.178848</td>
      <td>1.510169</td>
      <td>1.136671</td>
      <td>1.101179</td>
      <td>0.113985</td>
      <td>1.008170</td>
      <td>Medium Vulnerable (zone3)</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Transition probability matrix per social vulnerability level, from Sutley and Hamideh (2020).</span>
<span class="n">transition_probability_matrix</span> <span class="o">=</span> <span class="s2">&quot;60f5e2ae544e944c3cec0794&quot;</span>
<span class="c1"># Initial mass probability function for household at time 0</span>
<span class="n">initial_probability_vector</span> <span class="o">=</span> <span class="s2">&quot;60f5e918544e944c3cec668b&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create housing recovery instance</span>
<span class="n">housing_recovery</span> <span class="o">=</span> <span class="n">HousingRecoverySequential</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>

<span class="c1"># Load input datasets from dislocation, tpm, and initial probability function</span>
<span class="c1">#housing_recovery.load_remote_input_dataset(&quot;population_dislocation_block&quot;, population_dislocation)</span>
<span class="n">housing_recovery</span><span class="o">.</span><span class="n">set_input_dataset</span><span class="p">(</span><span class="s2">&quot;population_dislocation_block&quot;</span><span class="p">,</span> <span class="n">population_dislocation_result</span><span class="p">)</span>

<span class="n">housing_recovery</span><span class="o">.</span><span class="n">load_remote_input_dataset</span><span class="p">(</span><span class="s2">&quot;tpm&quot;</span><span class="p">,</span> <span class="n">transition_probability_matrix</span><span class="p">)</span>
<span class="n">housing_recovery</span><span class="o">.</span><span class="n">load_remote_input_dataset</span><span class="p">(</span><span class="s2">&quot;initial_stage_probabilities&quot;</span><span class="p">,</span> <span class="n">initial_probability_vector</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Dataset already exists locally. Reading from local cached zip.
Unzipped folder found in the local cache. Reading from it...
Dataset already exists locally. Reading from local cached zip.
Unzipped folder found in the local cache. Reading from it...
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Initial value to seed the random number generator to ensure replication</span>
<span class="n">seed</span> <span class="o">=</span> <span class="mi">1234</span>
<span class="c1"># A size of the analysis time step in month</span>
<span class="n">t_delta</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="c1"># Total duration of Markov chain recovery process</span>
<span class="n">t_final</span> <span class="o">=</span> <span class="mf">90.0</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Specify the result name</span>
<span class="n">result_name</span> <span class="o">=</span> <span class="s2">&quot;housing_recovery_result&quot;</span>

<span class="c1"># Set analysis parameters</span>
<span class="n">housing_recovery</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;result_name&quot;</span><span class="p">,</span> <span class="n">result_name</span><span class="p">)</span>
<span class="n">housing_recovery</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;seed&quot;</span><span class="p">,</span> <span class="n">seed</span><span class="p">)</span>
<span class="n">housing_recovery</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;t_delta&quot;</span><span class="p">,</span> <span class="n">t_delta</span><span class="p">)</span>
<span class="n">housing_recovery</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;t_final&quot;</span><span class="p">,</span> <span class="n">t_final</span><span class="p">)</span>

<span class="c1"># Chain with SV output</span>
<span class="n">housing_recovery</span><span class="o">.</span><span class="n">set_input_dataset</span><span class="p">(</span><span class="s1">&#39;sv_result&#39;</span><span class="p">,</span> <span class="n">sv_result</span><span class="p">)</span>

<span class="c1"># Run the household recovery sequence analysis - Markov model</span>
<span class="n">housing_recovery</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="a-sufficient-quality-solutions-found">
<h2>6 a) Sufficient Quality Solutions Found?<a class="headerlink" href="#a-sufficient-quality-solutions-found" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Retrieve result dataset</span>
<span class="n">housing_recovery_result</span> <span class="o">=</span> <span class="n">housing_recovery</span><span class="o">.</span><span class="n">get_output_dataset</span><span class="p">(</span><span class="s2">&quot;ds_result&quot;</span><span class="p">)</span>

<span class="c1"># Convert dataset to Pandas DataFrame</span>
<span class="n">df_hhrs</span> <span class="o">=</span> <span class="n">housing_recovery_result</span><span class="o">.</span><span class="n">get_dataframe_from_csv</span><span class="p">()</span>

<span class="c1"># Display top 5 rows of output data</span>
<span class="n">df_hhrs</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>guid</th>
      <th>huid</th>
      <th>Zone</th>
      <th>SV</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
      <th>5</th>
      <th>6</th>
      <th>...</th>
      <th>81</th>
      <th>82</th>
      <th>83</th>
      <th>84</th>
      <th>85</th>
      <th>86</th>
      <th>87</th>
      <th>88</th>
      <th>89</th>
      <th>90</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>df7e5aef-c49f-45dd-b145-6fd7db8f50ff</td>
      <td>B481677201001000H222</td>
      <td>Z3</td>
      <td>0.524</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>...</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>07b29b24-3184-4d0b-bbc6-1538aee5b1f1</td>
      <td>B481677201001000H076</td>
      <td>Z3</td>
      <td>0.557</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>...</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>6d9c5304-59ff-4fb4-a8cf-d746b98f95fb</td>
      <td>B481677201001000H160</td>
      <td>Z3</td>
      <td>0.455</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>...</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2f76cc1d-ee76-445c-b086-2cd331ed7b1b</td>
      <td>B481677201001000H084</td>
      <td>Z3</td>
      <td>0.560</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>...</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>cdcedef2-2948-459f-b453-3fcc19076d91</td>
      <td>B481677201001000H182</td>
      <td>Z3</td>
      <td>0.950</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>...</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 94 columns</p>
</div></div></div>
</div>
<section id="explore-household-level-housing-recovery-results">
<h3>Explore Household-level Housing Recovery Results<a class="headerlink" href="#explore-household-level-housing-recovery-results" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_hhrs</span><span class="p">[</span><span class="s1">&#39;1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    77398.000000
mean         3.702861
std          0.890408
min          1.000000
25%          4.000000
50%          4.000000
75%          4.000000
max          4.000000
Name: 1, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Locate observations where timestep 1 does not equal 4</span>
<span class="n">df_hhrs</span><span class="p">[</span><span class="n">df_hhrs</span><span class="p">[</span><span class="s1">&#39;13&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>guid</th>
      <th>huid</th>
      <th>Zone</th>
      <th>SV</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
      <th>5</th>
      <th>6</th>
      <th>...</th>
      <th>81</th>
      <th>82</th>
      <th>83</th>
      <th>84</th>
      <th>85</th>
      <th>86</th>
      <th>87</th>
      <th>88</th>
      <th>89</th>
      <th>90</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>14327</th>
      <td>840a174d-fe0b-4e7f-9490-de70e6972268</td>
      <td>B481677210001005H011</td>
      <td>Z4</td>
      <td>0.655</td>
      <td>1.0</td>
      <td>2.0</td>
      <td>3.0</td>
      <td>2.0</td>
      <td>3.0</td>
      <td>2.0</td>
      <td>...</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>14339</th>
      <td>7e852dc1-e2f3-454c-96fb-024f80f3d36c</td>
      <td>B481677210001005H012</td>
      <td>Z4</td>
      <td>0.827</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>14343</th>
      <td>6d6d79b3-50b0-43f8-a5fa-15a0ab91e30d</td>
      <td>B481677210001007H012</td>
      <td>Z4</td>
      <td>0.799</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>1.0</td>
      <td>2.0</td>
      <td>1.0</td>
      <td>2.0</td>
      <td>...</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>14363</th>
      <td>e9d5a4ed-5356-4674-af60-7165c29a1e3f</td>
      <td>B481677210001007H017</td>
      <td>Z4</td>
      <td>0.674</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>...</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>14369</th>
      <td>61c09dbe-5099-4dc5-8b94-87750fe340a3</td>
      <td>B481677210001007H053</td>
      <td>Z4</td>
      <td>0.760</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>2.0</td>
      <td>3.0</td>
      <td>3.0</td>
      <td>2.0</td>
      <td>...</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 94 columns</p>
</div></div></div>
</div>
<blockquote>
<div><p>Plot Housing Recovery Sequence Results</p>
</div></blockquote>
<blockquote>
<div><p>view recovery sequence results for specific households</p>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">=</span><span class="n">df_hhrs</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;guid&#39;</span><span class="p">,</span> <span class="s1">&#39;huid&#39;</span><span class="p">,</span> <span class="s1">&#39;Zone&#39;</span><span class="p">,</span> <span class="s1">&#39;SV&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
<span class="n">t_steps</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">t_final</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>

<span class="c1"># Plot stage histories and stage changes using pandas.</span>
<span class="c1"># Generate timestep labels for dataframes.</span>
<span class="n">label_timestep</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i4</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">t_steps</span><span class="p">):</span>
    <span class="n">label_timestep</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">i4</span><span class="p">))</span>
    
<span class="n">ids</span> <span class="o">=</span> <span class="p">[</span><span class="mi">9700</span><span class="p">,</span><span class="mi">14343</span><span class="p">,</span><span class="mi">48</span><span class="p">]</span> <span class="c1"># select specific household by id numbers</span>
<span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">:</span>
    <span class="n">HH_stagehistory_DF</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="nb">id</span><span class="p">,</span> <span class="mi">1</span><span class="p">:]),</span>
                                      <span class="n">index</span><span class="o">=</span><span class="n">label_timestep</span><span class="p">)</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">HH_stagehistory_DF</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">,</span>
                                               <span class="n">yticks</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
                                               <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Household Recovery Sequences&#39;</span><span class="p">,</span>
                                               <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;Timestep (months)&#39;</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;Stage&#39;</span><span class="p">)</span>
    <span class="n">y_ticks_labels</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="s1">&#39;3&#39;</span><span class="p">,</span><span class="s1">&#39;4&#39;</span><span class="p">,</span><span class="s1">&#39;5&#39;</span><span class="p">]</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">80</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">(</span><span class="n">y_ticks_labels</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/5886d8213462923315b42480a342c469eb94c1e20ff87129ac566cfe22789877.png" src="../../_images/5886d8213462923315b42480a342c469eb94c1e20ff87129ac566cfe22789877.png" />
<img alt="../../_images/bd7b8d239885bc7e1877dede53808ce02919349fe5cb0f1d83ca8b10dc17e26b.png" src="../../_images/bd7b8d239885bc7e1877dede53808ce02919349fe5cb0f1d83ca8b10dc17e26b.png" />
<img alt="../../_images/9471264a91dd0ce462d2c099c2c22dbabbb30f0f82ebe13a381c2de4e4b5961d.png" src="../../_images/9471264a91dd0ce462d2c099c2c22dbabbb30f0f82ebe13a381c2de4e4b5961d.png" />
</div>
</div>
<blockquote>
<div><p>Plot recovery heatmap any stage of recovery</p>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_hhrs</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>guid</th>
      <th>huid</th>
      <th>Zone</th>
      <th>SV</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
      <th>5</th>
      <th>6</th>
      <th>...</th>
      <th>81</th>
      <th>82</th>
      <th>83</th>
      <th>84</th>
      <th>85</th>
      <th>86</th>
      <th>87</th>
      <th>88</th>
      <th>89</th>
      <th>90</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>df7e5aef-c49f-45dd-b145-6fd7db8f50ff</td>
      <td>B481677201001000H222</td>
      <td>Z3</td>
      <td>0.524</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>...</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>07b29b24-3184-4d0b-bbc6-1538aee5b1f1</td>
      <td>B481677201001000H076</td>
      <td>Z3</td>
      <td>0.557</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>...</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>6d9c5304-59ff-4fb4-a8cf-d746b98f95fb</td>
      <td>B481677201001000H160</td>
      <td>Z3</td>
      <td>0.455</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>...</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2f76cc1d-ee76-445c-b086-2cd331ed7b1b</td>
      <td>B481677201001000H084</td>
      <td>Z3</td>
      <td>0.560</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>...</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>cdcedef2-2948-459f-b453-3fcc19076d91</td>
      <td>B481677201001000H182</td>
      <td>Z3</td>
      <td>0.950</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>...</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 94 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Keep housing units for Galveston Island</span>
<span class="n">pd_df_community</span> <span class="o">=</span> <span class="n">pd_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pd_df</span><span class="p">[</span><span class="s1">&#39;placeNAME10&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;Galveston&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">pd_df_community</span><span class="p">[</span><span class="s1">&#39;placeNAME10&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count         32128
unique            1
top       Galveston
freq          32128
Name: placeNAME10, dtype: object
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># merge household unit information with recovery results</span>
<span class="n">pd_df_hs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">left</span> <span class="o">=</span> <span class="n">pd_df_community</span><span class="p">,</span> 
                    <span class="n">right</span> <span class="o">=</span> <span class="n">df_hhrs</span><span class="p">,</span>
                    <span class="n">left_on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;guid&#39;</span><span class="p">,</span><span class="s1">&#39;huid&#39;</span><span class="p">],</span>
                    <span class="n">right_on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;guid&#39;</span><span class="p">,</span><span class="s1">&#39;huid&#39;</span><span class="p">],</span>
                    <span class="n">how</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd_df_hs</span><span class="p">[[</span><span class="s1">&#39;guid&#39;</span><span class="p">,</span><span class="s1">&#39;huid&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>guid</th>
      <th>huid</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>32128</td>
      <td>32128</td>
    </tr>
    <tr>
      <th>unique</th>
      <td>19983</td>
      <td>32128</td>
    </tr>
    <tr>
      <th>top</th>
      <td>2669f722-ae95-4181-90a8-9c4755b7b29c</td>
      <td>B481677240001010H034</td>
    </tr>
    <tr>
      <th>freq</th>
      <td>191</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="create-recovery-curve-based-on-income-groups">
<h3>Create recovery curve based on income groups<a class="headerlink" href="#create-recovery-curve-based-on-income-groups" title="Permalink to this heading">#</a></h3>
<p>Code will loop through data over time to create percent in permanent housing at each time step.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">recovery_curve_byincome</span><span class="p">(</span><span class="n">pd_df_hs</span><span class="p">,</span> 
                            <span class="n">filename</span><span class="p">,</span>
                            <span class="n">subtitle</span> <span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate a recovery curve based on building damage, population dislocation,</span>
<span class="sd">    and household housing recovery model.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">total_housingunits</span> <span class="o">=</span> <span class="n">pd_df_hs</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">total_households</span> <span class="o">=</span> <span class="n">pd_df_hs</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">pd_df_hs</span><span class="p">[</span><span class="s1">&#39;randincome&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">notnull</span><span class="p">())]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="c1">#print(&quot;Total housing units:&quot;, total_housingunits)</span>
    <span class="c1">#print(&quot;Total households:&quot;, total_households)</span>

    <span class="c1"># What is the distribution of housing units by income?</span>
    <span class="n">pd_df_hs</span><span class="p">[</span><span class="s1">&#39;income_quantile&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">qcut</span><span class="p">(</span><span class="n">pd_df_hs</span><span class="p">[</span><span class="s1">&#39;randincome&#39;</span><span class="p">],</span> <span class="mi">5</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="c1">#pd_df_hs[[&#39;randincome&#39;,&#39;income_quantile&#39;]].groupby(&#39;income_quantile&#39;).describe()</span>

    <span class="n">total_lowincomehouseholds</span> <span class="o">=</span> <span class="n">pd_df_hs</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">pd_df_hs</span><span class="p">[</span><span class="s1">&#39;income_quantile&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">total_midincomehouseholds</span> <span class="o">=</span> <span class="n">pd_df_hs</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">pd_df_hs</span><span class="p">[</span><span class="s1">&#39;income_quantile&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">total_highincomehouseholds</span> <span class="o">=</span> <span class="n">pd_df_hs</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">pd_df_hs</span><span class="p">[</span><span class="s1">&#39;income_quantile&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="c1">#print(&quot;Total low income households:&quot;, total_lowincomehouseholds)</span>
    <span class="c1">#print(&quot;Total mid income households:&quot;, total_midincomehouseholds)</span>
    <span class="c1">#print(&quot;Total high income households:&quot;, total_highincomehouseholds)</span>

    <span class="c1"># loop over variables 1 to 90</span>
    <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1"># Create dataframe to store values</span>
    <span class="c1"># Assume at time 0, all households are in permanent housing</span>
    <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="mi">0</span><span class="p">)]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([{</span><span class="s1">&#39;timestep&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s1">&#39;total_households&#39;</span> <span class="p">:</span> <span class="n">total_housingunits</span><span class="p">,</span>
                    <span class="s1">&#39;notperm&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s1">&#39;total_highincomehouseholds&#39;</span><span class="p">:</span> <span class="n">total_highincomehouseholds</span><span class="p">,</span>
                    <span class="s1">&#39;total_midincomehouseholds&#39;</span><span class="p">:</span> <span class="n">total_midincomehouseholds</span><span class="p">,</span>
                    <span class="s1">&#39;total_lowincomehouseholds&#39;</span><span class="p">:</span> <span class="n">total_lowincomehouseholds</span><span class="p">,</span>
                    <span class="s1">&#39;lowincome_notperm&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s1">&#39;midincome_notperm&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s1">&#39;highincome_notperm&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}])</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">91</span><span class="p">):</span>
        <span class="c1"># create dictionary entry that summarizes the number of households not in permanent housing</span>
        <span class="n">households_notinpermanthousing</span> <span class="o">=</span> <span class="n">pd_df_hs</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">pd_df_hs</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span> <span class="o">!=</span> <span class="mi">4</span><span class="p">)</span> <span class="o">&amp;</span> 
                                                    <span class="p">(</span><span class="n">pd_df_hs</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span><span class="o">.</span><span class="n">notnull</span><span class="p">())</span> <span class="o">&amp;</span>
                                                    <span class="p">(</span><span class="n">pd_df_hs</span><span class="p">[</span><span class="s1">&#39;randincome&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">notnull</span><span class="p">())]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">lowincome_households_notinpermanthousing</span> <span class="o">=</span> <span class="n">pd_df_hs</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">pd_df_hs</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span> <span class="o">!=</span> <span class="mi">4</span><span class="p">)</span> <span class="o">&amp;</span>
                                                    <span class="p">(</span><span class="n">pd_df_hs</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span><span class="o">.</span><span class="n">notnull</span><span class="p">())</span> <span class="o">&amp;</span>
                                                    <span class="p">(</span><span class="n">pd_df_hs</span><span class="p">[</span><span class="s1">&#39;income_quantile&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">midincome_households_notinpermanthousing</span> <span class="o">=</span> <span class="n">pd_df_hs</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">pd_df_hs</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span> <span class="o">!=</span> <span class="mi">4</span><span class="p">)</span> <span class="o">&amp;</span>
                                                    <span class="p">(</span><span class="n">pd_df_hs</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span><span class="o">.</span><span class="n">notnull</span><span class="p">())</span> <span class="o">&amp;</span>
                                                    <span class="p">(</span><span class="n">pd_df_hs</span><span class="p">[</span><span class="s1">&#39;income_quantile&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">highincome_households_notinpermanthousing</span> <span class="o">=</span> <span class="n">pd_df_hs</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">pd_df_hs</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span> <span class="o">!=</span> <span class="mi">4</span><span class="p">)</span> <span class="o">&amp;</span>
                                                    <span class="p">(</span><span class="n">pd_df_hs</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span><span class="o">.</span><span class="n">notnull</span><span class="p">())</span> <span class="o">&amp;</span>
                                                    <span class="p">(</span><span class="n">pd_df_hs</span><span class="p">[</span><span class="s1">&#39;income_quantile&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                                        
        <span class="c1"># Create dataframe to store values</span>
        <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([{</span><span class="s1">&#39;timestep&#39;</span> <span class="p">:</span> <span class="n">i</span><span class="p">,</span>
                        <span class="s1">&#39;total_households&#39;</span> <span class="p">:</span> <span class="n">total_households</span><span class="p">,</span>
                        <span class="s1">&#39;notperm&#39;</span><span class="p">:</span> <span class="n">households_notinpermanthousing</span><span class="p">,</span>
                        <span class="s1">&#39;total_highincomehouseholds&#39;</span><span class="p">:</span> <span class="n">total_highincomehouseholds</span><span class="p">,</span>
                        <span class="s1">&#39;total_midincomehouseholds&#39;</span><span class="p">:</span> <span class="n">total_midincomehouseholds</span><span class="p">,</span>
                        <span class="s1">&#39;total_lowincomehouseholds&#39;</span><span class="p">:</span> <span class="n">total_lowincomehouseholds</span><span class="p">,</span>
                        <span class="s1">&#39;lowincome_notperm&#39;</span><span class="p">:</span> <span class="n">lowincome_households_notinpermanthousing</span><span class="p">,</span>
                        <span class="s1">&#39;midincome_notperm&#39;</span><span class="p">:</span> <span class="n">midincome_households_notinpermanthousing</span><span class="p">,</span>
                        <span class="s1">&#39;highincome_notperm&#39;</span><span class="p">:</span> <span class="n">highincome_households_notinpermanthousing</span><span class="p">}])</span>

    <span class="c1"># convert dictionary to dataframe</span>
    <span class="n">df_summary</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="nb">dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
    <span class="n">df_summary</span><span class="p">[</span><span class="s1">&#39;percent_allperm&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">df_summary</span><span class="p">[</span><span class="s1">&#39;notperm&#39;</span><span class="p">]</span><span class="o">/</span> \
                                        <span class="n">df_summary</span><span class="p">[</span><span class="s1">&#39;total_households&#39;</span><span class="p">]</span> <span class="p">)</span>
    <span class="n">df_summary</span><span class="p">[</span><span class="s1">&#39;percent_lowperm&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">df_summary</span><span class="p">[</span><span class="s1">&#39;lowincome_notperm&#39;</span><span class="p">]</span><span class="o">/</span> \
                                    <span class="n">df_summary</span><span class="p">[</span><span class="s1">&#39;total_lowincomehouseholds&#39;</span><span class="p">]</span> <span class="p">)</span>
    <span class="n">df_summary</span><span class="p">[</span><span class="s1">&#39;percent_midperm&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">df_summary</span><span class="p">[</span><span class="s1">&#39;midincome_notperm&#39;</span><span class="p">]</span><span class="o">/</span> \
                                        <span class="n">df_summary</span><span class="p">[</span><span class="s1">&#39;total_midincomehouseholds&#39;</span><span class="p">]</span> <span class="p">)</span>
    <span class="n">df_summary</span><span class="p">[</span><span class="s1">&#39;percent_highperm&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">df_summary</span><span class="p">[</span><span class="s1">&#39;highincome_notperm&#39;</span><span class="p">]</span><span class="o">/</span> \
                                    <span class="n">df_summary</span><span class="p">[</span><span class="s1">&#39;total_highincomehouseholds&#39;</span><span class="p">]</span> <span class="p">)</span>

    <span class="c1"># plot</span>
    <span class="c1"># Start new figure</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s1">&#39;timestep&#39;</span><span class="p">,</span> <span class="s1">&#39;percent_allperm&#39;</span><span class="p">,</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">df_summary</span><span class="p">,</span>
            <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s1">&#39;timestep&#39;</span><span class="p">,</span> <span class="s1">&#39;percent_lowperm&#39;</span><span class="p">,</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">df_summary</span><span class="p">,</span>
            <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s1">&#39;timestep&#39;</span><span class="p">,</span> <span class="s1">&#39;percent_midperm&#39;</span><span class="p">,</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">df_summary</span><span class="p">,</span>
            <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">)</span>   
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s1">&#39;timestep&#39;</span><span class="p">,</span> <span class="s1">&#39;percent_highperm&#39;</span><span class="p">,</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">df_summary</span><span class="p">,</span>
            <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">)</span>
    <span class="c1"># Set y-axis range</span>
    <span class="c1"># What is the minimum and maximum values of the percent of households in permanent housing?</span>
    <span class="n">ylim_lower</span> <span class="o">=</span> <span class="n">df_summary</span><span class="p">[</span><span class="s1">&#39;percent_allperm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">-</span><span class="mf">.1</span>
    <span class="n">ylim_upper</span> <span class="o">=</span> <span class="n">df_summary</span><span class="p">[</span><span class="s1">&#39;percent_allperm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">+</span><span class="mf">.1</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="n">ylim_lower</span><span class="p">,</span><span class="n">ylim_upper</span><span class="p">)</span>
    <span class="c1"># Relable legend</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;All Households&#39;</span><span class="p">,</span><span class="s1">&#39;Low Income Households&#39;</span><span class="p">,</span> <span class="s1">&#39;Mid Income&#39;</span><span class="p">,</span> <span class="s1">&#39;High Income&#39;</span><span class="p">],</span>
                <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;lower right&#39;</span><span class="p">)</span>
    <span class="c1"># Add title</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Percentage of households in permanent housing by income&#39;</span><span class="o">+</span><span class="n">subtitle</span><span class="p">)</span>
    <span class="c1"># Add x and y labels</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Timestep (months)&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Percentage&#39;</span><span class="p">)</span>
    <span class="c1"># save plot</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s1">.pdf&#39;</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">,</span> <span class="n">dpi</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="c1"># good practice to close the plt object.</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create container to store filenames (use to make a GIF)</span>
<span class="c1"># https://towardsdatascience.com/basics-of-gifs-with-pythons-matplotlib-54dd544b6f30</span>
<span class="n">filenames</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">recovery_curve_byincome</span><span class="p">(</span><span class="n">pd_df_hs</span> <span class="o">=</span> <span class="n">pd_df_hs</span><span class="p">,</span> 
                        <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;recovery_curve_byincome</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
                        <span class="n">subtitle</span><span class="o">=</span><span class="s1">&#39; Baseline&#39;</span><span class="p">)</span>
<span class="n">filenames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/566f8939a0381fba1e522d08b79e6e4a5f35ef9d59a3101b18f933dffaf30d7e.png" src="../../_images/566f8939a0381fba1e522d08b79e6e4a5f35ef9d59a3101b18f933dffaf30d7e.png" />
</div>
</div>
<blockquote>
<div><p>Plot recovery heatmap after 12 months of recovery</p>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ipyleaflet</span> <span class="kn">import</span> <span class="n">Map</span><span class="p">,</span> <span class="n">Heatmap</span><span class="p">,</span> <span class="n">LayersControl</span><span class="p">,</span> <span class="n">LegendControl</span>

<span class="c1"># What location should the map be centered on?</span>
<span class="n">center_x</span> <span class="o">=</span> <span class="n">pd_df_hs</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">center_y</span> <span class="o">=</span> <span class="n">pd_df_hs</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="nb">map</span> <span class="o">=</span> <span class="n">Map</span><span class="p">(</span><span class="n">center</span><span class="o">=</span><span class="p">[</span><span class="n">center_y</span><span class="p">,</span> <span class="n">center_x</span><span class="p">],</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">11</span><span class="p">)</span>

<span class="n">stage5_data</span> <span class="o">=</span> <span class="n">pd_df_hs</span><span class="p">[[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="s1">&#39;numprec&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pd_df_hs</span><span class="p">[</span><span class="s1">&#39;85&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">stage5</span> <span class="o">=</span> <span class="n">Heatmap</span><span class="p">(</span>
    <span class="n">locations</span> <span class="o">=</span> <span class="n">stage5_data</span><span class="p">,</span>
    <span class="n">radius</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> 
    <span class="n">max_val</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span> 
    <span class="n">blur</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> 
    <span class="n">gradient</span><span class="o">=</span><span class="p">{</span><span class="mf">0.2</span><span class="p">:</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">:</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">:</span> <span class="s1">&#39;red&#39;</span><span class="p">},</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Stage 5 - Failure to Recover&#39;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">stage4_data</span> <span class="o">=</span> <span class="n">pd_df_hs</span><span class="p">[[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="s1">&#39;numprec&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pd_df_hs</span><span class="p">[</span><span class="s1">&#39;85&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">stage4</span> <span class="o">=</span> <span class="n">Heatmap</span><span class="p">(</span>
    <span class="n">locations</span> <span class="o">=</span> <span class="n">stage4_data</span><span class="p">,</span>
    <span class="n">radius</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> 
    <span class="n">max_val</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span> 
    <span class="n">blur</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> 
    <span class="n">gradient</span><span class="o">=</span><span class="p">{</span><span class="mf">0.2</span><span class="p">:</span> <span class="s1">&#39;purple&#39;</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">:</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">:</span> <span class="s1">&#39;green&#39;</span><span class="p">},</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Stage 4 - Permanent Housing&#39;</span><span class="p">,</span>
<span class="p">)</span>

<span class="nb">map</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">stage4</span><span class="p">)</span>
<span class="nb">map</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">stage5</span><span class="p">)</span>


<span class="n">control</span> <span class="o">=</span> <span class="n">LayersControl</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s1">&#39;topright&#39;</span><span class="p">)</span>
<span class="nb">map</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">control</span><span class="p">)</span>
<span class="nb">map</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "402bd7f837914d338033ff365164e2ca", "version_major": 2, "version_minor": 0}</script></div>
</div>
<p>The five discrete states represent stages in the household housing recovery process, including emergency shelter (1), temporary shelter (2); temporary housing (3); permanent housing (4), and failure to recover (5). The model assumes that a household can be in any of the first four stages immediately after a disaster.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">hhrs_valuelabels</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;categorical_variable&#39;</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;variable&#39;</span> <span class="p">:</span> <span class="s1">&#39;select time step&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;variable_label&#39;</span> <span class="p">:</span> <span class="s1">&#39;Household housing recovery stages&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;notes&#39;</span> <span class="p">:</span> <span class="s1">&#39;Sutley and Hamideh recovery stages&#39;</span><span class="p">},</span>
              <span class="s1">&#39;value_list&#39;</span> <span class="p">:</span> <span class="p">{</span>
                <span class="mi">1</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;value_label&#39;</span><span class="p">:</span> <span class="s2">&quot;1 Emergency Shelter&quot;</span><span class="p">},</span>
                <span class="mi">2</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;value_label&#39;</span><span class="p">:</span> <span class="s2">&quot;2 Temporary Shelter&quot;</span><span class="p">},</span>
                <span class="mi">3</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;value_label&#39;</span><span class="p">:</span> <span class="s2">&quot;3 Temporary Housing&quot;</span><span class="p">},</span>
                <span class="mi">4</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;value_label&#39;</span><span class="p">:</span> <span class="s2">&quot;4 Permanent Housing&quot;</span><span class="p">},</span>
                <span class="mi">5</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;value_label&#39;</span><span class="p">:</span> <span class="s2">&quot;5 Failure to Recover&quot;</span><span class="p">}}</span>
            <span class="p">}</span>

<span class="n">permanenthousing_valuelabels</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;categorical_variable&#39;</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;variable&#39;</span> <span class="p">:</span> <span class="s1">&#39;select time step&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;variable_label&#39;</span> <span class="p">:</span> <span class="s1">&#39;Permanent Housing&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;notes&#39;</span> <span class="p">:</span> <span class="s1">&#39;Sutley and Hamideh recovery stages&#39;</span><span class="p">},</span>
              <span class="s1">&#39;value_list&#39;</span> <span class="p">:</span> <span class="p">{</span>
                <span class="mi">1</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;value_label&#39;</span><span class="p">:</span> <span class="s2">&quot;0 Not Permanent Housing&quot;</span><span class="p">},</span>
                <span class="mi">2</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;value_label&#39;</span><span class="p">:</span> <span class="s2">&quot;0 Not Permanent Housing&quot;</span><span class="p">},</span>
                <span class="mi">3</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;value_label&#39;</span><span class="p">:</span> <span class="s2">&quot;0 Not Permanent Housing&quot;</span><span class="p">},</span>
                <span class="mi">4</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;value_label&#39;</span><span class="p">:</span> <span class="s2">&quot;1 Permanent Housing&quot;</span><span class="p">},</span>
                <span class="mi">5</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;value_label&#39;</span><span class="p">:</span> <span class="s2">&quot;0 Not Permanent Housing&quot;</span><span class="p">}}</span>
            <span class="p">}</span>

<span class="n">pd_df_hs</span> <span class="o">=</span> <span class="n">add_label_cat_values_df</span><span class="p">(</span><span class="n">pd_df_hs</span><span class="p">,</span> <span class="n">valuelabels</span> <span class="o">=</span> <span class="n">hhrs_valuelabels</span><span class="p">,</span> <span class="n">variable</span> <span class="o">=</span> <span class="s1">&#39;13&#39;</span><span class="p">)</span>
<span class="n">pd_df_hs</span> <span class="o">=</span> <span class="n">add_label_cat_values_df</span><span class="p">(</span><span class="n">pd_df_hs</span><span class="p">,</span> <span class="n">valuelabels</span> <span class="o">=</span> <span class="n">permanenthousing_valuelabels</span><span class="p">,</span>
                        <span class="n">variable</span> <span class="o">=</span> <span class="s1">&#39;13&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">poptable</span><span class="o">.</span><span class="n">pop_results_table</span><span class="p">(</span><span class="n">pd_df_hs</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">pd_df_hs</span><span class="p">[</span><span class="s1">&#39;placeNAME10&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;Galveston&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> 
                  <span class="n">who</span> <span class="o">=</span> <span class="s2">&quot;Total Population by Householder&quot;</span><span class="p">,</span> 
                  <span class="n">what</span> <span class="o">=</span> <span class="s2">&quot;by Housing Type at T=13 by Race Ethnicity&quot;</span><span class="p">,</span>
                  <span class="n">where</span> <span class="o">=</span> <span class="s2">&quot;Galveston Island TX&quot;</span><span class="p">,</span>
                  <span class="n">when</span> <span class="o">=</span> <span class="s2">&quot;2010&quot;</span><span class="p">,</span>
                  <span class="n">row_index</span> <span class="o">=</span> <span class="s1">&#39;Race Ethnicity&#39;</span><span class="p">,</span>
                  <span class="n">col_index</span> <span class="o">=</span> <span class="s1">&#39;Household housing recovery stages&#39;</span><span class="p">,</span>
                  <span class="n">row_percent</span> <span class="o">=</span> <span class="s1">&#39;2 Temporary Shelter&#39;</span>
                  <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
#T_586fc caption {
  text-align: center;
  caption-side: top;
  font-size: 150%;
}
</style>
<table id="T_586fc">
  <caption>Table. Total Population by Householder by Housing Type at T=13 by Race Ethnicity, Galveston Island TX, 2010.</caption>
  <thead>
    <tr>
      <th class="index_name level0" >Household housing recovery stages</th>
      <th id="T_586fc_level0_col0" class="col_heading level0 col0" >1 Emergency Shelter (%)</th>
      <th id="T_586fc_level0_col1" class="col_heading level0 col1" >2 Temporary Shelter (%)</th>
      <th id="T_586fc_level0_col2" class="col_heading level0 col2" >3 Temporary Housing (%)</th>
      <th id="T_586fc_level0_col3" class="col_heading level0 col3" >4 Permanent Housing (%)</th>
      <th id="T_586fc_level0_col4" class="col_heading level0 col4" >5 Failure to Recover (%)</th>
      <th id="T_586fc_level0_col5" class="col_heading level0 col5" >Total Population by Householder (%)</th>
      <th id="T_586fc_level0_col6" class="col_heading level0 col6" >Percent Row 
2 Temporary Shelter</th>
    </tr>
    <tr>
      <th class="index_name level0" >Race Ethnicity</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
      <th class="blank col3" >&nbsp;</th>
      <th class="blank col4" >&nbsp;</th>
      <th class="blank col5" >&nbsp;</th>
      <th class="blank col6" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_586fc_level0_row0" class="row_heading level0 row0" >1 White alone, Not Hispanic</th>
      <td id="T_586fc_row0_col0" class="data row0 col0" >358	 (50.2%)</td>
      <td id="T_586fc_row0_col1" class="data row0 col1" >443	 (50.7%)</td>
      <td id="T_586fc_row0_col2" class="data row0 col2" >244	 (55.5%)</td>
      <td id="T_586fc_row0_col3" class="data row0 col3" >8,572	 (52.3%)</td>
      <td id="T_586fc_row0_col4" class="data row0 col4" >1	 (25.0%)</td>
      <td id="T_586fc_row0_col5" class="data row0 col5" >9,618	 (52.2%)</td>
      <td id="T_586fc_row0_col6" class="data row0 col6" >4.6%</td>
    </tr>
    <tr>
      <th id="T_586fc_level0_row1" class="row_heading level0 row1" >2 Black alone, Not Hispanic</th>
      <td id="T_586fc_row1_col0" class="data row1 col0" >139	 (19.5%)</td>
      <td id="T_586fc_row1_col1" class="data row1 col1" >159	 (18.2%)</td>
      <td id="T_586fc_row1_col2" class="data row1 col2" >77	 (17.5%)</td>
      <td id="T_586fc_row1_col3" class="data row1 col3" >2,799	 (17.1%)</td>
      <td id="T_586fc_row1_col4" class="data row1 col4" >1	 (25.0%)</td>
      <td id="T_586fc_row1_col5" class="data row1 col5" >3,175	 (17.2%)</td>
      <td id="T_586fc_row1_col6" class="data row1 col6" >5.0%</td>
    </tr>
    <tr>
      <th id="T_586fc_level0_row2" class="row_heading level0 row2" >3 American Indian and Alaska Native alone, Not Hispanic</th>
      <td id="T_586fc_row2_col0" class="data row2 col0" >6	 (0.8%)</td>
      <td id="T_586fc_row2_col1" class="data row2 col1" >3	 (0.3%)</td>
      <td id="T_586fc_row2_col2" class="data row2 col2" >2	 (0.5%)</td>
      <td id="T_586fc_row2_col3" class="data row2 col3" >68	 (0.4%)</td>
      <td id="T_586fc_row2_col4" class="data row2 col4" >nan	 (nan%)</td>
      <td id="T_586fc_row2_col5" class="data row2 col5" >79	 (0.4%)</td>
      <td id="T_586fc_row2_col6" class="data row2 col6" >3.8%</td>
    </tr>
    <tr>
      <th id="T_586fc_level0_row3" class="row_heading level0 row3" >4 Asian alone, Not Hispanic</th>
      <td id="T_586fc_row3_col0" class="data row3 col0" >15	 (2.1%)</td>
      <td id="T_586fc_row3_col1" class="data row3 col1" >33	 (3.8%)</td>
      <td id="T_586fc_row3_col2" class="data row3 col2" >15	 (3.4%)</td>
      <td id="T_586fc_row3_col3" class="data row3 col3" >566	 (3.5%)</td>
      <td id="T_586fc_row3_col4" class="data row3 col4" >nan	 (nan%)</td>
      <td id="T_586fc_row3_col5" class="data row3 col5" >629	 (3.4%)</td>
      <td id="T_586fc_row3_col6" class="data row3 col6" >5.2%</td>
    </tr>
    <tr>
      <th id="T_586fc_level0_row4" class="row_heading level0 row4" >5 Other Race, Not Hispanic</th>
      <td id="T_586fc_row4_col0" class="data row4 col0" >7	 (1.0%)</td>
      <td id="T_586fc_row4_col1" class="data row4 col1" >6	 (0.7%)</td>
      <td id="T_586fc_row4_col2" class="data row4 col2" >1	 (0.2%)</td>
      <td id="T_586fc_row4_col3" class="data row4 col3" >202	 (1.2%)</td>
      <td id="T_586fc_row4_col4" class="data row4 col4" >nan	 (nan%)</td>
      <td id="T_586fc_row4_col5" class="data row4 col5" >216	 (1.2%)</td>
      <td id="T_586fc_row4_col6" class="data row4 col6" >2.8%</td>
    </tr>
    <tr>
      <th id="T_586fc_level0_row5" class="row_heading level0 row5" >6 Any Race, Hispanic</th>
      <td id="T_586fc_row5_col0" class="data row5 col0" >188	 (26.4%)</td>
      <td id="T_586fc_row5_col1" class="data row5 col1" >230	 (26.3%)</td>
      <td id="T_586fc_row5_col2" class="data row5 col2" >101	 (23.0%)</td>
      <td id="T_586fc_row5_col3" class="data row5 col3" >4,153	 (25.3%)</td>
      <td id="T_586fc_row5_col4" class="data row5 col4" >2	 (50.0%)</td>
      <td id="T_586fc_row5_col5" class="data row5 col5" >4,674	 (25.4%)</td>
      <td id="T_586fc_row5_col6" class="data row5 col6" >4.9%</td>
    </tr>
    <tr>
      <th id="T_586fc_level0_row6" class="row_heading level0 row6" >7 Group Quarters no Race Ethnicity Data</th>
      <td id="T_586fc_row6_col0" class="data row6 col0" >nan	 (nan%)</td>
      <td id="T_586fc_row6_col1" class="data row6 col1" >nan	 (nan%)</td>
      <td id="T_586fc_row6_col2" class="data row6 col2" >nan	 (nan%)</td>
      <td id="T_586fc_row6_col3" class="data row6 col3" >26	 (0.2%)</td>
      <td id="T_586fc_row6_col4" class="data row6 col4" >nan	 (nan%)</td>
      <td id="T_586fc_row6_col5" class="data row6 col5" >26	 (0.1%)</td>
      <td id="T_586fc_row6_col6" class="data row6 col6" >nan%</td>
    </tr>
    <tr>
      <th id="T_586fc_level0_row7" class="row_heading level0 row7" >Total</th>
      <td id="T_586fc_row7_col0" class="data row7 col0" >713	 (100.0%)</td>
      <td id="T_586fc_row7_col1" class="data row7 col1" >874	 (100.0%)</td>
      <td id="T_586fc_row7_col2" class="data row7 col2" >440	 (100.0%)</td>
      <td id="T_586fc_row7_col3" class="data row7 col3" >16,386	 (100.0%)</td>
      <td id="T_586fc_row7_col4" class="data row7 col4" >4	 (100.0%)</td>
      <td id="T_586fc_row7_col5" class="data row7 col5" >18,417	 (100.0%)</td>
      <td id="T_586fc_row7_col6" class="data row7 col6" >4.7%</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">poptable</span><span class="o">.</span><span class="n">pop_results_table</span><span class="p">(</span><span class="n">pd_df_hs</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pd_df_hs</span><span class="p">[</span><span class="s1">&#39;placeNAME10&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;Galveston&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
                  <span class="n">who</span> <span class="o">=</span> <span class="s2">&quot;Total Population by Householder&quot;</span><span class="p">,</span> 
                  <span class="n">what</span> <span class="o">=</span> <span class="s2">&quot;by Permanent Housing at T=13 by Race Ethnicity&quot;</span><span class="p">,</span>
                  <span class="n">where</span> <span class="o">=</span> <span class="s2">&quot;Galveston Island TX&quot;</span><span class="p">,</span>
                  <span class="n">when</span> <span class="o">=</span> <span class="s2">&quot;2010&quot;</span><span class="p">,</span>
                  <span class="n">row_index</span> <span class="o">=</span> <span class="s1">&#39;Race Ethnicity&#39;</span><span class="p">,</span>
                  <span class="n">col_index</span> <span class="o">=</span> <span class="s1">&#39;Permanent Housing&#39;</span><span class="p">,</span>
                  <span class="n">row_percent</span> <span class="o">=</span> <span class="s2">&quot;0 Not Permanent Housing&quot;</span>
                  <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
#T_e7374 caption {
  text-align: center;
  caption-side: top;
  font-size: 150%;
}
</style>
<table id="T_e7374">
  <caption>Table. Total Population by Householder by Permanent Housing at T=13 by Race Ethnicity, Galveston Island TX, 2010.</caption>
  <thead>
    <tr>
      <th class="index_name level0" >Permanent Housing</th>
      <th id="T_e7374_level0_col0" class="col_heading level0 col0" >0 Not Permanent Housing (%)</th>
      <th id="T_e7374_level0_col1" class="col_heading level0 col1" >1 Permanent Housing (%)</th>
      <th id="T_e7374_level0_col2" class="col_heading level0 col2" >Total Population by Householder (%)</th>
      <th id="T_e7374_level0_col3" class="col_heading level0 col3" >Percent Row 
0 Not Permanent Housing</th>
    </tr>
    <tr>
      <th class="index_name level0" >Race Ethnicity</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
      <th class="blank col3" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_e7374_level0_row0" class="row_heading level0 row0" >1 White alone, Not Hispanic</th>
      <td id="T_e7374_row0_col0" class="data row0 col0" >1,046	 (51.5%)</td>
      <td id="T_e7374_row0_col1" class="data row0 col1" >8,572	 (52.3%)</td>
      <td id="T_e7374_row0_col2" class="data row0 col2" >9,618	 (52.2%)</td>
      <td id="T_e7374_row0_col3" class="data row0 col3" >10.9%</td>
    </tr>
    <tr>
      <th id="T_e7374_level0_row1" class="row_heading level0 row1" >2 Black alone, Not Hispanic</th>
      <td id="T_e7374_row1_col0" class="data row1 col0" >376	 (18.5%)</td>
      <td id="T_e7374_row1_col1" class="data row1 col1" >2,799	 (17.1%)</td>
      <td id="T_e7374_row1_col2" class="data row1 col2" >3,175	 (17.2%)</td>
      <td id="T_e7374_row1_col3" class="data row1 col3" >11.8%</td>
    </tr>
    <tr>
      <th id="T_e7374_level0_row2" class="row_heading level0 row2" >3 American Indian and Alaska Native alone, Not Hispanic</th>
      <td id="T_e7374_row2_col0" class="data row2 col0" >11	 (0.5%)</td>
      <td id="T_e7374_row2_col1" class="data row2 col1" >68	 (0.4%)</td>
      <td id="T_e7374_row2_col2" class="data row2 col2" >79	 (0.4%)</td>
      <td id="T_e7374_row2_col3" class="data row2 col3" >13.9%</td>
    </tr>
    <tr>
      <th id="T_e7374_level0_row3" class="row_heading level0 row3" >4 Asian alone, Not Hispanic</th>
      <td id="T_e7374_row3_col0" class="data row3 col0" >63	 (3.1%)</td>
      <td id="T_e7374_row3_col1" class="data row3 col1" >566	 (3.5%)</td>
      <td id="T_e7374_row3_col2" class="data row3 col2" >629	 (3.4%)</td>
      <td id="T_e7374_row3_col3" class="data row3 col3" >10.0%</td>
    </tr>
    <tr>
      <th id="T_e7374_level0_row4" class="row_heading level0 row4" >5 Other Race, Not Hispanic</th>
      <td id="T_e7374_row4_col0" class="data row4 col0" >14	 (0.7%)</td>
      <td id="T_e7374_row4_col1" class="data row4 col1" >202	 (1.2%)</td>
      <td id="T_e7374_row4_col2" class="data row4 col2" >216	 (1.2%)</td>
      <td id="T_e7374_row4_col3" class="data row4 col3" >6.5%</td>
    </tr>
    <tr>
      <th id="T_e7374_level0_row5" class="row_heading level0 row5" >6 Any Race, Hispanic</th>
      <td id="T_e7374_row5_col0" class="data row5 col0" >521	 (25.7%)</td>
      <td id="T_e7374_row5_col1" class="data row5 col1" >4,153	 (25.3%)</td>
      <td id="T_e7374_row5_col2" class="data row5 col2" >4,674	 (25.4%)</td>
      <td id="T_e7374_row5_col3" class="data row5 col3" >11.1%</td>
    </tr>
    <tr>
      <th id="T_e7374_level0_row6" class="row_heading level0 row6" >7 Group Quarters no Race Ethnicity Data</th>
      <td id="T_e7374_row6_col0" class="data row6 col0" >nan	 (nan%)</td>
      <td id="T_e7374_row6_col1" class="data row6 col1" >26	 (0.2%)</td>
      <td id="T_e7374_row6_col2" class="data row6 col2" >26	 (0.1%)</td>
      <td id="T_e7374_row6_col3" class="data row6 col3" >nan%</td>
    </tr>
    <tr>
      <th id="T_e7374_level0_row7" class="row_heading level0 row7" >Total</th>
      <td id="T_e7374_row7_col0" class="data row7 col0" >2,031	 (100.0%)</td>
      <td id="T_e7374_row7_col1" class="data row7 col1" >16,386	 (100.0%)</td>
      <td id="T_e7374_row7_col2" class="data row7 col2" >18,417	 (100.0%)</td>
      <td id="T_e7374_row7_col3" class="data row7 col3" >11.0%</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
</section>
<section id="b-policy-lever-and-decision-combinations">
<h2>8b) Policy Lever and Decision Combinations<a class="headerlink" href="#b-policy-lever-and-decision-combinations" title="Permalink to this heading">#</a></h2>
<p>Hypothetical scenario to elevate all buildings in inventory.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create container to store filenames (use to make a GIF)</span>
<span class="c1"># https://towardsdatascience.com/basics-of-gifs-with-pythons-matplotlib-54dd544b6f30</span>
<span class="n">recovery_curve_filenames</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">bldg_gdf_policy2</span> <span class="o">=</span> <span class="n">bldg_df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="c1">#for i in range(18): </span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span> 
    
    <span class="c1">################## 1a) updated building inventory ##################  </span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Running Analysis: </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">i</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">bldg_gdf_policy2</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">bldg_gdf_policy2</span><span class="p">[</span><span class="s1">&#39;ffe_elev&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">le</span><span class="p">(</span><span class="mi">16</span><span class="p">),</span> <span class="s1">&#39;ffe_elev&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">4</span>
        <span class="c1">#bldg_gdf_policy2.loc[bldg_gdf_policy2[&#39;lhsm_elev&#39;].le(16), &#39;lhsm_elev&#39;] += 1</span>

        <span class="n">bldg_gdf_policy2</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;input_df_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">.csv&#39;</span><span class="p">)</span>
    <span class="c1"># Save new shapefile and then use as new input to building damage model</span>
    <span class="n">bldg_gdf_policy2</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">driver</span> <span class="o">=</span> <span class="s1">&#39;ESRI Shapefile&#39;</span><span class="p">,</span> <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;bldg_gdf_policy_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">.shp&#39;</span><span class="p">)</span>
    <span class="c1"># Plot and save</span>
    <span class="c1">#geoviz.plot_gdf_map(bldg_gdf_policy2, column=&#39;lhsm_elev&#39;,category=&#39;False&#39;)</span>
    <span class="c1"># Code to save the results here</span>
    <span class="c1">####################################################################      </span>
    <span class="c1">#</span>
    <span class="c1">#</span>
    <span class="c1">################## 2c) Damage to Physical Infrastructure ##################  </span>
    <span class="n">building_inv_policy2</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">file_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;bldg_gdf_policy_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">.shp&#39;</span><span class="p">,</span>
                                        <span class="n">data_type</span><span class="o">=</span><span class="s1">&#39;ergo:buildingInventoryVer7&#39;</span><span class="p">)</span>
    <span class="c1"># surge-wave building damage</span>
    <span class="n">bldg_dmg</span> <span class="o">=</span> <span class="n">BuildingDamage</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
    <span class="c1">#bldg_dmg.load_remote_input_dataset(&quot;buildings&quot;, bldg_dataset_id)</span>
    <span class="n">bldg_dmg</span><span class="o">.</span><span class="n">set_input_dataset</span><span class="p">(</span><span class="s2">&quot;buildings&quot;</span><span class="p">,</span> <span class="n">building_inv_policy2</span><span class="p">)</span>
    <span class="n">bldg_dmg</span><span class="o">.</span><span class="n">set_input_dataset</span><span class="p">(</span><span class="s2">&quot;dfr3_mapping_set&quot;</span><span class="p">,</span> <span class="n">sw_mapping_set</span><span class="p">)</span>

    <span class="n">result_name</span> <span class="o">=</span> <span class="s2">&quot;Galveston-sw-dmg&quot;</span>

    <span class="n">bldg_dmg</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;result_name&quot;</span><span class="p">,</span> <span class="n">result_name</span><span class="p">)</span>
    <span class="n">bldg_dmg</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;hazard_type&quot;</span><span class="p">,</span> <span class="n">hazard_type</span><span class="p">)</span>
    <span class="n">bldg_dmg</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;hazard_id&quot;</span><span class="p">,</span> <span class="n">hazard_id</span><span class="p">)</span>
    <span class="n">bldg_dmg</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;num_cpu&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

    <span class="n">bldg_dmg</span><span class="o">.</span><span class="n">run_analysis</span><span class="p">()</span>
    <span class="c1">###########################################################################</span>
    <span class="c1">#</span>
    <span class="c1">#</span>
    <span class="c1">################## 3b) Functionality of Physical Infrastructure ##################</span>
    <span class="c1"># Retrieve result dataset</span>
    <span class="n">building_dmg_result_policy2</span> <span class="o">=</span> <span class="n">bldg_dmg</span><span class="o">.</span><span class="n">get_output_dataset</span><span class="p">(</span><span class="s1">&#39;ds_result&#39;</span><span class="p">)</span>
    <span class="c1"># Convert dataset to Pandas DataFrame</span>
    <span class="n">bdmg_policy2_df</span> <span class="o">=</span> <span class="n">building_dmg_result_policy2</span><span class="o">.</span><span class="n">get_dataframe_from_csv</span><span class="p">(</span><span class="n">low_memory</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">bdmg_policy2_df</span><span class="o">.</span><span class="n">DS_0</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
    <span class="n">bdmg_policy2_df</span><span class="o">.</span><span class="n">DS_3</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
    <span class="c1"># Save CSV files for post processing</span>
    <span class="n">bdmg_policy2_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;bld_damage_results_policy_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">.csv&quot;</span><span class="p">)</span>
    <span class="c1">##################################################################################</span>
    <span class="c1">#</span>
    <span class="c1">#</span>
    <span class="c1">############################  3d) Social Science Modules ############################   </span>
    <span class="c1"># update building damage</span>
    <span class="n">pop_dis</span><span class="o">.</span><span class="n">set_input_dataset</span><span class="p">(</span><span class="s2">&quot;building_dmg&quot;</span><span class="p">,</span> <span class="n">building_dmg_result_policy2</span><span class="p">)</span>

    <span class="c1"># Update file name for saving results</span>
    <span class="n">result_name</span> <span class="o">=</span> <span class="s2">&quot;galveston-pop-disl-results_policy2&quot;</span>
    <span class="n">pop_dis</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;result_name&quot;</span><span class="p">,</span> <span class="n">result_name</span><span class="p">)</span>
    
    <span class="n">pop_dis</span><span class="o">.</span><span class="n">run_analysis</span><span class="p">()</span>
    
    <span class="c1"># Retrieve result dataset</span>
    <span class="n">population_dislocation_result_policy2</span> <span class="o">=</span> <span class="n">pop_dis</span><span class="o">.</span><span class="n">get_output_dataset</span><span class="p">(</span><span class="s2">&quot;result&quot;</span><span class="p">)</span>

    <span class="c1"># Convert dataset to Pandas DataFrame</span>
    <span class="n">pd_df_policy2</span> <span class="o">=</span> <span class="n">population_dislocation_result_policy2</span><span class="o">.</span><span class="n">get_dataframe_from_csv</span><span class="p">(</span><span class="n">low_memory</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="c1"># Save CSV files for post processing</span>
    <span class="n">pd_df_policy2</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;pd_df_results_policy_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">.csv&quot;</span><span class="p">)</span>
    <span class="c1">######################################################################################</span>
    <span class="c1">#</span>
    <span class="c1">#</span>
    <span class="c1">############################  4) Recovery ############################   </span>
    <span class="c1"># Update population dislocation</span>
    <span class="n">housing_recovery</span><span class="o">.</span><span class="n">set_input_dataset</span><span class="p">(</span><span class="s2">&quot;population_dislocation_block&quot;</span><span class="p">,</span> 
                            <span class="n">population_dislocation_result_policy2</span><span class="p">)</span>
    <span class="c1"># Update file name for saving results</span>
    <span class="n">result_name</span> <span class="o">=</span> <span class="s2">&quot;housing_recovery_result_policy2&quot;</span>
    <span class="c1"># Set analysis parameters</span>
    <span class="n">housing_recovery</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;result_name&quot;</span><span class="p">,</span> <span class="n">result_name</span><span class="p">)</span>
    <span class="n">housing_recovery</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;seed&quot;</span><span class="p">,</span> <span class="n">seed</span><span class="p">)</span>
    
    <span class="c1"># Run the household recovery sequence analysis - Markov model</span>
    <span class="n">housing_recovery</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
    
    <span class="c1"># Retrieve result dataset</span>
    <span class="n">housing_recovery_result_policy2</span> <span class="o">=</span> <span class="n">housing_recovery</span><span class="o">.</span><span class="n">get_output_dataset</span><span class="p">(</span><span class="s2">&quot;ds_result&quot;</span><span class="p">)</span>

    <span class="c1"># Convert dataset to Pandas DataFrame</span>
    <span class="n">df_hhrs_policy2</span> <span class="o">=</span> <span class="n">housing_recovery_result_policy2</span><span class="o">.</span><span class="n">get_dataframe_from_csv</span><span class="p">()</span>
    <span class="c1"># Save CSV files for post processing</span>
    <span class="n">df_hhrs_policy2</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;df_hhrs_results_policy_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">.csv&quot;</span><span class="p">)</span>

    <span class="c1"># merge household unit information with recovery results</span>
    <span class="n">pd_hhrs_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">left</span> <span class="o">=</span> <span class="n">pd_df_policy2</span><span class="p">,</span> 
                        <span class="n">right</span> <span class="o">=</span> <span class="n">df_hhrs_policy2</span><span class="p">,</span>
                        <span class="n">left_on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;guid&#39;</span><span class="p">,</span><span class="s1">&#39;huid&#39;</span><span class="p">],</span>
                        <span class="n">right_on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;guid&#39;</span><span class="p">,</span><span class="s1">&#39;huid&#39;</span><span class="p">],</span>
                        <span class="n">how</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>

    <span class="c1"># Plot recovery curve</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;recovery_curve_policy_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">recovery_curve_byincome</span><span class="p">(</span><span class="n">pd_df_hs</span> <span class="o">=</span> <span class="n">pd_hhrs_df</span><span class="p">,</span> 
                            <span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span><span class="p">,</span>
                            <span class="n">subtitle</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; Policy </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">recovery_curve_filenames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Running Analysis: 0
</pre></div>
</div>
<img alt="../../_images/7c3c6a4ef47df417eb79b5cc2f51c51f23f4dbd21fd4d452a5210e03ebc68f54.png" src="../../_images/7c3c6a4ef47df417eb79b5cc2f51c51f23f4dbd21fd4d452a5210e03ebc68f54.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Running Analysis: 1
</pre></div>
</div>
<img alt="../../_images/15d1776621f89bb7b18eaae875da28149830d9d12aac40cd7ecb4d26066bce0b.png" src="../../_images/15d1776621f89bb7b18eaae875da28149830d9d12aac40cd7ecb4d26066bce0b.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Running Analysis: 2
</pre></div>
</div>
<img alt="../../_images/920bd7f325eb3a55df3831ca58b234f406a2b4f553bc1ba3c3d7561465b6c906.png" src="../../_images/920bd7f325eb3a55df3831ca58b234f406a2b4f553bc1ba3c3d7561465b6c906.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Running Analysis: 3
</pre></div>
</div>
<img alt="../../_images/27e2d0b248dac3fca0b351a79bb4990b2d3c0d4fa22a22a0d996bde0bc7e3005.png" src="../../_images/27e2d0b248dac3fca0b351a79bb4990b2d3c0d4fa22a22a0d996bde0bc7e3005.png" />
</div>
</div>
<section id="goal-make-gif-from-recovery-curves">
<h3>Goal - Make GIF from recovery curves<a class="headerlink" href="#goal-make-gif-from-recovery-curves" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>option - combine PDF files and convert to GIf</p>
<ul>
<li><p><a class="reference external" href="https://convertio.co/pdf-gif/">https://convertio.co/pdf-gif/</a></p></li>
</ul>
</li>
<li><p>Other options</p>
<ul>
<li><p><a class="reference external" href="https://towardsdatascience.com/basics-of-gifs-with-pythons-matplotlib-54dd544b6f30">https://towardsdatascience.com/basics-of-gifs-with-pythons-matplotlib-54dd544b6f30</a></p></li>
<li><p><a class="reference external" href="https://www.tutorialspoint.com/how-to-clear-the-memory-completely-of-all-matplotlib-plots">https://www.tutorialspoint.com/how-to-clear-the-memory-completely-of-all-matplotlib-plots</a></p></li>
</ul>
</li>
</ul>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="post-processing">
<h1>POST PROCESSING<a class="headerlink" href="#post-processing" title="Permalink to this heading">#</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># choose i between 1 to 4 (1, 4, 8, 12, 16 feet elevation)</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">4</span>
</pre></div>
</div>
</div>
</div>
<section id="postprocessing-functionality-of-physical-infrastructure">
<h2>Postprocessing: Functionality of Physical Infrastructure<a class="headerlink" href="#postprocessing-functionality-of-physical-infrastructure" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bdmg_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span> <span class="p">(</span><span class="s1">&#39;bld_damage_results_policy_0.csv&#39;</span><span class="p">)</span>
<span class="n">bdmg_policy2_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;bld_damage_results_policy_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bdmg_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>guid</th>
      <th>LS_0</th>
      <th>LS_1</th>
      <th>LS_2</th>
      <th>DS_0</th>
      <th>DS_1</th>
      <th>DS_2</th>
      <th>DS_3</th>
      <th>haz_expose</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>1815653a-7b70-44ce-8544-e975596bdf82</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>no</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>df63f574-8e9b-426b-aa3b-b3757cb699b5</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>no</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>a743ae24-4209-44e2-b11e-7a872f071ae9</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>no</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>59ed0339-c8e3-4fcd-9b5a-c1487b035d3b</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>no</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>5cc8a749-21ca-4073-8626-4ae7332cc0dd</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>no</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bdmg_df</span><span class="o">.</span><span class="n">guid</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count                                   172534
unique                                  172534
top       1815653a-7b70-44ce-8544-e975596bdf82
freq                                         1
Name: guid, dtype: object
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bdmg_policy2_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>guid</th>
      <th>LS_0</th>
      <th>LS_1</th>
      <th>LS_2</th>
      <th>DS_0</th>
      <th>DS_1</th>
      <th>DS_2</th>
      <th>DS_3</th>
      <th>haz_expose</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>b39dd67f-802e-402b-b7d5-51c4bbed3464</td>
      <td>0.000000e+00</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0</td>
      <td>0</td>
      <td>0.000000e+00</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>e7467617-6844-437e-a938-7300418facb8</td>
      <td>2.000000e-10</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0</td>
      <td>0</td>
      <td>2.000000e-10</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>d7ce12df-660d-42fc-9786-f0f543c00002</td>
      <td>0.000000e+00</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0</td>
      <td>0</td>
      <td>0.000000e+00</td>
      <td>partial</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>74aac543-8aae-4779-addf-754e307a772b</td>
      <td>0.000000e+00</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0</td>
      <td>0</td>
      <td>0.000000e+00</td>
      <td>partial</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>ed3147d3-b7b8-49da-96a9-ddedfccae60c</td>
      <td>0.000000e+00</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0</td>
      <td>0</td>
      <td>0.000000e+00</td>
      <td>partial</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bdmg_policy2_df</span><span class="o">.</span><span class="n">guid</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count                                    18962
unique                                   18962
top       b39dd67f-802e-402b-b7d5-51c4bbed3464
freq                                         1
Name: guid, dtype: object
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Merge policy i with policy j</span>
<span class="n">bdmg_df_policies</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">left</span> <span class="o">=</span> <span class="n">bdmg_df</span><span class="p">,</span>
                      <span class="n">right</span> <span class="o">=</span> <span class="n">bdmg_policy2_df</span><span class="p">,</span>
                      <span class="n">on</span> <span class="o">=</span> <span class="s1">&#39;guid&#39;</span><span class="p">,</span>
                      <span class="n">suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;_policy0&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;_policy</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bdmg_df_policies</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0_policy0</th>
      <th>guid</th>
      <th>LS_0_policy0</th>
      <th>LS_1_policy0</th>
      <th>LS_2_policy0</th>
      <th>DS_0_policy0</th>
      <th>DS_1_policy0</th>
      <th>DS_2_policy0</th>
      <th>DS_3_policy0</th>
      <th>haz_expose_policy0</th>
      <th>Unnamed: 0_policy4</th>
      <th>LS_0_policy4</th>
      <th>LS_1_policy4</th>
      <th>LS_2_policy4</th>
      <th>DS_0_policy4</th>
      <th>DS_1_policy4</th>
      <th>DS_2_policy4</th>
      <th>DS_3_policy4</th>
      <th>haz_expose_policy4</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Merge policy i with policy j</span>
<span class="n">bdmg_df_policies</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">left</span> <span class="o">=</span> <span class="n">bdmg_df</span><span class="p">,</span>
                      <span class="n">right</span> <span class="o">=</span> <span class="n">bdmg_policy2_df</span><span class="p">,</span>
                      <span class="n">on</span> <span class="o">=</span> <span class="s1">&#39;guid&#39;</span><span class="p">,</span>
                      <span class="n">suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;_policy0&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;_policy</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">))</span>
<span class="n">bdmg_df_policies</span><span class="p">[[</span><span class="s1">&#39;DS_0_policy0&#39;</span><span class="p">,</span><span class="sa">f</span><span class="s1">&#39;DS_0_policy</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span><span class="o">.</span><span class="n">T</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>DS_0_policy0</th>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>DS_0_policy4</th>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bdmg_df_policies</span><span class="p">[[</span><span class="s1">&#39;DS_3_policy0&#39;</span><span class="p">,</span><span class="sa">f</span><span class="s1">&#39;DS_3_policy</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span><span class="o">.</span><span class="n">T</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>DS_3_policy0</th>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>DS_3_policy4</th>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="c1"># Scatter Plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">bdmg_df_policies</span><span class="p">[</span><span class="s1">&#39;DS_3_policy0&#39;</span><span class="p">],</span> <span class="n">bdmg_df_policies</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;DS_3_policy</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Scatter plot Policy 0 vs Policy </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Complete Damage Policy 0&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Complete Damage Policy </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;CompleteDamage</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">.tif&#39;</span><span class="p">,</span> <span class="n">dpi</span> <span class="o">=</span> <span class="mi">200</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/9748a02a55f1dad457240d05c69810fdd91c166f66c7af399efc4589a63aa0a4.png" src="../../_images/9748a02a55f1dad457240d05c69810fdd91c166f66c7af399efc4589a63aa0a4.png" />
</div>
</div>
</section>
<section id="postprocessing-recovery">
<h2>Postprocessing: Recovery<a class="headerlink" href="#postprocessing-recovery" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_hhrs_policy2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;df_hhrs_results_policy_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">.csv&quot;</span><span class="p">)</span>
<span class="c1"># merge household unit information with recovery results</span>
<span class="n">pd_df_hs_policy2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">left</span> <span class="o">=</span> <span class="n">pd_df_policy2</span><span class="p">,</span> 
                    <span class="n">right</span> <span class="o">=</span> <span class="n">df_hhrs_policy2</span><span class="p">,</span>
                    <span class="n">left_on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;guid&#39;</span><span class="p">,</span><span class="s1">&#39;huid&#39;</span><span class="p">],</span>
                    <span class="n">right_on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;guid&#39;</span><span class="p">,</span><span class="s1">&#39;huid&#39;</span><span class="p">],</span>
                    <span class="n">how</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>
<span class="n">pd_df_hs_policy2</span><span class="p">[[</span><span class="s1">&#39;guid&#39;</span><span class="p">,</span><span class="s1">&#39;huid&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>guid</th>
      <th>huid</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>131987</td>
      <td>131987</td>
    </tr>
    <tr>
      <th>unique</th>
      <td>104607</td>
      <td>131987</td>
    </tr>
    <tr>
      <th>top</th>
      <td>6396008f-530a-481c-9757-93f7d58391f9</td>
      <td>B481677201001000H222</td>
    </tr>
    <tr>
      <th>freq</th>
      <td>293</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="id3">
<h2>6a) Sufficient Quality Solutions Found?<a class="headerlink" href="#id3" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd_df_policy2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;pd_df_results_policy_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">.csv&#39;</span><span class="p">)</span>
<span class="n">df_hhrs_policy2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;df_hhrs_results_policy_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">.csv&#39;</span><span class="p">)</span>

<span class="n">pd_df_hs_policy2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">left</span> <span class="o">=</span> <span class="n">pd_df_policy2</span><span class="p">,</span> 
                    <span class="n">right</span> <span class="o">=</span> <span class="n">df_hhrs_policy2</span><span class="p">,</span>
                    <span class="n">left_on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;guid&#39;</span><span class="p">,</span><span class="s1">&#39;huid&#39;</span><span class="p">],</span>
                    <span class="n">right_on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;guid&#39;</span><span class="p">,</span><span class="s1">&#39;huid&#39;</span><span class="p">],</span>
                    <span class="n">how</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add HHRS categories to dataframe</span>
<span class="n">pd_df_hs_policy2</span> <span class="o">=</span> <span class="n">add_label_cat_values_df</span><span class="p">(</span><span class="n">pd_df_hs_policy2</span><span class="p">,</span> 
            <span class="n">valuelabels</span> <span class="o">=</span> <span class="n">hhrs_valuelabels</span><span class="p">,</span> <span class="n">variable</span> <span class="o">=</span> <span class="s1">&#39;13&#39;</span><span class="p">)</span>
<span class="n">pd_df_hs_policy2</span> <span class="o">=</span> <span class="n">add_label_cat_values_df</span><span class="p">(</span><span class="n">pd_df_hs_policy2</span><span class="p">,</span> 
            <span class="n">valuelabels</span> <span class="o">=</span> <span class="n">permanenthousing_valuelabels</span><span class="p">,</span>
                        <span class="n">variable</span> <span class="o">=</span> <span class="s1">&#39;13&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">poptable</span><span class="o">.</span><span class="n">pop_results_table</span><span class="p">(</span><span class="n">pd_df_hs_policy2</span><span class="p">,</span> 
                  <span class="n">who</span> <span class="o">=</span> <span class="s2">&quot;Total Population by Householder&quot;</span><span class="p">,</span> 
                  <span class="n">what</span> <span class="o">=</span> <span class="s2">&quot;by Permanent Housing at T=13 by Race Ethnicity&quot;</span><span class="p">,</span>
                  <span class="n">where</span> <span class="o">=</span> <span class="s2">&quot;Galveston Island TX&quot;</span><span class="p">,</span>
                  <span class="n">when</span> <span class="o">=</span> <span class="s2">&quot;2010 - Policy 2 - All buildings elvated&quot;</span><span class="p">,</span>
                  <span class="n">row_index</span> <span class="o">=</span> <span class="s1">&#39;Race Ethnicity&#39;</span><span class="p">,</span>
                  <span class="n">col_index</span> <span class="o">=</span> <span class="s1">&#39;Permanent Housing&#39;</span><span class="p">,</span>
                  <span class="n">row_percent</span> <span class="o">=</span> <span class="s1">&#39;0 Not Permanent Housing&#39;</span>
                  <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
#T_98c06 caption {
  text-align: center;
  caption-side: top;
  font-size: 150%;
}
</style>
<table id="T_98c06">
  <caption>Table. Total Population by Householder by Permanent Housing at T=13 by Race Ethnicity, Galveston Island TX, 2010 - Policy 2 - All buildings elvated.</caption>
  <thead>
    <tr>
      <th class="index_name level0" >Permanent Housing</th>
      <th id="T_98c06_level0_col0" class="col_heading level0 col0" >0 Not Permanent Housing (%)</th>
      <th id="T_98c06_level0_col1" class="col_heading level0 col1" >1 Permanent Housing (%)</th>
      <th id="T_98c06_level0_col2" class="col_heading level0 col2" >Total Population by Householder (%)</th>
      <th id="T_98c06_level0_col3" class="col_heading level0 col3" >Percent Row 
0 Not Permanent Housing</th>
    </tr>
    <tr>
      <th class="index_name level0" >Race Ethnicity</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
      <th class="blank col3" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_98c06_level0_row0" class="row_heading level0 row0" >1 White alone, Not Hispanic</th>
      <td id="T_98c06_row0_col0" class="data row0 col0" >1,442	 (58.7%)</td>
      <td id="T_98c06_row0_col1" class="data row0 col1" >35,944	 (60.8%)</td>
      <td id="T_98c06_row0_col2" class="data row0 col2" >37,386	 (60.7%)</td>
      <td id="T_98c06_row0_col3" class="data row0 col3" >3.9%</td>
    </tr>
    <tr>
      <th id="T_98c06_level0_row1" class="row_heading level0 row1" >2 Black alone, Not Hispanic</th>
      <td id="T_98c06_row1_col0" class="data row1 col0" >376	 (15.3%)</td>
      <td id="T_98c06_row1_col1" class="data row1 col1" >10,202	 (17.3%)</td>
      <td id="T_98c06_row1_col2" class="data row1 col2" >10,578	 (17.2%)</td>
      <td id="T_98c06_row1_col3" class="data row1 col3" >3.6%</td>
    </tr>
    <tr>
      <th id="T_98c06_level0_row2" class="row_heading level0 row2" >3 American Indian and Alaska Native alone, Not Hispanic</th>
      <td id="T_98c06_row2_col0" class="data row2 col0" >14	 (0.6%)</td>
      <td id="T_98c06_row2_col1" class="data row2 col1" >242	 (0.4%)</td>
      <td id="T_98c06_row2_col2" class="data row2 col2" >256	 (0.4%)</td>
      <td id="T_98c06_row2_col3" class="data row2 col3" >5.5%</td>
    </tr>
    <tr>
      <th id="T_98c06_level0_row3" class="row_heading level0 row3" >4 Asian alone, Not Hispanic</th>
      <td id="T_98c06_row3_col0" class="data row3 col0" >69	 (2.8%)</td>
      <td id="T_98c06_row3_col1" class="data row3 col1" >1,167	 (2.0%)</td>
      <td id="T_98c06_row3_col2" class="data row3 col2" >1,236	 (2.0%)</td>
      <td id="T_98c06_row3_col3" class="data row3 col3" >5.6%</td>
    </tr>
    <tr>
      <th id="T_98c06_level0_row4" class="row_heading level0 row4" >5 Other Race, Not Hispanic</th>
      <td id="T_98c06_row4_col0" class="data row4 col0" >18	 (0.7%)</td>
      <td id="T_98c06_row4_col1" class="data row4 col1" >593	 (1.0%)</td>
      <td id="T_98c06_row4_col2" class="data row4 col2" >611	 (1.0%)</td>
      <td id="T_98c06_row4_col3" class="data row4 col3" >2.9%</td>
    </tr>
    <tr>
      <th id="T_98c06_level0_row5" class="row_heading level0 row5" >6 Any Race, Hispanic</th>
      <td id="T_98c06_row5_col0" class="data row5 col0" >536	 (21.8%)</td>
      <td id="T_98c06_row5_col1" class="data row5 col1" >10,933	 (18.5%)</td>
      <td id="T_98c06_row5_col2" class="data row5 col2" >11,469	 (18.6%)</td>
      <td id="T_98c06_row5_col3" class="data row5 col3" >4.7%</td>
    </tr>
    <tr>
      <th id="T_98c06_level0_row6" class="row_heading level0 row6" >7 Group Quarters no Race Ethnicity Data</th>
      <td id="T_98c06_row6_col0" class="data row6 col0" >nan	 (nan%)</td>
      <td id="T_98c06_row6_col1" class="data row6 col1" >48	 (0.1%)</td>
      <td id="T_98c06_row6_col2" class="data row6 col2" >48	 (0.1%)</td>
      <td id="T_98c06_row6_col3" class="data row6 col3" >nan%</td>
    </tr>
    <tr>
      <th id="T_98c06_level0_row7" class="row_heading level0 row7" >Total</th>
      <td id="T_98c06_row7_col0" class="data row7 col0" >2,455	 (100.0%)</td>
      <td id="T_98c06_row7_col1" class="data row7 col1" >59,129	 (100.0%)</td>
      <td id="T_98c06_row7_col2" class="data row7 col2" >61,584	 (100.0%)</td>
      <td id="T_98c06_row7_col3" class="data row7 col3" >4.0%</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">poptable</span><span class="o">.</span><span class="n">pop_results_table</span><span class="p">(</span><span class="n">pd_df_hs</span><span class="p">,</span> 
                  <span class="n">who</span> <span class="o">=</span> <span class="s2">&quot;Total Population by Householder&quot;</span><span class="p">,</span> 
                  <span class="n">what</span> <span class="o">=</span> <span class="s2">&quot;by Permanent Housing at T=13 by Race Ethnicity&quot;</span><span class="p">,</span>
                  <span class="n">where</span> <span class="o">=</span> <span class="s2">&quot;Galveston Island TX&quot;</span><span class="p">,</span>
                  <span class="n">when</span> <span class="o">=</span> <span class="s2">&quot;2010 - Baseline&quot;</span><span class="p">,</span>
                  <span class="n">row_index</span> <span class="o">=</span> <span class="s1">&#39;Race Ethnicity&#39;</span><span class="p">,</span>
                  <span class="n">col_index</span> <span class="o">=</span> <span class="s1">&#39;Permanent Housing&#39;</span><span class="p">,</span>
                  <span class="n">row_percent</span> <span class="o">=</span> <span class="s1">&#39;0 Not Permanent Housing&#39;</span>
                  <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
#T_ca09d caption {
  text-align: center;
  caption-side: top;
  font-size: 150%;
}
</style>
<table id="T_ca09d">
  <caption>Table. Total Population by Householder by Permanent Housing at T=13 by Race Ethnicity, Galveston Island TX, 2010 - Baseline.</caption>
  <thead>
    <tr>
      <th class="index_name level0" >Permanent Housing</th>
      <th id="T_ca09d_level0_col0" class="col_heading level0 col0" >0 Not Permanent Housing (%)</th>
      <th id="T_ca09d_level0_col1" class="col_heading level0 col1" >1 Permanent Housing (%)</th>
      <th id="T_ca09d_level0_col2" class="col_heading level0 col2" >Total Population by Householder (%)</th>
      <th id="T_ca09d_level0_col3" class="col_heading level0 col3" >Percent Row 
0 Not Permanent Housing</th>
    </tr>
    <tr>
      <th class="index_name level0" >Race Ethnicity</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
      <th class="blank col3" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_ca09d_level0_row0" class="row_heading level0 row0" >1 White alone, Not Hispanic</th>
      <td id="T_ca09d_row0_col0" class="data row0 col0" >1,046	 (51.5%)</td>
      <td id="T_ca09d_row0_col1" class="data row0 col1" >8,572	 (52.3%)</td>
      <td id="T_ca09d_row0_col2" class="data row0 col2" >9,618	 (52.2%)</td>
      <td id="T_ca09d_row0_col3" class="data row0 col3" >10.9%</td>
    </tr>
    <tr>
      <th id="T_ca09d_level0_row1" class="row_heading level0 row1" >2 Black alone, Not Hispanic</th>
      <td id="T_ca09d_row1_col0" class="data row1 col0" >376	 (18.5%)</td>
      <td id="T_ca09d_row1_col1" class="data row1 col1" >2,799	 (17.1%)</td>
      <td id="T_ca09d_row1_col2" class="data row1 col2" >3,175	 (17.2%)</td>
      <td id="T_ca09d_row1_col3" class="data row1 col3" >11.8%</td>
    </tr>
    <tr>
      <th id="T_ca09d_level0_row2" class="row_heading level0 row2" >3 American Indian and Alaska Native alone, Not Hispanic</th>
      <td id="T_ca09d_row2_col0" class="data row2 col0" >11	 (0.5%)</td>
      <td id="T_ca09d_row2_col1" class="data row2 col1" >68	 (0.4%)</td>
      <td id="T_ca09d_row2_col2" class="data row2 col2" >79	 (0.4%)</td>
      <td id="T_ca09d_row2_col3" class="data row2 col3" >13.9%</td>
    </tr>
    <tr>
      <th id="T_ca09d_level0_row3" class="row_heading level0 row3" >4 Asian alone, Not Hispanic</th>
      <td id="T_ca09d_row3_col0" class="data row3 col0" >63	 (3.1%)</td>
      <td id="T_ca09d_row3_col1" class="data row3 col1" >566	 (3.5%)</td>
      <td id="T_ca09d_row3_col2" class="data row3 col2" >629	 (3.4%)</td>
      <td id="T_ca09d_row3_col3" class="data row3 col3" >10.0%</td>
    </tr>
    <tr>
      <th id="T_ca09d_level0_row4" class="row_heading level0 row4" >5 Other Race, Not Hispanic</th>
      <td id="T_ca09d_row4_col0" class="data row4 col0" >14	 (0.7%)</td>
      <td id="T_ca09d_row4_col1" class="data row4 col1" >202	 (1.2%)</td>
      <td id="T_ca09d_row4_col2" class="data row4 col2" >216	 (1.2%)</td>
      <td id="T_ca09d_row4_col3" class="data row4 col3" >6.5%</td>
    </tr>
    <tr>
      <th id="T_ca09d_level0_row5" class="row_heading level0 row5" >6 Any Race, Hispanic</th>
      <td id="T_ca09d_row5_col0" class="data row5 col0" >521	 (25.7%)</td>
      <td id="T_ca09d_row5_col1" class="data row5 col1" >4,153	 (25.3%)</td>
      <td id="T_ca09d_row5_col2" class="data row5 col2" >4,674	 (25.4%)</td>
      <td id="T_ca09d_row5_col3" class="data row5 col3" >11.1%</td>
    </tr>
    <tr>
      <th id="T_ca09d_level0_row6" class="row_heading level0 row6" >7 Group Quarters no Race Ethnicity Data</th>
      <td id="T_ca09d_row6_col0" class="data row6 col0" >nan	 (nan%)</td>
      <td id="T_ca09d_row6_col1" class="data row6 col1" >26	 (0.2%)</td>
      <td id="T_ca09d_row6_col2" class="data row6 col2" >26	 (0.1%)</td>
      <td id="T_ca09d_row6_col3" class="data row6 col3" >nan%</td>
    </tr>
    <tr>
      <th id="T_ca09d_level0_row7" class="row_heading level0 row7" >Total</th>
      <td id="T_ca09d_row7_col0" class="data row7 col0" >2,031	 (100.0%)</td>
      <td id="T_ca09d_row7_col1" class="data row7 col1" >16,386	 (100.0%)</td>
      <td id="T_ca09d_row7_col2" class="data row7 col2" >18,417	 (100.0%)</td>
      <td id="T_ca09d_row7_col3" class="data row7 col3" >11.0%</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "npr99/IN-CORE_Galveston",
            ref: "kooshan_main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./notebooks\extra_notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../housing_household_recovery.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">8. Housing Houshold Recovery Sequentials</p>
      </div>
    </a>
    <a class="right-next"
       href="01_Damage_Buildings/BuildingDamage_Tori_05_18_22.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Building Damage</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Galveston Testbed (previous version)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#in-core-flowchart-galveston">IN-CORE Flowchart - Galveston</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#background">Background</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#general-info">General info</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#start">Start</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#initial-community-description">1) Initial community description</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-built-environment">1a) Built Environment</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#buildings">Buildings</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#b-social-systems">1b) Social Systems</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-1b-interdependent-community-description">1a + 1b) Interdependent Community Description</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#set-up-and-run-housing-unit-allocation">Set Up and Run Housing Unit Allocation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#explore-results-from-housing-unit-allocation">Explore results from Housing Unit Allocation</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#validate-the-housing-unit-allocation-has-worked">Validate the Housing Unit Allocation has worked</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#hazards-and-damages">2) Hazards and Damages</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-hazard-model-hurricane">2a) Hazard Model (Hurricane)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#coupled-adcirc-swan">Coupled ADCIRC+SWAN</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#kriging-based-surrogate-model">Kriging-based surrogate model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#building-damage">Building damage</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#building-fragility">2.1 Building Fragility</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Building Damage:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">2.2 Building Damage</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wind-building-damage">2.2.1 Wind building damage</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#surge-wave-building-damage">2.2.2 Surge-Wave building damage</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#flood-building-damage">Flood building damage</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#combine-wind-wave-and-surge-building-damage">Combine wind, wave and surge building damage</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#electric-power-facility-damage">2.3 Electric Power Facility Damage</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#functionality">3) Functionality</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-functionality-models">3a) Functionality Models</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#b-functionality-of-physical-infrastructure">3b) Functionality of Physical Infrastructure</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#d-social-science-modules">3d) Social Science Modules</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#d-1-use-new-pyincore-data-utility-to-obtain-block-group-data-for-county">3d.1 Use new pyincore-data utility to obtain Block Group Data for County</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#d-2-population-dislocation">3d.2 Population Dislocation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#d-3-explore-population-dislocation-results">3.d.3 Explore Population Dislocation Results</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#d-4-explore-population-dislocation-and-building-damage-results">3.d.4 Explore Population Dislocation and Building Damage Results</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#recovery">4) Recovery</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#household-level-housing-recovery-analysis">4.1 Household-Level Housing Recovery Analysis</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#set-up-and-run-household-level-housing-sequential-recovery">4.2 Set Up and Run Household-level Housing Sequential Recovery</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-sufficient-quality-solutions-found">6 a) Sufficient Quality Solutions Found?</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#explore-household-level-housing-recovery-results">Explore Household-level Housing Recovery Results</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-recovery-curve-based-on-income-groups">Create recovery curve based on income groups</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#b-policy-lever-and-decision-combinations">8b) Policy Lever and Decision Combinations</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#goal-make-gif-from-recovery-curves">Goal - Make GIF from recovery curves</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#post-processing">POST PROCESSING</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#postprocessing-functionality-of-physical-infrastructure">Postprocessing: Functionality of Physical Infrastructure</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#postprocessing-recovery">Postprocessing: Recovery</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">6a) Sufficient Quality Solutions Found?</a></li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Kooshan Amini
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>